(function(){var T=!1,S,R=this;function Q(i,m){var f=i.split("."),l=R;!(f[0] in l)&&l.execScript&&l.execScript("var "+f[0]);for(var k;f.length&&(k=f.shift());){!f.length&&void 0!==m?l[k]=m:l=l[k]?l[k]:l[k]={}}}var P=Array.prototype,O=P.forEach?function(i,k,f){P.forEach.call(i,k,f)}:function(i,n,f){for(var m=i.length,l="string"==typeof i?i.split(""):i,k=0;k<m;k++){k in l&&n.call(f,l[k],k,i)}};function N(i,n){this.c={};this.a=[];var f=arguments.length;if(1<f){if(f%2){throw Error("Uneven number of arguments")}for(var m=0;m<f;m+=2){this.set(arguments[m],arguments[m+1])}}else{if(i){var l;if(i instanceof N){M(i);m=i.a.concat();M(i);l=[];for(f=0;f<i.a.length;f++){l.push(i.c[i.a[f]])}}else{var f=[],k=0;for(m in i){f[k++]=m}m=f;f=[];k=0;for(l in i){f[k++]=i[l]}l=f}for(f=0;f<m.length;f++){this.set(m[f],l[f])}}}}N.prototype.f=0;N.prototype.p=0;function M(i){if(i.f!=i.a.length){for(var m=0,f=0;m<i.a.length;){var l=i.a[m];A(i.c,l)&&(i.a[f++]=l);m++}i.a.length=f}if(i.f!=i.a.length){for(var k={},f=m=0;m<i.a.length;){l=i.a[m],A(k,l)||(i.a[f++]=l,k[l]=1),m++}i.a.length=f}}N.prototype.get=function(f,i){return A(this.c,f)?this.c[f]:i};N.prototype.set=function(f,i){A(this.c,f)||(this.f++,this.a.push(f),this.p++);this.c[f]=i};function A(f,i){return Object.prototype.hasOwnProperty.call(f,i)}var s,o,h,g;function d(){return R.navigator?R.navigator.userAgent:null}g=h=o=s=T;var H;if(H=d()){var B=R.navigator;s=0==H.indexOf("Opera");o=!s&&-1!=H.indexOf("MSIE");h=!s&&-1!=H.indexOf("WebKit");g=!s&&!h&&"Gecko"==B.product}var z=o,p=g,j=h;var e;if(s&&R.opera){var c=R.opera.version;"function"==typeof c&&c()}else{p?e=/rv\:([^\);]+)(\)|;)/:z?e=/MSIE\s+([^\);]+)(\)|;)/:j&&(e=/WebKit\/(\S+)/),e&&e.exec(d())}function b(f,i){this.b=f||{e:"",prefix:"",host:"",scheme:""};this.h(i||{})}b.g=function(){return b.j?b.j:b.j=new b};S=b.prototype;S.h=function(f){this.d=new N(f)};S.o=function(){return this.d};S.k=function(f){this.b.e=f};S.n=function(){return this.b.e};S.l=function(f){this.b.prefix=f};function a(i,n,f,m){var l,k=RegExp(/\[\]$/);if(f instanceof Array){O(f,function(q,r){k.test(n)?m(n,q):a(i,n+"["+("object"===typeof q?r:"")+"]",q,m)})}else{if("object"===typeof f){for(l in f){a(i,n+"["+l+"]",f[l],m)}}else{m(n,f)}}}S.i=function(f){var i=this.b.prefix+f;if(A(this.d.c,i)){f=i}else{if(!A(this.d.c,f)){throw Error('The route "'+f+'" does not exist.')}}return this.d.get(f)};S.m=function(v,r,u){var q=this.i(v),n=r||{},m={},t;for(t in n){m[t]=n[t]}var l="",x=!0,k="";O(q.tokens,function(y){if("text"===y[0]){l=y[1]+l,x=T}else{if("variable"===y[0]){var D=y[3] in q.defaults;if(T===x||!D||y[3] in n&&n[y[3]]!=q.defaults[y[3]]){if(y[3] in n){var D=n[y[3]],C=y[3];C in m&&delete m[C]}else{if(D){D=q.defaults[y[3]]}else{if(x){return}throw Error('The route "'+v+'" requires the parameter "'+y[3]+'".')}}if(!(!0===D||T===D||""===D)||!x){C=encodeURIComponent(D).replace(/%2F/g,"/"),"null"===C&&null===D&&(C=""),l=y[1]+C+l}x=T}else{D&&(y=y[3],y in m&&delete m[y])}}else{throw Error('The token type "'+y[0]+'" is not supported.')}}});""===l&&(l="/");O(q.hosttokens,function(C){var y;if("text"===C[0]){k=C[1]+k}else{if("variable"===C[0]){if(C[3] in n){y=n[C[3]];var D=C[3];D in m&&delete m[D]}else{C[3] in q.defaults&&(y=q.defaults[C[3]])}k=C[1]+y+k}}});l=this.b.e+l;"_scheme" in q.requirements&&this.b.scheme!=q.requirements._scheme?l=q.requirements._scheme+"://"+(k||this.b.host)+l:k&&this.b.host!==k?l=this.b.scheme+"://"+k+l:!0===u&&(l=this.b.scheme+"://"+this.b.host+l);var r=0,i;for(i in m){r++}if(0<r){var f,w=[];i=function(C,y){y="function"===typeof y?y():y;w.push(encodeURIComponent(C)+"="+encodeURIComponent(null===y?"":y))};for(f in m){a(this,f,m[f],i)}l=l+"?"+w.join("&").replace(/%20/g,"+")}return l};Q("fos.Router",b);Q("fos.Router.setData",function(f){var i=b.g();i.k(f.base_url);i.h(f.routes);"prefix" in f&&i.l(f.prefix);i.b.host=f.host;i.b.scheme=f.scheme});b.getInstance=b.g;b.prototype.setRoutes=b.prototype.h;b.prototype.getRoutes=b.prototype.o;b.prototype.setBaseUrl=b.prototype.k;b.prototype.getBaseUrl=b.prototype.n;b.prototype.generate=b.prototype.m;b.prototype.setPrefix=b.prototype.l;b.prototype.getRoute=b.prototype.i;window.Routing=b.g()})();
fos.Router.setData({base_url:"",routes:{topmall_payu_payu_ordered:{tokens:[["text","/"],["variable","/","[^/]++","order"],["text","/payu/ordered"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},topmall_payu_payu_order:{tokens:[["text","/"],["variable","/","[^/]++","order"],["text","/payu/order"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_payu_payu_widget:{tokens:[["text","/"],["variable","/","[^/]++","order"],["text","/payu/widget"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},topmall_payu_payu_blik:{tokens:[["text","/payu/blik/"]],defaults:[],requirements:{orderNumber:"\\d+",_method:"GET|POST"},hosttokens:[]},topmall_payu_payu_methodlist:{tokens:[["text","/payu/method/list/"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},topmall_catalognew_catalog_full:{tokens:[["text","/catalog/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_index:{tokens:[["variable","/",".*","name"],["text","/catalog"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_sale:{tokens:[["text","/bestseller/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_sale_name:{tokens:[["variable","/",".*","name"],["text","/bestseller"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_oferta:{tokens:[["text","/oferta/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_oferta_name:{tokens:[["variable","/",".*","name"],["text","/oferta"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_zapowiedzi:{tokens:[["text","/zapowiedzi/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_zapowiedzi_name:{tokens:[["variable","/",".*","name"],["text","/zapowiedzi"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_warehouse:{tokens:[["text","/warehouse/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_warehouse_name:{tokens:[["variable","/",".*","name"],["text","/warehouse"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_new:{tokens:[["text","/nowosci/"]],defaults:[],requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_new_name:{tokens:[["variable","/",".*","name"],["text","/nowosci"]],defaults:{name:"full"},requirements:{name:".*"},hosttokens:[]},topmall_catalognew_catalog_author:{tokens:[["text","/"],["variable","/","[^\\/]*","name"],["text","/a"]],defaults:{name:"full"},requirements:{name:"[^\\/]*"},hosttokens:[]},topmall_catalognew_catalog_author_lastname:{tokens:[["text","/"],["variable","/",".*","lastname"],["variable","/","[^\\/]*","name"],["text","/a"]],defaults:{lastname:null,name:"full"},requirements:{name:"[^\\/]*",lastname:".*"},hosttokens:[]},topmall_catalognew_catalog_trackbuy:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/track/buy"]],defaults:[],requirements:[],hosttokens:[]},topmall_catalognew_catalog_productdata:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/catalog-product-data"]],defaults:[],requirements:[],hosttokens:[]},topmall_catalognew_catalog_sizetable:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/size-table"]],defaults:[],requirements:[],hosttokens:[]},topmall_catalognew_catalog_productsize:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/catalog-product-size"]],defaults:[],requirements:[],hosttokens:[]},topmall_frontendnew_homepage_navblock:{tokens:[["text","/"],["variable","/","[^/]++","category"],["variable","/","[^/]++","type"],["text","/homepage/nav"]],defaults:[],requirements:[],hosttokens:[]},topmall_checkout_checkout_blikconfirm:{tokens:[["text","/checkout/blik/confirm/"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_checkout_checkout_blikcreate:{tokens:[["text","/checkout/blik/create/"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_checkout_checkout_index:{tokens:[["text","/checkout/"]],defaults:[],requirements:{_method:"GET|POST"},hosttokens:[]},TopMallFrontendBundle_remembered_widget:{tokens:[["text","/ajax/remembered/widget/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_remembered_list:{tokens:[["text","/ajax/remembered/list/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_remembered_create:{tokens:[["text","/ajax/remembered/create/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_remembered_removeByProductColorId:{tokens:[["text","/ajax/remembered/removeByProductColorId/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_remembered_remove:{tokens:[["text","/ajax/remembered/remove/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_remembered_loadWidget:{tokens:[["text","/ajax/remembered/loadWidget/"]],defaults:[],requirements:[],hosttokens:[]},topmall_cart_cart_index:{tokens:[["text","/cart/"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},topmall_cart_cart_add:{tokens:[["text","/cart/add/"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_cart_cart_updatequantitycart:{tokens:[["text","/cart/update-quantity-cart/"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_cart_cart_removeandfetchcart:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/cart/catalog-remove"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},topmall_cart_vaucher_addcheckout:{tokens:[["text","/vaucher/checkout/"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},topmall_productpage_new_loaddeliverytab:{tokens:[["text","/ajax/loadDeliveryTab/"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},TopMallFrontendBundle_product_getSizeTable:{tokens:[["text","/ajax/product/getSizeTable/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_product_hasSizeTable:{tokens:[["text","/ajax/product/hasSizeTable/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_ajax_order_details:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/profile/order/details"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},TopMallFrontendBundle_ajax_get_products:{tokens:[["text","/"],["variable","/","[^/]++","category"],["variable","/","[^/]++","page"],["text","/profile/order/products"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},omnia_omnia_ty:{tokens:[["text","/"],["variable","/","[^/]++","hash"],["text","/hash"],["variable","/","[^/]++","id"],["text","/profile/omnia/invoice/id"]],defaults:[],requirements:{_method:"GET"},hosttokens:[]},TopMallFrontendBundle_ajax_address_update_default:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/profile/address/update_default"]],defaults:[],requirements:{_method:"POST"},hosttokens:[]},TopMallFrontendBundle_ajax_address_delete:{tokens:[["text","/"],["variable","/","[^/]++","id"],["text","/profile/address/delete"]],defaults:[],requirements:{_method:"GET|POST"},hosttokens:[]},TopMallFrontendBundle_profile_loadVerifyForm:{tokens:[["text","/ajax/profile/loadVerifyForm/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontendBundle_auth_createTemporaryUser:{tokens:[["text","/ajax/auth/createTemporaryUser/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontentBundle_comment_loadReviewList:{tokens:[["text","/ajax/comment/loadReviewList/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontentBundle_comment_loadChildrenCommentList:{tokens:[["text","/ajax/comment/loadChildrenCommentList/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontentBundle_comment_loadCommentForm:{tokens:[["text","/ajax/comment/loadCommentForm/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontentBundle_comment_loadReviewForm:{tokens:[["text","/ajax/comment/loadReviewForm/"]],defaults:[],requirements:[],hosttokens:[]},TopMallFrontentBundle_comment_addFeedback:{tokens:[["text","/ajax/comment/addFeedback/"]],defaults:[],requirements:[],hosttokens:[]}},prefix:"",host:"localhost",scheme:"http"});
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(f){var a=/\+/g;function d(i){return b.raw?i:encodeURIComponent(i)}function g(i){return b.raw?i:decodeURIComponent(i)}function h(i){return d(b.json?JSON.stringify(i):String(i))}function c(i){if(i.indexOf('"')===0){i=i.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{i=decodeURIComponent(i.replace(a," "));return b.json?JSON.parse(i):i}catch(j){}}function e(j,i){var k=b.raw?j:c(j);return f.isFunction(i)?i(k):k}var b=f.cookie=function(q,p,v){if(p!==undefined&&!f.isFunction(p)){v=f.extend({},b.defaults,v);if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setTime(+u+r*86400000)}return(document.cookie=[d(q),"=",h(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var w=q?undefined:{};var s=document.cookie?document.cookie.split("; "):[];for(var o=0,m=s.length;o<m;o++){var n=s[o].split("=");var j=g(n.shift());var k=n.join("=");if(q&&q===j){w=e(k,p);break}if(!q&&(k=e(k))!==undefined){w[j]=k}}return w};b.defaults={};f.removeCookie=function(j,i){if(f.cookie(j)===undefined){return false}f.cookie(j,"",f.extend({},i,{expires:-1}));return !f.cookie(j)}}));
/*! noUiSlider - 7.0.9 - 2014-10-08 16:49:45 */
!function(){function x(b){return b.split("").reverse().join("")}function w(d,c){return d.substring(0,c.length)===c}function v(d,c){return d.slice(-1*c.length)===c}function u(e,d,f){if((e[d]||e[f])&&e[d]===e[f]){throw new Error(d)}}function t(b){return"number"==typeof b&&isFinite(b)}function s(e,d){var f=Math.pow(10,d);return(Math.round(e*f)/f).toFixed(d)}function r(M,L,K,J,I,H,G,F,E,D,C,B){var A,z,y,f=B,e="",a="";return H&&(B=H(B)),t(B)?(M&&0===parseFloat(B.toFixed(M))&&(B=0),0>B&&(A=!0,B=Math.abs(B)),M!==!1&&(B=s(B,M)),B=B.toString(),-1!==B.indexOf(".")?(z=B.split("."),y=z[0],K&&(e=K+z[1])):y=B,L&&(y=x(y).match(/.{1,3}/g),y=x(y.join(x(L)))),A&&F&&(a+=F),J&&(a+=J),A&&E&&(a+=E),a+=y,a+=e,I&&(a+=I),D&&(a=D(a,f)),a):!1}function q(I,H,G,F,E,D,C,B,A,z,y,e){var c,b="";return y&&(e=y(e)),e&&"string"==typeof e?(B&&w(e,B)&&(e=e.replace(B,""),c=!0),F&&w(e,F)&&(e=e.replace(F,"")),A&&w(e,A)&&(e=e.replace(A,""),c=!0),E&&v(e,E)&&(e=e.slice(0,-1*E.length)),H&&(e=e.split(H).join("")),G&&(e=e.replace(G,".")),c&&(b+="-"),b+=e,b=b.replace(/[^0-9\.\-.]/g,""),""===b?!1:(b=Number(b),C&&(b=C(b)),t(b)?b:!1)):!1}function p(g){var d,j,i,h={};for(d=0;d<m.length;d+=1){if(j=m[d],i=g[j],void 0===i){h[j]="negative"!==j||h.negativeBefore?"mark"===j&&"."!==h.thousand?".":!1:"-"}else{if("decimals"===j){if(!(i>=0&&8>i)){throw new Error(j)}h[j]=i}else{if("encoder"===j||"decoder"===j||"edit"===j||"undo"===j){if("function"!=typeof i){throw new Error(j)}h[j]=i}else{if("string"!=typeof i){throw new Error(j)}h[j]=i}}}}return u(h,"mark","thousand"),u(h,"prefix","negative"),u(h,"prefix","negativeBefore"),h}function o(g,f,j){var i,h=[];for(i=0;i<m.length;i+=1){h.push(g[m[i]])}return h.push(j),f.apply("",h)}function n(b){return this instanceof n?void ("object"==typeof b&&(b=p(b),this.to=function(a){return o(b,r,a)},this.from=function(a){return o(b,q,a)})):new n(b)}var m=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=n}(),function(v){function u(a){return a instanceof v||v.zepto&&v.zepto.isZ(a)}function t(a,d){return"string"==typeof a&&0===a.indexOf("-inline-")?(this.method=d||"html",this.target=this.el=v(a.replace("-inline-","")||"<div/>"),!0):void 0}function s(a){if("string"==typeof a&&0!==a.indexOf("-")){this.method="val";var d=document.createElement("input");return d.name=a,d.type="hidden",this.target=this.el=v(d),!0}}function r(b){return"function"==typeof b?(this.target=!1,this.method=b,!0):void 0}function q(b,d){return u(b)&&!d?(b.is("input, select, textarea")?(this.method="val",this.target=b.on("change.liblink",this.changeHandler)):(this.target=b,this.method="html"),!0):void 0}function p(b,d){return u(b)&&("function"==typeof d||"string"==typeof d&&b[d])?(this.method=d,this.target=b,!0):void 0}function o(a,j,i){var h=this,g=!1;if(this.changeHandler=function(d){var e=h.formatInstance.from(v(this).val());return e===!1||isNaN(e)?(v(this).val(h.lastSetValue),!1):void h.changeHandlerMethod.call("",d,e)},this.el=!1,this.formatInstance=i,v.each(l,function(b,c){return g=c.call(h,a,j),!g}),!g){throw new RangeError("(Link) Invalid Link.")}}function n(b){this.items=[],this.elements=[],this.origin=b}function m(a,j,i,h){0===a&&(a=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[a]||(this.linkAPI[a]=new n(this));var g=new o(j,i,h||this.LinkDefaultFormatter);g.target||(g.target=v(this)),g.changeHandlerMethod=this.LinkConfirm(a,g.el),this.linkAPI[a].push(g,g.el),this.LinkUpdate(a)}var l=[t,s,r,q,p];o.prototype.set=function(e){var d=Array.prototype.slice.call(arguments),f=d.slice(1);this.lastSetValue=this.formatInstance.to(e),f.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,f)},n.prototype.push=function(d,c){this.items.push(d),c&&this.elements.push(c)},n.prototype.reconfirm=function(d){var c;for(c=0;c<this.elements.length;c+=1){this.origin.LinkConfirm(d,this.elements[c])}},n.prototype.remove=function(){var b;for(b=0;b<this.items.length;b+=1){this.items[b].target.off(".liblink")}for(b=0;b<this.elements.length;b+=1){this.elements[b].remove()}},n.prototype.change=function(e){if(this.origin.LinkIsEmitting){return !1}this.origin.LinkIsEmitting=!0;var d,f=Array.prototype.slice.call(arguments,1);for(f.unshift(e),d=0;d<this.items.length;d+=1){this.items[d].set.apply(this.items[d],f)}this.origin.LinkIsEmitting=!1},v.fn.Link=function(a){var d=this;if(a===!1){return d.each(function(){this.linkAPI&&(v.map(this.linkAPI,function(b){b.remove()}),delete this.linkAPI)})}if(void 0===a){a=0}else{if("string"!=typeof a){throw new Error("Flag must be string.")}}return{to:function(b,f,c){return d.each(function(){m.call(this,a,b,f,c)})}}}}(window.jQuery||window.Zepto),function(aY){function aX(a){return aY.grep(a,function(e,b){return b===aY.inArray(e,a)})}function aW(d,c){return Math.round(d/c)*c}function aV(b){return"number"==typeof b&&!isNaN(b)&&isFinite(b)}function aU(d){var c=Math.pow(10,7);return Number((Math.round(d*c)/c).toFixed(7))}function aT(e,d,f){e.addClass(d),setTimeout(function(){e.removeClass(d)},f)}function aS(b){return Math.max(Math.min(b,100),0)}function aR(a){return aY.isArray(a)?a:[a]}function aQ(d,c){return 100/(c-d)}function aP(d,c){return 100*c/(d[1]-d[0])}function aO(d,c){return aP(d,d[0]<0?c+Math.abs(d[0]):c-d[0])}function aN(d,c){return c*(d[1]-d[0])/100+d[0]}function aM(e,d){for(var f=1;e>=d[f];){f+=1}return f}function aL(j,i,p){if(p>=j.slice(-1)[0]){return 100}var o,n,m,l,k=aM(p,j);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],m+aO([o,n],p)/aQ(m,l)}function aK(j,i,p){if(p>=100){return j.slice(-1)[0]}var o,n,m,l,k=aM(p,i);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],aN([o,n],(p-m)*aQ(m,l))}function aJ(i,c,n,m){if(100===m){return m}var l,k,j=aM(m,i);return n?(l=i[j-1],k=i[j],m-l>(k-l)/2?k:l):c[j-1]?i[j-1]+aW(m-i[j-1],c[j-1]):m}function aI(f,d,h){var g;if("number"==typeof d&&(d=[d]),"[object Array]"!==Object.prototype.toString.call(d)){throw new Error("noUiSlider: 'range' contains invalid value.")}if(g="min"===f?0:"max"===f?100:parseFloat(f),!aV(g)||!aV(d[0])){throw new Error("noUiSlider: 'range' value isn't numeric.")}h.xPct.push(g),h.xVal.push(d[0]),g?h.xSteps.push(isNaN(d[1])?!1:d[1]):isNaN(d[1])||(h.xSteps[0]=d[1])}function aH(e,d,f){return d?void (f.xSteps[e]=aP([f.xVal[e],f.xVal[e+1]],d)/aQ(f.xPct[e],f.xPct[e+1])):!0}function aG(h,g,l,k){this.xPct=[],this.xVal=[],this.xSteps=[k||!1],this.xNumSteps=[!1],this.snap=g,this.direction=l;var j,i=this;for(j in h){h.hasOwnProperty(j)&&aI(j,h[j],i)}i.xNumSteps=i.xSteps.slice(0);for(j in i.xNumSteps){i.xNumSteps.hasOwnProperty(j)&&aH(Number(j),i.xNumSteps[j],i)}}function aF(d,c){if(!aV(c)){throw new Error("noUiSlider: 'step' is not numeric.")}d.singleStep=c}function aE(a,d){if("object"!=typeof d||aY.isArray(d)){throw new Error("noUiSlider: 'range' is not an object.")}if(void 0===d.min||void 0===d.max){throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.")}a.spectrum=new aG(d,a.snap,a.dir,a.singleStep)}function aD(a,d){if(d=aR(d),!aY.isArray(d)||!d.length||d.length>2){throw new Error("noUiSlider: 'start' option is incorrect.")}a.handles=d.length,a.start=d}function aC(d,c){if(d.snap=c,"boolean"!=typeof c){throw new Error("noUiSlider: 'snap' option must be a boolean.")}}function aB(d,c){if(d.animate=c,"boolean"!=typeof c){throw new Error("noUiSlider: 'animate' option must be a boolean.")}}function aA(d,c){if("lower"===c&&1===d.handles){d.connect=1}else{if("upper"===c&&1===d.handles){d.connect=2}else{if(c===!0&&2===d.handles){d.connect=3}else{if(c!==!1){throw new Error("noUiSlider: 'connect' option doesn't match handle count.")}d.connect=0}}}}function az(d,c){switch(c){case"horizontal":d.ort=0;break;case"vertical":d.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function ay(d,c){if(!aV(c)){throw new Error("noUiSlider: 'margin' option must be numeric.")}if(d.margin=d.spectrum.getMargin(c),!d.margin){throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}}function ax(d,c){if(!aV(c)){throw new Error("noUiSlider: 'limit' option must be numeric.")}if(d.limit=d.spectrum.getMargin(c),!d.limit){throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}}function aw(d,c){switch(c){case"ltr":d.dir=0;break;case"rtl":d.dir=1,d.connect=[0,2,1,3][d.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function av(h,g){if("string"!=typeof g){throw new Error("noUiSlider: 'behaviour' must be a string containing options.")}var l=g.indexOf("tap")>=0,k=g.indexOf("drag")>=0,j=g.indexOf("fixed")>=0,i=g.indexOf("snap")>=0;h.events={tap:l||i,drag:k,fixed:j,snap:i}}function au(d,c){if(d.format=c,"function"==typeof c.to&&"function"==typeof c.from){return !0}throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function at(a){var f,e={margin:0,limit:0,animate:!0,format:Z};return f={step:{r:!1,t:aF},start:{r:!0,t:aD},connect:{r:!0,t:aA},direction:{r:!0,t:aw},snap:{r:!1,t:aC},animate:{r:!1,t:aB},range:{r:!0,t:aE},orientation:{r:!1,t:az},margin:{r:!1,t:ay},limit:{r:!1,t:ax},behaviour:{r:!0,t:av},format:{r:!1,t:au}},a=aY.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},a),aY.each(f,function(b,d){if(void 0===a[b]){if(d.r){throw new Error("noUiSlider: '"+b+"' is required.")}return !0}d.t(e,a[b])}),e.style=e.ort?"top":"left",e}function ar(g,f,j){var i=g+f[0],h=g+f[1];return j?(0>i&&(h+=Math.abs(i)),h>100&&(i-=h-100),[aS(i),aS(h)]):[i,h]}function aq(i){i.preventDefault();var h,n,m=0===i.type.indexOf("touch"),l=0===i.type.indexOf("mouse"),k=0===i.type.indexOf("pointer"),j=i;return 0===i.type.indexOf("MSPointer")&&(k=!0),i.originalEvent&&(i=i.originalEvent),m&&(h=i.changedTouches[0].pageX,n=i.changedTouches[0].pageY),(l||k)&&(k||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),h=i.clientX+window.pageXOffset,n=i.clientY+window.pageYOffset),j.points=[h,n],j.cursor=l,j}function ap(a,h){var g=aY("<div><div/></div>").addClass(aa[2]),f=["-lower","-upper"];return a&&f.reverse(),g.children().addClass(aa[3]+" "+aa[3]+f[h]),g}function ao(e,d,f){switch(e){case 1:d.addClass(aa[7]),f[0].addClass(aa[6]);break;case 3:f[1].addClass(aa[6]);case 2:f[0].addClass(aa[7]);case 0:d.addClass(aa[6])}}function an(g,f,j){var i,h=[];for(i=0;g>i;i+=1){h.push(ap(f,i).appendTo(j))}return h}function am(a,f,e){return e.addClass([aa[0],aa[8+a],aa[4+f]].join(" ")),aY("<div/>").appendTo(e).addClass(aa[1])}function al(a7,a6,a5){function a4(){return T[["width","height"][a6.ort]]()}function a3(e){var d,i=[P.val()];for(d=0;d<e.length;d+=1){P.trigger(e[d],i)}}function a2(b){return 1===b.length?b[0]:a6.dir?b.reverse():b}function a1(b){return function(d,e){P.val([b?null:e,b?e:null],!0)}}function a0(d){var e=aY.inArray(d,a);P[0].linkAPI&&P[0].linkAPI[d]&&P[0].linkAPI[d].change(h[e],R[e].children(),P)}function aZ(c,j){var i=aY.inArray(c,a);return j&&j.appendTo(R[i].children()),a6.dir&&a6.handles>1&&(i=1===i?0:1),a1(i)}function Y(){var d,c;for(d=0;d<a.length;d+=1){this.linkAPI&&this.linkAPI[c=a[d]]&&this.linkAPI[c].reconfirm(c)}}function X(i,c,k,j){return i=i.replace(/\s/g,ac+" ")+ac,c.on(i,function(b){return P.attr("disabled")?!1:P.hasClass(aa[14])?!1:(b=aq(b),b.calcPoint=b.points[a6.ort],void k(b,j))})}function W(i,e){var n,m=e.handles||R,l=!1,k=100*(i.calcPoint-e.start)/a4(),j=m[0][0]!==R[0][0]?1:0;n=ar(k,e.positions,m.length>1),l=L(m[0],n[j],1===m.length),m.length>1&&(l=L(m[1],n[j?0:1],!1)||l),l&&a3(["slide"])}function U(c){aY("."+aa[15]).removeClass(aa[15]),c.cursor&&aY("body").css("cursor","").off(ac),ae.off(ac),P.removeClass(aa[12]),a3(["set","change"])}function S(d,e){1===e.handles.length&&e.handles[0].children().addClass(aa[15]),d.stopPropagation(),X(ab.move,ae,W,{start:d.calcPoint,handles:e.handles,positions:[N[0],N[R.length-1]]}),X(ab.end,ae,U,null),d.cursor&&(aY("body").css("cursor",aY(d.target).css("cursor")),R.length>1&&P.addClass(aa[12]),aY("body").on("selectstart"+ac,!1))}function Q(c){var j,i=c.calcPoint,e=0;c.stopPropagation(),aY.each(R,function(){e+=this.offset()[a6.style]}),e=e/2>i||1===R.length?0:1,i-=T.offset()[a6.style],j=100*i/a4(),a6.events.snap||aT(P,aa[14],300),L(R[e],j),a3(["slide","set","change"]),a6.events.snap&&S(c,{handles:[R[e]]})}function O(e){var d,i;if(!e.fixed){for(d=0;d<R.length;d+=1){X(ab.start,R[d].children(),S,{handles:[R[d]]})}}e.tap&&X(ab.start,T,Q,{handles:R}),e.drag&&(i=T.find("."+aa[7]).addClass(aa[10]),e.fixed&&(i=i.add(T.children().not(i).children())),X(ab.start,i,S,{handles:R}))}function L(k,c,q){var p=k[0]!==R[0][0]?1:0,o=N[0]+a6.margin,n=N[1]-a6.margin,m=N[0]+a6.limit,l=N[1]-a6.limit;return R.length>1&&(c=p?Math.max(c,o):Math.min(c,n)),q!==!1&&a6.limit&&R.length>1&&(c=p?Math.min(c,m):Math.max(c,l)),c=K.getStep(c),c=aS(parseFloat(c.toFixed(7))),c===N[p]?!1:(k.css(a6.style,c+"%"),k.is(":first-child")&&k.toggleClass(aa[17],c>50),N[p]=c,h[p]=K.fromStepping(c),a0(a[p]),!0)}function J(i,c){var l,k,j;for(a6.limit&&(i+=1),l=0;i>l;l+=1){k=l%2,j=c[k],null!==j&&j!==!1&&("number"==typeof j&&(j=String(j)),j=a6.format.from(j),(j===!1||isNaN(j)||L(R[k],K.toStepping(j),l===3-a6.dir)===!1)&&a0(a[k]))}}function H(e){if(P[0].LinkIsEmitting){return this}var c,i=aR(e);return a6.dir&&a6.handles>1&&i.reverse(),a6.animate&&-1!==N[0]&&aT(P,aa[14],300),c=R.length>1?3:1,1===i.length&&(c=1),J(c,i),a3(["set"]),this}function G(){var d,c=[];for(d=0;d<a6.handles;d+=1){c[d]=a6.format.to(h[d])}return a2(c)}function g(){return aY(this).off(ac).removeClass(aa.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,a5}function f(){var c=aY.map(N,function(j,i){var n=K.getApplicableStep(j),m=h[i],l=n[2],k=m-n[2]>=n[1]?n[2]:n[0];return[[k,l]]});return a2(c)}function V(){return a5}var T,R,P=aY(a7),N=[-1,-1],K=a6.spectrum,h=[],a=["lower","upper"].slice(0,a6.handles);if(a6.dir&&a.reverse(),a7.LinkUpdate=a0,a7.LinkConfirm=aZ,a7.LinkDefaultFormatter=a6.format,a7.LinkDefaultFlag="lower",a7.reappend=Y,P.hasClass(aa[0])){throw new Error("Slider was already initialized.")}T=am(a6.dir,a6.ort,P),R=an(a6.handles,a6.dir,T),ao(a6.connect,P,R),O(a6.events),a7.vSet=H,a7.vGet=G,a7.destroy=g,a7.getCurrentStep=f,a7.getOriginalOptions=V,a7.getInfo=function(){return[K,a6.style,a6.ort]},P.val(a6.start)}function ak(d){if(!this.length){throw new Error("noUiSlider: Can't initialize slider on empty selection.")}var c=at(d,this);return this.each(function(){al(this,c,d)})}function aj(a){return this.each(function(){if(!this.destroy){return void aY(this).noUiSlider(a)}var g=aY(this).val(),f=this.destroy(),b=aY.extend({},f,a);aY(this).noUiSlider(b),this.reappend(),f.start===b.start&&aY(this).val(g)})}function ai(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function ah(a,n,m,l){if("range"===n||"steps"===n){return a.xVal}if("count"===n){var k,j=100/(m-1),i=0;for(m=[];(k=i++*j)<=100;){m.push(k)}n="positions"}return"positions"===n?aY.map(m,function(b){return a.fromStepping(l?a.getStep(b):b)}):"values"===n?l?aY.map(m,function(b){return a.fromStepping(a.getStep(a.toStepping(b)))}):m:void 0}function ag(v,u,t,s){var r=v.direction,q={},p=v.xVal[0],o=v.xVal[v.xVal.length-1],n=!1,b=!1,a=0;return v.direction=0,s=aX(s.slice().sort(function(d,c){return d-c})),s[0]!==p&&(s.unshift(p),n=!0),s[s.length-1]!==o&&(s.push(o),b=!0),aY.each(s,function(w){var m,l,k,h,f,e,d,c,A,z,y=s[w],x=s[w+1];if("steps"===t&&(m=v.xNumSteps[w]),m||(m=x-y),y!==!1&&void 0!==x){for(l=y;x>=l;l+=m){for(h=v.toStepping(l),f=h-a,c=f/u,A=Math.round(c),z=f/A,k=1;A>=k;k+=1){e=a+k*z,q[e.toFixed(5)]=["x",0]}d=aY.inArray(l,s)>-1?1:"steps"===t?2:0,!w&&n&&(d=0),l===x&&b||(q[h.toFixed(5)]=[l,d]),a=h}}}),v.direction=r,q}function af(v,u,t,s,r,q){function p(d,c){return["-normal","-large","-sub"][d&&r?r(c,d):d]}function o(b,f,e){return'class="'+f+" "+f+"-"+m+" "+f+p(e[1],e[0])+'" style="'+v+": "+b+'%"'}function n(d,c){t&&(d=100-d),a.append("<div "+o(d,"noUi-marker",c)+"></div>"),c[1]&&a.append("<div "+o(d,"noUi-value",c)+">"+q.to(c[0])+"</div>")}var m=["horizontal","vertical"][u],a=aY("<div/>");return a.addClass("noUi-pips noUi-pips-"+m),aY.each(s,n),a}var ae=aY(document),ad=aY.fn.val,ac=".nui",ab=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},aa=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];aG.prototype.getMargin=function(b){return 2===this.xPct.length?aP(this.xVal,b):!1},aG.prototype.toStepping=function(b){return b=aL(this.xVal,this.xPct,b),this.direction&&(b=100-b),b},aG.prototype.fromStepping=function(b){return this.direction&&(b=100-b),aU(aK(this.xVal,this.xPct,b))},aG.prototype.getStep=function(b){return this.direction&&(b=100-b),b=aJ(this.xPct,this.xSteps,this.snap,b),this.direction&&(b=100-b),b},aG.prototype.getApplicableStep=function(e){var d=aM(e,this.xPct),f=100===e?2:1;return[this.xNumSteps[d-2],this.xVal[d-f],this.xNumSteps[d-f]]},aG.prototype.convert=function(b){return this.getStep(this.toStepping(b))};var Z={to:function(b){return b.toFixed(2)},from:Number};aY.fn.val=function(a){function h(b){return b.hasClass(aa[0])?ai:ad}if(void 0===a){var g=aY(this[0]);return h(g).call(g)}var f=aY.isFunction(a);return this.each(function(e){var c=a,b=aY(this);f&&(c=a.call(this,e,b.val())),h(b).call(b,c)})},aY.fn.noUiSlider=function(d,c){switch(d){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(c?aj:ak).call(this,d)},aY.fn.noUiSlider_pips=function(a){var n=a.mode,m=a.density||1,l=a.filter||!1,k=a.values||!1,j=a.format||{to:Math.round},i=a.stepped||!1;return this.each(function(){var c=this.getInfo(),e=ah(c[0],n,k,i),d=ag(c[0],m,n,e);return aY(this).append(af(c[1],c[2],c[0].direction,d,l,j))})}}(window.jQuery||window.Zepto);
(function(i,l,n,g){var j,b,k;j={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null};b={isTouch:false,isScrolling:false,isSwiping:false,direction:false,inMotion:false};k={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null};function c(q,e){this.settings=null;this.options=i.extend({},c.Defaults,e);this.$element=i(q);this.drag=i.extend({},j);this.state=i.extend({},b);this.e=i.extend({},k);this._plugins={};this._supress={};this._current=null;this._speed=null;this._coordinates=[];this._breakpoint=null;this._width=null;this._items=[];this._clones=[];this._mergers=[];this._invalidated={};this._pipe=[];i.each(c.Plugins,i.proxy(function(r,s){this._plugins[r[0].toLowerCase()+r.slice(1)]=new s(this)},this));i.each(c.Pipe,i.proxy(function(r,s){this._pipe.push({filter:s.filter,run:i.proxy(s.run,this)})},this));this.setup();this.initialize()}c.Defaults={items:3,loop:false,center:false,mouseDrag:true,touchDrag:true,pullDrag:true,freeDrag:false,margin:0,stagePadding:0,merge:false,mergeFit:true,autoWidth:false,startPosition:0,rtl:false,smartSpeed:250,fluidSpeed:false,dragEndSpeed:false,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:l,responsiveClass:false,fallbackEasing:"swing",info:false,nestedItemSelector:false,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"};c.Width={Default:"default",Inner:"inner",Outer:"outer"};c.Plugins={};c.Pipe=[{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var e=this._clones,q=this.$stage.children(".cloned");if(q.length!==e.length||(!this.settings.loop&&e.length>0)){this.$stage.children(".cloned").remove();this._clones=[]}}},{filter:["items","settings"],run:function(){var q,t,r=this._clones,e=this._items,s=this.settings.loop?r.length-Math.max(this.settings.items*2,4):0;for(q=0,t=Math.abs(s/2);q<t;q++){if(s>0){this.$stage.children().eq(e.length+r.length-1).remove();r.pop();this.$stage.children().eq(0).remove();r.pop()}else{r.push(r.length/2);this.$stage.append(e[r[r.length-1]].clone().addClass("cloned"));r.push(e.length-1-(r.length-1)/2);this.$stage.prepend(e[r[r.length-1]].clone().addClass("cloned"))}}}},{filter:["width","items","settings"],run:function(){var r=(this.settings.rtl?1:-1),q=(this.width()/this.settings.items).toFixed(3),u=0,t,e,s;this._coordinates=[];for(e=0,s=this._clones.length+this._items.length;e<s;e++){t=this._mergers[this.relative(e)];t=(this.settings.mergeFit&&Math.min(t,this.settings.items))||t;u+=(this.settings.autoWidth?this._items[this.relative(e)].width()+this.settings.margin:q*t)*r;this._coordinates.push(u)}}},{filter:["width","items","settings"],run:function(){var q,s,r=(this.width()/this.settings.items).toFixed(3),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+this.settings.stagePadding*2,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};this.$stage.css(e);e={width:this.settings.autoWidth?"auto":r-this.settings.margin};e[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin;if(!this.settings.autoWidth&&i.grep(this._mergers,function(t){return t>1}).length>0){for(q=0,s=this._coordinates.length;q<s;q++){e.width=Math.abs(this._coordinates[q])-Math.abs(this._coordinates[q-1]||0)-this.settings.margin;this.$stage.children().eq(q).css(e)}}else{this.$stage.children().css(e)}}},{filter:["width","items","settings"],run:function(e){e.current&&this.reset(this.$stage.children().index(e.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var u=this.settings.rtl?1:-1,v=this.settings.stagePadding*2,q=this.coordinates(this.current())+v,r=q+this.width()*u,x,w,t=[],s,e;for(s=0,e=this._coordinates.length;s<e;s++){x=this._coordinates[s-1]||0;w=Math.abs(this._coordinates[s])+v*u;if((this.op(x,"<=",q)&&(this.op(x,">",r)))||(this.op(w,"<",q)&&this.op(w,">",r))){t.push(s)}}this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass);this.$stage.children(":eq("+t.join("), :eq(")+")").addClass(this.settings.activeClass);if(this.settings.center){this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass);this.$stage.children().eq(this.current()).addClass(this.settings.centerClass)}}}];c.prototype.initialize=function(){this.trigger("initialize");this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl);this.browserSupport();if(this.settings.autoWidth&&this.state.imagesLoaded!==true){var r,q,e;r=this.$element.find("img");q=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:g;e=this.$element.children(q).width();if(r.length&&e<=0){this.preloadAutoWidthImages(r);return false}}this.$element.addClass("owl-loading");this.$stage=i("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">');this.$element.append(this.$stage.parent());this.replace(this.$element.children().not(this.$stage.parent()));this._width=this.$element.width();this.refresh();this.$element.removeClass("owl-loading").addClass("owl-loaded");this.eventsCall();this.internalEvents();this.addTriggerableEvents();this.trigger("initialized")};c.prototype.setup=function(){var e=this.viewport(),r=this.options.responsive,q=-1,s=null;if(!r){s=i.extend({},this.options)}else{i.each(r,function(t){if(t<=e&&t>q){q=Number(t)}});s=i.extend({},this.options,r[q]);delete s.responsive;if(s.responsiveClass){this.$element.attr("class",function(t,u){return u.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+q)}}if(this.settings===null||this._breakpoint!==q){this.trigger("change",{property:{name:"settings",value:s}});this._breakpoint=q;this.settings=s;this.invalidate("settings");this.trigger("changed",{property:{name:"settings",value:this.settings}})}if(this._items.length>0&&this.settings.items<this._items.length){this.settings.loop=true}};c.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center);if(this.settings.loop&&this._items.length<this.settings.items){this.settings.loop=false}if(this.settings.autoWidth){this.settings.stagePadding=false;this.settings.merge=false}};c.prototype.prepare=function(q){var e=this.trigger("prepare",{content:q});if(!e.data){e.data=i("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(q)}this.trigger("prepared",{content:e.data});return e.data};c.prototype.update=function(){var q=0,s=this._pipe.length,r=i.proxy(function(t){return this[t]},this._invalidated),e={};while(q<s){if(this._invalidated.all||i.grep(this._pipe[q].filter,r).length>0){this._pipe[q].run(e)}q++}this._invalidated={}};c.prototype.width=function(e){e=e||c.Width.Default;switch(e){case c.Width.Inner:case c.Width.Outer:return this._width;default:return this._width-this.settings.stagePadding*2+this.settings.margin}};c.prototype.refresh=function(){if(this._items.length===0){return false}var e=new Date().getTime();this.trigger("refresh");this.setup();this.optionsLogic();this.$stage.addClass("owl-refresh");this.update();this.$stage.removeClass("owl-refresh");this.state.orientation=l.orientation;this.watchVisibility();this.trigger("refreshed")};c.prototype.eventsCall=function(){this.e._onDragStart=i.proxy(function(q){this.onDragStart(q)},this);this.e._onDragMove=i.proxy(function(q){this.onDragMove(q)},this);this.e._onDragEnd=i.proxy(function(q){this.onDragEnd(q)},this);this.e._onResize=i.proxy(function(q){this.onResize(q)},this);this.e._transitionEnd=i.proxy(function(q){this.transitionEnd(q)},this);this.e._preventClick=i.proxy(function(q){this.preventClick(q)},this)};c.prototype.onThrottledResize=function(){l.clearTimeout(this.resizeTimer);this.resizeTimer=l.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)};c.prototype.onResize=function(){if(!this._items.length){return false}if(this._width===this.$element.width()){return false}if(this.trigger("resize").isDefaultPrevented()){return false}this._width=this.$element.width();this.invalidate("width");this.refresh();this.trigger("resized")};c.prototype.eventsRouter=function(q){var e=q.type;if(e==="mousedown"||e==="touchstart"){this.onDragStart(q)}else{if(e==="mousemove"||e==="touchmove"){this.onDragMove(q)}else{if(e==="mouseup"||e==="touchend"){this.onDragEnd(q)}else{if(e==="touchcancel"){this.onDragEnd(q)}}}}};c.prototype.internalEvents=function(){var e=m(),q=p();if(this.settings.mouseDrag){this.$stage.on("mousedown",i.proxy(function(r){this.eventsRouter(r)},this));this.$stage.on("dragstart",function(){return false});this.$stage.get(0).onselectstart=function(){return false}}else{this.$element.addClass("owl-text-select-on")}if(this.settings.touchDrag&&!q){this.$stage.on("touchstart touchcancel",i.proxy(function(r){this.eventsRouter(r)},this))}if(this.transitionEndVendor){this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,false)}if(this.settings.responsive!==false){this.on(l,"resize",i.proxy(this.onThrottledResize,this))}};c.prototype.onDragStart=function(t){var s,u,r,q,e;s=t.originalEvent||t||l.event;if(s.which===3||this.state.isTouch){return false}if(s.type==="mousedown"){this.$stage.addClass("owl-grab")}this.trigger("drag");this.drag.startTime=new Date().getTime();this.speed(0);this.state.isTouch=true;this.state.isScrolling=false;this.state.isSwiping=false;this.drag.distance=0;r=d(s).x;q=d(s).y;this.drag.offsetX=this.$stage.position().left;this.drag.offsetY=this.$stage.position().top;if(this.settings.rtl){this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin}if(this.state.inMotion&&this.support3d){e=this.getTransformProperty();this.drag.offsetX=e;this.animate(e);this.state.inMotion=true}else{if(this.state.inMotion&&!this.support3d){this.state.inMotion=false;return false}}this.drag.startX=r-this.drag.offsetX;this.drag.startY=q-this.drag.offsetY;this.drag.start=r-this.drag.startX;this.drag.targetEl=s.target||s.srcElement;this.drag.updatedX=this.drag.start;if(this.drag.targetEl.tagName==="IMG"||this.drag.targetEl.tagName==="A"){this.drag.targetEl.draggable=false}i(n).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",i.proxy(function(v){this.eventsRouter(v)},this))};c.prototype.onDragMove=function(s){var r,w,q,e,u,v,t;if(!this.state.isTouch){return}if(this.state.isScrolling){return}r=s.originalEvent||s||l.event;q=d(r).x;e=d(r).y;this.drag.currentX=q-this.drag.startX;this.drag.currentY=e-this.drag.startY;this.drag.distance=this.drag.currentX-this.drag.offsetX;if(this.drag.distance<0){this.state.direction=this.settings.rtl?"right":"left"}else{if(this.drag.distance>0){this.state.direction=this.settings.rtl?"left":"right"}}if(this.settings.loop){if(this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&this.state.direction==="right"){this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)}else{if(this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&this.state.direction==="left"){this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)}}}else{u=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum());v=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum());t=this.settings.pullDrag?this.drag.distance/5:0;this.drag.currentX=Math.max(Math.min(this.drag.currentX,u+t),v+t)}if((this.drag.distance>8||this.drag.distance<-8)){if(r.preventDefault!==g){r.preventDefault()}else{r.returnValue=false}this.state.isSwiping=true}this.drag.updatedX=this.drag.currentX;if((this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===false){this.state.isScrolling=true;this.drag.updatedX=this.drag.start}this.animate(this.drag.updatedX)};c.prototype.onDragEnd=function(s){var q,e,r;if(!this.state.isTouch){return}if(s.type==="mouseup"){this.$stage.removeClass("owl-grab")}this.trigger("dragged");this.drag.targetEl.removeAttribute("draggable");this.state.isTouch=false;this.state.isScrolling=false;this.state.isSwiping=false;if(this.drag.distance===0&&this.state.inMotion!==true){this.state.inMotion=false;return false}this.drag.endTime=new Date().getTime();q=this.drag.endTime-this.drag.startTime;e=Math.abs(this.drag.distance);if(e>3||q>300){this.removeClick(this.drag.targetEl)}r=this.closest(this.drag.updatedX);this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed);this.current(r);this.invalidate("position");this.update();if(!this.settings.pullDrag&&this.drag.updatedX===this.coordinates(r)){this.transitionEnd()}this.drag.distance=0;i(n).off(".owl.dragEvents")};c.prototype.removeClick=function(e){this.drag.targetEl=e;i(e).on("click.preventClick",this.e._preventClick);l.setTimeout(function(){i(e).off("click.preventClick")},300)};c.prototype.preventClick=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(e.stopPropagation){e.stopPropagation()}i(e.target).off("click.preventClick")};c.prototype.getTransformProperty=function(){var e,q;e=l.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform");e=e.replace(/matrix(3d)?\(|\)/g,"").split(",");q=e.length===16;return q!==true?e[4]:e[12]};c.prototype.closest=function(t){var e=-1,r=30,q=this.width(),s=this.coordinates();if(!this.settings.freeDrag){i.each(s,i.proxy(function(u,v){if(t>v-r&&t<v+r){e=u}else{if(this.op(t,"<",v)&&this.op(t,">",s[u+1]||v-q)){e=this.state.direction==="left"?u+1:u}}return e===-1},this))}if(!this.settings.loop){if(this.op(t,">",s[this.minimum()])){e=t=this.minimum()}else{if(this.op(t,"<",s[this.maximum()])){e=t=this.maximum()}}}return e};c.prototype.animate=function(e){this.trigger("translate");this.state.inMotion=this.speed()>0;if(this.support3d){this.$stage.css({transform:"translate3d("+e+"px,0px, 0px)",transition:(this.speed()/1000)+"s"})}else{if(this.state.isTouch){this.$stage.css({left:e+"px"})}else{this.$stage.animate({left:e},this.speed()/1000,this.settings.fallbackEasing,i.proxy(function(){if(this.state.inMotion){this.transitionEnd()}},this))}}};c.prototype.current=function(e){if(e===g){return this._current}if(this._items.length===0){return g}e=this.normalize(e);if(this._current!==e){var q=this.trigger("change",{property:{name:"position",value:e}});if(q.data!==g){e=this.normalize(q.data)}this._current=e;this.invalidate("position");this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current};c.prototype.invalidate=function(e){this._invalidated[e]=true};c.prototype.reset=function(e){e=this.normalize(e);if(e===g){return}this._speed=0;this._current=e;this.suppress(["translate","translated"]);this.animate(this.coordinates(e));this.release(["translate","translated"])};c.prototype.normalize=function(e,q){var r=(q?this._items.length:this._items.length+this._clones.length);if(!i.isNumeric(e)||r<1){return g}if(this._clones.length){e=((e%r)+r)%r}else{e=Math.max(this.minimum(q),Math.min(this.maximum(q),e))}return e};c.prototype.relative=function(e){e=this.normalize(e);e=e-this._clones.length/2;return this.normalize(e,true)};c.prototype.maximum=function(s){var t,r,e=0,u,q=this.settings;if(s){return this._items.length-1}if(!q.loop&&q.center){t=this._items.length-1}else{if(!q.loop&&!q.center){t=this._items.length-q.items}else{if(q.loop||q.center){t=this._items.length+q.items}else{if(q.autoWidth||q.merge){revert=q.rtl?1:-1;r=this.$stage.width()-this.$element.width();while(u=this.coordinates(e)){if(u*revert>=r){break}t=++e}}else{throw"Can not detect maximum absolute position."}}}}return t};c.prototype.minimum=function(e){if(e){return 0}return this._clones.length/2};c.prototype.items=function(e){if(e===g){return this._items.slice()}e=this.normalize(e,true);return this._items[e]};c.prototype.mergers=function(e){if(e===g){return this._mergers.slice()}e=this.normalize(e,true);return this._mergers[e]};c.prototype.clones=function(e){var q=this._clones.length/2,s=q+this._items.length,r=function(t){return t%2===0?s+t/2:q-(t+1)/2};if(e===g){return i.map(this._clones,function(t,u){return r(u)})}return i.map(this._clones,function(t,u){return t===e?r(u):null})};c.prototype.speed=function(e){if(e!==g){this._speed=e}return this._speed};c.prototype.coordinates=function(e){var q=null;if(e===g){return i.map(this._coordinates,i.proxy(function(s,r){return this.coordinates(r)},this))}if(this.settings.center){q=this._coordinates[e];q+=(this.width()-q+(this._coordinates[e-1]||0))/2*(this.settings.rtl?-1:1)}else{q=this._coordinates[e-1]||0}return q};c.prototype.duration=function(r,q,e){return Math.min(Math.max(Math.abs(q-r),1),6)*Math.abs((e||this.settings.smartSpeed))};c.prototype.to=function(e,t){if(this.settings.loop){var w=e-this.relative(this.current()),q=this.current(),s=this.current(),v=this.current()+w,u=s-v<0?true:false,r=this._clones.length+this._items.length;if(v<this.settings.items&&u===false){q=s+this._items.length;this.reset(q)}else{if(v>=r-this.settings.items&&u===true){q=s-this._items.length;this.reset(q)}}l.clearTimeout(this.e._goToLoop);this.e._goToLoop=l.setTimeout(i.proxy(function(){this.speed(this.duration(this.current(),q+w,t));this.current(q+w);this.update()},this),30)}else{this.speed(this.duration(this.current(),e,t));this.current(e);this.update()}};c.prototype.next=function(e){e=e||false;this.to(this.relative(this.current())+1,e)};c.prototype.prev=function(e){e=e||false;this.to(this.relative(this.current())-1,e)};c.prototype.transitionEnd=function(e){if(e!==g){e.stopPropagation();if((e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)){return false}}this.state.inMotion=false;this.trigger("translated")};c.prototype.viewport=function(){var e;if(this.options.responsiveBaseElement!==l){e=i(this.options.responsiveBaseElement).width()}else{if(l.innerWidth){e=l.innerWidth}else{if(n.documentElement&&n.documentElement.clientWidth){e=n.documentElement.clientWidth}else{throw"Can not detect viewport width."}}}return e};c.prototype.replace=function(e){this.$stage.empty();this._items=[];if(e){e=(e instanceof jQuery)?e:i(e)}if(this.settings.nestedItemSelector){e=e.find("."+this.settings.nestedItemSelector)}e.filter(function(){return this.nodeType===1}).each(i.proxy(function(q,r){r=this.prepare(r);this.$stage.append(r);this._items.push(r);this._mergers.push(r.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")*1||1)},this));this.reset(i.isNumeric(this.settings.startPosition)?this.settings.startPosition:0);this.invalidate("items")};c.prototype.add=function(q,e){e=e===g?this._items.length:this.normalize(e,true);this.trigger("add",{content:q,position:e});if(this._items.length===0||e===this._items.length){this.$stage.append(q);this._items.push(q);this._mergers.push(q.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")*1||1)}else{this._items[e].before(q);this._items.splice(e,0,q);this._mergers.splice(e,0,q.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")*1||1)}this.invalidate("items");this.trigger("added",{content:q,position:e})};c.prototype.remove=function(e){e=this.normalize(e,true);if(e===g){return}this.trigger("remove",{content:this._items[e],position:e});this._items[e].remove();this._items.splice(e,1);this._mergers.splice(e,1);this.invalidate("items");this.trigger("removed",{content:null,position:e})};c.prototype.addTriggerableEvents=function(){var e=i.proxy(function(r,q){return i.proxy(function(s){if(s.relatedTarget!==this){this.suppress([q]);r.apply(this,[].slice.call(arguments,1));this.release([q])}},this)},this);i.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},i.proxy(function(q,r){this.$element.on(q+".owl.carousel",e(r,q+".owl.carousel"))},this))};c.prototype.watchVisibility=function(){if(!q(this.$element.get(0))){this.$element.addClass("owl-hidden");l.clearInterval(this.e._checkVisibile);this.e._checkVisibile=l.setInterval(i.proxy(e,this),500)}function q(r){return r.offsetWidth>0&&r.offsetHeight>0}function e(){if(q(this.$element.get(0))){this.$element.removeClass("owl-hidden");this.refresh();l.clearInterval(this.e._checkVisibile)}}};c.prototype.preloadAutoWidthImages=function(t){var q,s,r,e;q=0;s=this;t.each(function(u,v){r=i(v);e=new Image();e.onload=function(){q++;r.attr("src",e.src);r.css("opacity",1);if(q>=t.length){s.state.imagesLoaded=true;s.initialize()}};e.src=r.attr("src")||r.attr("data-src")||r.attr("data-src-retina")})};c.prototype.destroy=function(){if(this.$element.hasClass(this.settings.themeClass)){this.$element.removeClass(this.settings.themeClass)}if(this.settings.responsive!==false){i(l).off("resize.owl.carousel")}if(this.transitionEndVendor){this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd)}for(var e in this._plugins){this._plugins[e].destroy()}if(this.settings.mouseDrag||this.settings.touchDrag){this.$stage.off("mousedown touchstart touchcancel");i(n).off(".owl.dragEvents");this.$stage.get(0).onselectstart=function(){};this.$stage.off("dragstart",function(){return false})}this.$element.off(".owl");this.$stage.children(".cloned").remove();this.e=null;this.$element.removeData("owlCarousel");this.$stage.children().contents().unwrap();this.$stage.children().unwrap();this.$stage.unwrap()};c.prototype.op=function(q,s,e){var r=this.settings.rtl;switch(s){case"<":return r?q>e:q<e;case">":return r?q<e:q>e;case">=":return r?q<=e:q>=e;case"<=":return r?q>=e:q<=e;default:break}};c.prototype.on=function(q,r,s,e){if(q.addEventListener){q.addEventListener(r,s,e)}else{if(q.attachEvent){q.attachEvent("on"+r,s)}}};c.prototype.off=function(q,r,s,e){if(q.removeEventListener){q.removeEventListener(r,s,e)}else{if(q.detachEvent){q.detachEvent("on"+r,s)}}};c.prototype.trigger=function(q,u,s){var e={item:{count:this._items.length,index:this.current()}},r=i.camelCase(i.grep(["on",q,s],function(w){return w}).join("-").toLowerCase()),t=i.Event([q,"owl",s||"carousel"].join(".").toLowerCase(),i.extend({relatedTarget:this},e,u));if(!this._supress[q]){i.each(this._plugins,function(v,w){if(w.onTrigger){w.onTrigger(t)}});this.$element.trigger(t);if(this.settings&&typeof this.settings[r]==="function"){this.settings[r].apply(this,t)}}return t};c.prototype.suppress=function(e){i.each(e,i.proxy(function(q,r){this._supress[r]=true},this))};c.prototype.release=function(e){i.each(e,i.proxy(function(q,r){delete this._supress[r]},this))};c.prototype.browserSupport=function(){this.support3d=o();if(this.support3d){this.transformVendor=f();var e=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=e[h()];this.vendorName=this.transformVendor.replace(/Transform/i,"");this.vendorName=this.vendorName!==""?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=l.orientation};function d(e){if(e.touches!==g){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}if(e.touches===g){if(e.pageX!==g){return{x:e.pageX,y:e.pageY}}if(e.pageX===g){return{x:e.clientX,y:e.clientY}}}}function a(u){var t,q,e=n.createElement("div"),r=u;for(t in r){q=r[t];if(typeof e.style[q]!=="undefined"){e=null;return[q,t]}}return[false]}function h(){return a(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function f(){return a(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function o(){return a(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function m(){return"ontouchstart" in l||!!(navigator.msMaxTouchPoints)}function p(){return l.navigator.msPointerEnabled}i.fn.owlCarousel=function(e){return this.each(function(){if(!i(this).data("owlCarousel")){i(this).data("owlCarousel",new c(this,e))}})};i.fn.owlCarousel.Constructor=c})(window.Zepto||window.jQuery,window,document);(function(d,c,a,e){var b=function(f){this._core=f;this._loaded=[];this._handlers={"initialized.owl.carousel change.owl.carousel":d.proxy(function(m){if(!m.namespace){return}if(!this._core.settings||!this._core.settings.lazyLoad){return}if((m.property&&m.property.name=="position")||m.type=="initialized"){var j=this._core.settings,o=(j.center&&Math.ceil(j.items/2)||j.items),h=((j.center&&o*-1)||0),g=((m.property&&m.property.value)||this._core.current())+h,l=this._core.clones().length,k=d.proxy(function(p,n){this.load(n)},this);while(h++<o){this.load(l/2+this._core.relative(g));l&&d.each(this._core.clones(this._core.relative(g++)),k)}}},this)};this._core.options=d.extend({},b.Defaults,this._core.options);this._core.$element.on(this._handlers)};b.Defaults={lazyLoad:false};b.prototype.load=function(f){var g=this._core.$stage.children().eq(f),h=g&&g.find(".owl-lazy");if(!h||d.inArray(g.get(0),this._loaded)>-1){return}h.each(d.proxy(function(k,l){var i=d(l),m,j=(c.devicePixelRatio>1&&i.attr("data-src-retina"))||i.attr("data-src");this._core.trigger("load",{element:i,url:j},"lazy");if(i.is("img")){i.one("load.owl.lazy",d.proxy(function(){i.css("opacity",1);this._core.trigger("loaded",{element:i,url:j},"lazy")},this)).attr("src",j)}else{m=new Image();m.onload=d.proxy(function(){i.css({"background-image":"url("+j+")",opacity:"1"});this._core.trigger("loaded",{element:i,url:j},"lazy")},this);m.src=j}},this));this._loaded.push(g.get(0))};b.prototype.destroy=function(){var f,g;for(f in this.handlers){this._core.$element.off(f,this.handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};d.fn.owlCarousel.Constructor.Plugins.Lazy=b})(window.Zepto||window.jQuery,window,document);(function(c,b,a,d){var e=function(f){this._core=f;this._handlers={"initialized.owl.carousel":c.proxy(function(){if(this._core.settings.autoHeight){this.update()}},this),"changed.owl.carousel":c.proxy(function(g){if(this._core.settings.autoHeight&&g.property.name=="position"){this.update()}},this),"loaded.owl.lazy":c.proxy(function(g){if(this._core.settings.autoHeight&&g.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())){this.update()}},this)};this._core.options=c.extend({},e.Defaults,this._core.options);this._core.$element.on(this._handlers)};e.Defaults={autoHeight:false,autoHeightClass:"owl-height"};e.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)};e.prototype.destroy=function(){var f,g;for(f in this._handlers){this._core.$element.off(f,this._handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};c.fn.owlCarousel.Constructor.Plugins.AutoHeight=e})(window.Zepto||window.jQuery,window,document);(function(d,c,a,e){var b=function(f){this._core=f;this._videos={};this._playing=null;this._fullscreen=false;this._handlers={"resize.owl.carousel":d.proxy(function(g){if(this._core.settings.video&&!this.isInFullScreen()){g.preventDefault()}},this),"refresh.owl.carousel changed.owl.carousel":d.proxy(function(g){if(this._playing){this.stop()}},this),"prepared.owl.carousel":d.proxy(function(h){var g=d(h.content).find(".owl-video");if(g.length){g.css("display","none");this.fetch(g,d(h.content))}},this)};this._core.options=d.extend({},b.Defaults,this._core.options);this._core.$element.on(this._handlers);this._core.$element.on("click.owl.video",".owl-video-play-icon",d.proxy(function(g){this.play(g)},this))};b.Defaults={video:false,videoHeight:false,videoWidth:false};b.prototype.fetch=function(k,j){var i=k.attr("data-vimeo-id")?"vimeo":"youtube",l=k.attr("data-vimeo-id")||k.attr("data-youtube-id"),h=k.attr("data-width")||this._core.settings.videoWidth,f=k.attr("data-height")||this._core.settings.videoHeight,g=k.attr("href");if(g){l=g.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);if(l[3].indexOf("youtu")>-1){i="youtube"}else{if(l[3].indexOf("vimeo")>-1){i="vimeo"}else{throw new Error("Video URL not supported.")}}l=l[6]}else{throw new Error("Missing video URL.")}this._videos[g]={type:i,id:l,width:h,height:f};j.attr("data-video",g);this.thumbnail(k,this._videos[g])};b.prototype.thumbnail=function(l,h){var g,n,p,f=h.width&&h.height?'style="width:'+h.width+"px;height:"+h.height+'px;"':"",m=l.find("img"),o="src",k="",i=this._core.settings,j=function(q){n='<div class="owl-video-play-icon"></div>';if(i.lazyLoad){g='<div class="owl-video-tn '+k+'" '+o+'="'+q+'"></div>'}else{g='<div class="owl-video-tn" style="opacity:1;background-image:url('+q+')"></div>'}l.after(g);l.after(n)};l.wrap('<div class="owl-video-wrapper"'+f+"></div>");if(this._core.settings.lazyLoad){o="data-src";k="owl-lazy"}if(m.length){j(m.attr(o));m.remove();return false}if(h.type==="youtube"){p="http://img.youtube.com/vi/"+h.id+"/hqdefault.jpg";j(p)}else{if(h.type==="vimeo"){d.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+h.id+".json",jsonp:"callback",dataType:"jsonp",success:function(q){p=q[0].thumbnail_large;j(p)}})}}};b.prototype.stop=function(){this._core.trigger("stop",null,"video");this._playing.find(".owl-video-frame").remove();this._playing.removeClass("owl-video-playing");this._playing=null};b.prototype.play=function(l){this._core.trigger("play",null,"video");if(this._playing){this.stop()}var m=d(l.target||l.srcElement),k=m.closest("."+this._core.settings.itemClass),j=this._videos[k.attr("data-video")],i=j.width||"100%",f=j.height||this._core.$stage.height(),g,h;if(j.type==="youtube"){g='<iframe width="'+i+'" height="'+f+'" src="http://www.youtube.com/embed/'+j.id+"?autoplay=1&v="+j.id+'" frameborder="0" allowfullscreen></iframe>'}else{if(j.type==="vimeo"){g='<iframe src="http://player.vimeo.com/video/'+j.id+'?autoplay=1" width="'+i+'" height="'+f+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}}k.addClass("owl-video-playing");this._playing=k;h=d('<div style="height:'+f+"px; width:"+i+'px" class="owl-video-frame">'+g+"</div>");m.after(h)};b.prototype.isInFullScreen=function(){var f=a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement;if(f&&d(f).parent().hasClass("owl-video-frame")){this._core.speed(0);this._fullscreen=true}if(f&&this._fullscreen&&this._playing){return false}if(this._fullscreen){this._fullscreen=false;return false}if(this._playing){if(this._core.state.orientation!==c.orientation){this._core.state.orientation=c.orientation;return false}}return true};b.prototype.destroy=function(){var f,g;this._core.$element.off("click.owl.video");for(f in this._handlers){this._core.$element.off(f,this._handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};d.fn.owlCarousel.Constructor.Plugins.Video=b})(window.Zepto||window.jQuery,window,document);(function(d,c,b,e){var a=function(f){this.core=f;this.core.options=d.extend({},a.Defaults,this.core.options);this.swapping=true;this.previous=e;this.next=e;this.handlers={"change.owl.carousel":d.proxy(function(g){if(g.property.name=="position"){this.previous=this.core.current();this.next=g.property.value}},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":d.proxy(function(g){this.swapping=g.type=="translated"},this),"translate.owl.carousel":d.proxy(function(g){if(this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)){this.swap()}},this)};this.core.$element.on(this.handlers)};a.Defaults={animateOut:false,animateIn:false};a.prototype.swap=function(){if(this.core.settings.items!==1||!this.core.support3d){return}this.core.speed(0);var k,f=d.proxy(this.clear,this),j=this.core.$stage.children().eq(this.previous),i=this.core.$stage.children().eq(this.next),g=this.core.settings.animateIn,h=this.core.settings.animateOut;if(this.core.current()===this.previous){return}if(h){k=this.core.coordinates(this.previous)-this.core.coordinates(this.next);j.css({left:k+"px"}).addClass("animated owl-animated-out").addClass(h).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",f)}if(g){i.addClass("animated owl-animated-in").addClass(g).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",f)}};a.prototype.clear=function(f){d(f.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut);this.core.transitionEnd()};a.prototype.destroy=function(){var f,g;for(f in this.handlers){this.core.$element.off(f,this.handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};d.fn.owlCarousel.Constructor.Plugins.Animate=a})(window.Zepto||window.jQuery,window,document);(function(c,b,a,e){var d=function(f){this.core=f;this.core.options=c.extend({},d.Defaults,this.core.options);this.handlers={"translated.owl.carousel refreshed.owl.carousel":c.proxy(function(){this.autoplay()},this),"play.owl.autoplay":c.proxy(function(i,g,h){this.play(g,h)},this),"stop.owl.autoplay":c.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":c.proxy(function(){if(this.core.settings.autoplayHoverPause){this.pause()}},this),"mouseleave.owl.autoplay":c.proxy(function(){if(this.core.settings.autoplayHoverPause){this.autoplay()}},this)};this.core.$element.on(this.handlers)};d.Defaults={autoplay:false,autoplayTimeout:5000,autoplayHoverPause:false,autoplaySpeed:false};d.prototype.autoplay=function(){if(this.core.settings.autoplay&&!this.core.state.videoPlay){b.clearInterval(this.interval);this.interval=b.setInterval(c.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)}else{b.clearInterval(this.interval)}};d.prototype.play=function(g,f){if(a.hidden===true){return}if(this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion){return}if(this.core.settings.autoplay===false){b.clearInterval(this.interval);return}this.core.next(this.core.settings.autoplaySpeed)};d.prototype.stop=function(){b.clearInterval(this.interval)};d.prototype.pause=function(){b.clearInterval(this.interval)};d.prototype.destroy=function(){var f,g;b.clearInterval(this.interval);for(f in this.handlers){this.core.$element.off(f,this.handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};c.fn.owlCarousel.Constructor.Plugins.autoplay=d})(window.Zepto||window.jQuery,window,document);(function(d,b,a,e){var c=function(f){this._core=f;this._initialized=false;this._pages=[];this._controls={};this._templates=[];this.$element=this._core.$element;this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to};this._handlers={"prepared.owl.carousel":d.proxy(function(g){if(this._core.settings.dotsData){this._templates.push(d(g.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))}},this),"add.owl.carousel":d.proxy(function(g){if(this._core.settings.dotsData){this._templates.splice(g.position,0,d(g.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))}},this),"remove.owl.carousel prepared.owl.carousel":d.proxy(function(g){if(this._core.settings.dotsData){this._templates.splice(g.position,1)}},this),"change.owl.carousel":d.proxy(function(i){if(i.property.name=="position"){if(!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var h=this._core.current(),j=this._core.maximum(),g=this._core.minimum();i.data=i.property.value>j?h>=j?g:j:i.property.value<g?j:i.property.value}}},this),"changed.owl.carousel":d.proxy(function(g){if(g.property.name=="position"){this.draw()}},this),"refreshed.owl.carousel":d.proxy(function(){if(!this._initialized){this.initialize();this._initialized=true}this._core.trigger("refresh",null,"navigation");this.update();this.draw();this._core.trigger("refreshed",null,"navigation")},this)};this._core.options=d.extend({},c.Defaults,this._core.options);this.$element.on(this._handlers)};c.Defaults={nav:false,navRewind:true,navText:["prev","next"],navSpeed:false,navElement:"div",navContainer:false,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:true,dotsEach:false,dotData:false,dotsSpeed:false,dotsContainer:false,controlsClass:"owl-controls"};c.prototype.initialize=function(){var h,g,f=this._core.settings;if(!f.dotsData){this._templates=[d("<div>").addClass(f.dotClass).append(d("<span>")).prop("outerHTML")]}if(!f.navContainer||!f.dotsContainer){this._controls.$container=d("<div>").addClass(f.controlsClass).appendTo(this.$element)}this._controls.$indicators=f.dotsContainer?d(f.dotsContainer):d("<div>").hide().addClass(f.dotsClass).appendTo(this._controls.$container);this._controls.$indicators.on("click","div",d.proxy(function(j){var i=d(j.target).parent().is(this._controls.$indicators)?d(j.target).index():d(j.target).parent().index();j.preventDefault();this.to(i,f.dotsSpeed)},this));h=f.navContainer?d(f.navContainer):d("<div>").addClass(f.navContainerClass).prependTo(this._controls.$container);this._controls.$next=d("<"+f.navElement+">");this._controls.$previous=this._controls.$next.clone();this._controls.$previous.addClass(f.navClass[0]).html(f.navText[0]).hide().prependTo(h).on("click",d.proxy(function(i){this.prev(f.navSpeed)},this));this._controls.$next.addClass(f.navClass[1]).html(f.navText[1]).hide().appendTo(h).on("click",d.proxy(function(i){this.next(f.navSpeed)},this));for(g in this._overrides){this._core[g]=d.proxy(this[g],this)}};c.prototype.destroy=function(){var g,i,h,f;for(g in this._handlers){this.$element.off(g,this._handlers[g])}for(i in this._controls){this._controls[i].remove()}for(f in this.overides){this._core[f]=this._overrides[f]}for(h in Object.getOwnPropertyNames(this)){typeof this[h]!="function"&&(this[h]=null)}};c.prototype.update=function(){var n,l,f,h=this._core.settings,g=this._core.clones().length/2,o=g+this._core.items().length,m=h.center||h.autoWidth||h.dotData?1:h.dotsEach||h.items;if(h.slideBy!=="page"){h.slideBy=Math.min(h.slideBy,h.items)}if(h.dots||h.slideBy=="page"){this._pages=[];for(n=g,l=0,f=0;n<o;n++){if(l>=m||l===0){this._pages.push({start:n-g,end:n-g+m-1});l=0,++f}l+=this._core.mergers(this._core.relative(n))}}};c.prototype.draw=function(){var l,j,h="",g=this._core.settings,k=this._core.$stage.children(),f=this._core.relative(this._core.current());if(g.nav&&!g.loop&&!g.navRewind){this._controls.$previous.toggleClass("disabled",f<=0);this._controls.$next.toggleClass("disabled",f>=this._core.maximum())}this._controls.$previous.toggle(g.nav);this._controls.$next.toggle(g.nav);if(g.dots){l=this._pages.length-this._controls.$indicators.children().length;if(g.dotData&&l!==0){for(j=0;j<this._controls.$indicators.children().length;j++){h+=this._templates[this._core.relative(j)]}this._controls.$indicators.html(h)}else{if(l>0){h=new Array(l+1).join(this._templates[0]);this._controls.$indicators.append(h)}else{if(l<0){this._controls.$indicators.children().slice(l).remove()}}}this._controls.$indicators.find(".active").removeClass("active");this._controls.$indicators.children().eq(d.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(g.dots)};c.prototype.onTrigger=function(g){var f=this._core.settings;g.page={index:d.inArray(this.current(),this._pages),count:this._pages.length,size:f&&(f.center||f.autoWidth||f.dotData?1:f.dotsEach||f.items)}};c.prototype.current=function(){var f=this._core.relative(this._core.current());return d.grep(this._pages,function(g){return g.start<=f&&g.end>=f}).pop()};c.prototype.getPosition=function(g){var f,i,h=this._core.settings;if(h.slideBy=="page"){f=d.inArray(this.current(),this._pages);i=this._pages.length;g?++f:--f;f=this._pages[((f%i)+i)%i].start}else{f=this._core.relative(this._core.current());i=this._core.items().length;g?f+=h.slideBy:f-=h.slideBy}return f};c.prototype.next=function(f){d.proxy(this._overrides.to,this._core)(this.getPosition(true),f)};c.prototype.prev=function(f){d.proxy(this._overrides.to,this._core)(this.getPosition(false),f)};c.prototype.to=function(f,i,g){var h;if(!g){h=this._pages.length;d.proxy(this._overrides.to,this._core)(this._pages[((f%h)+h)%h].start,i)}else{d.proxy(this._overrides.to,this._core)(f,i)}};d.fn.owlCarousel.Constructor.Plugins.Navigation=c})(window.Zepto||window.jQuery,window,document);(function(d,c,a,e){var b=function(f){this._core=f;this._hashes={};this.$element=this._core.$element;this._handlers={"initialized.owl.carousel":d.proxy(function(){if(this._core.settings.startPosition=="URLHash"){d(c).trigger("hashchange.owl.navigation")}},this),"prepared.owl.carousel":d.proxy(function(h){var g=d(h.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[g]=h.content},this)};this._core.options=d.extend({},b.Defaults,this._core.options);this.$element.on(this._handlers);d(c).on("hashchange.owl.navigation",d.proxy(function(){var i=c.location.hash.substring(1),h=this._core.$stage.children(),g=this._hashes[i]&&h.index(this._hashes[i])||0;if(!i){return false}this._core.to(g,false,true)},this))};b.Defaults={URLhashListener:false};b.prototype.destroy=function(){var f,g;d(c).off("hashchange.owl.navigation");for(f in this._handlers){this._core.$element.off(f,this._handlers[f])}for(g in Object.getOwnPropertyNames(this)){typeof this[g]!="function"&&(this[g]=null)}};d.fn.owlCarousel.Constructor.Plugins.Hash=b})(window.Zepto||window.jQuery,window,document);
var topmall=topmall||{};topmall.carousel=(function(a){var b=this;b.mainCarousel=function(){a(".b-main-carousel-primary").owlCarousel({items:1,autoplay:true,margin:10,autoplayTimeout:6000,smartSpeed:900})};b.catalogCarousel=function(){a(".b-catalogue-carousel").owlCarousel({items:1,autoplay:true,margin:10,autoplayTimeout:6000,smartSpeed:900})};b.mainCarousel();b.catalogCarousel();return{catalogCarousel:b.catalogCarousel}}(jQuery));
var topmall=topmall||{};topmall.ga=(function(a){var b=this;b.push=function(d,c){c=c||"dataLayer";if(undefined!==window[c]){window[c].push(d)}};b.trackCurrentPage=function(d,c){d=d||"pageview";c=c||(document.location.pathname+document.location.search+document.location.hash).replace("/#/","/?").replace("/#","/?").replace("#","&");b.push({event:d,pageview:c})};b.trackEnhancedEcommercePartial=function(){if(undefined!==window.enhancedEcommercePartial){a.each(window.enhancedEcommercePartial,function(d,c){b.push(c.value);b.trackCurrentPage("pageview","/enhanced")})}};b.trackRTBHouseChangeCatalogEvent=function(){var c=[];if(undefined!==window.enhancedEcommercePartial){a.each(window.enhancedEcommercePartial,function(e,d){a.each(d.value.ecommerce.impressions,function(f,g){c.push(g.id)})});if(c.length>0){b.push({event:"rtbHouseChangeCatalogEvent","catalog.products":c.join(",")},"dataLayer")}}};b.trackMiniCart=function(){b.push({event:"Mini cart",action:"open",opt_label:"Cart",ecommerce:{}})};b.trackGaEvent=function(c,e,d){c.ecommerce={};c.ecommerce[e]={products:[d]};b.push(c)};b.trackToBy=function(c){a.ajax({url:Routing.generate("topmall_catalognew_catalog_trackbuy",{id:c.id}),type:"POST",dataType:"json",success:function(d){var e;if(d.success){e=d.eaProductObj;e.variant="";a.each(c.productSizes,function(g,f){if(f.id===c.size){e.variant=f.name}});b.trackGaEvent({event:"Add to cart",action:"click",opt_label:"Product"},"add",e)}}})};this.catalogProductClickEventHandler=function(f,d){var c;try{c={event:"Product Click",action:"click",label:"Catalog",ecommerce:{click:{actionField:{list:window.eaActionFieldList},products:[{name:f.name,id:f.sku,position:f.index}]}}};b.push(c)}catch(g){log.warn(g.message)}};return{trackMiniCart:b.trackMiniCart,trackToBy:b.trackToBy,push:b.push,catalogProductClickEventHandler:b.catalogProductClickEventHandler,trackEnhancedEcommercePartial:b.trackEnhancedEcommercePartial,trackRTBHouseChangeCatalogEvent:b.trackRTBHouseChangeCatalogEvent}}(jQuery));
var topmall=window.topmall||{};topmall.loader=(function(){var a=function(c){if(0===c.find("div.opa").length){c.append('<div class="opa"><div class="opa__wrapper"><i class="opa__loader"></i><span class="opa__loading">Czekaj...</span></div></div>')}},b=function(c){c.find("div.opa").remove()};return{show:a,hide:b}}());
var topmall=topmall||{};topmall.filter=(function(b,d,a,c){var e=this;topmall.params=topmall.params||{};this.initFilter=function(){e.parseHash(false);b("#main-container").on("click","li.b-active-filters__item, div.b-filters__breadcrumbs-items",function(g){var i=b(this).attr("data-filter-id");var h=b(this).attr("data-foi");switch(i){case"price_from":case"price_to":delete topmall.params.filters[i];break;case"category_ids":var f=b('div.b-filters__block--categories label[data-value="'+h+'"]');e.unsetCategoryOption(f);e.setOption(i,h);break;default:e.setOption(i,h)}topmall.params.page=1;e.load(true)});b("#main-container").on("change","div.b-filters__range-slider",function(){b(this).closest("form").submit()});b("#main-container").on("submit","form.b-filters__range",function(g){g.preventDefault();var j=parseInt(b(".b-filters__range-input--from").attr("data-start"));var f=parseInt(b(".b-filters__range-input--to").attr("data-end"));var i=parseInt(b(".b-filters__range-input--from").val());var h=parseInt(b(".b-filters__range-input--to").val());topmall.params.filters=topmall.params.filters||{};if(i>j){topmall.params.filters.price_from=i}else{delete topmall.params.filters.price_from}if(h<f){topmall.params.filters.price_to=h}else{delete topmall.params.filters.price_to}topmall.params.page=1;e.load(true)});b("#main-container").on("click","button.b-filters__clear-button, button.b-filters__breadcrumbs-items--clear-button",function(f){topmall.params.filters={};topmall.params.page=1;e.load(true)});b("#main-container").on("click","div.b-filters__block label:not(.js-b-filters-not-active)",function(i){var f=b(this).closest("div.b-filters__block");var j=f.attr("data-id");var g=f.attr("data-option_id");var h=b(this).attr("data-value");if(j=="remembered"){return true}if(j=="category_ids"){e.unsetCategoryOption(b(this))}e.setOption(j,h);topmall.params.page=1;e.load(true)});b("#main-container").on("perpage",function(h,f){var g=f.attr("data-value");e.setPerPage(g,function(){topmall.params.page=1;e.load(true)})});b("#main-container").on("view",function(h,g){var f=g.attr("data-value");e.setView(f,function(){switchView(f);e.load(false)})});b("#main-container").on("change","select.b-sorter__select--common",function(){e.setSort(b(this).val(),function(){topmall.params.page=1;e.load(true)})});b("#main-container").on("sort",function(h,g){var f=g.attr("data-value");e.setSort(f,function(){topmall.params.page=1;e.load(true)})});b("#main-container").on("click","div.b-filters__toggle",function(){b(this).parent().find("div.b-filters-wrap").slideToggle(250)});b("#main-container").on("click","div.b-filters__title",function(){var j=b(this).closest("div.b-filters__block");var g=j.find("ul");var i=j.find(".filter-item:not(.js-b-filter-checked)");var h=b(this).find("span.b-filters__title-toggle");var f=b("html").hasClass("is-mobile");if(!f&&h.size()==0){return}if(j.hasClass("b-filters__block--range")){if(j.find(".filter-item.js-b-filter-checked").size()==0){b("div.b-filters__range-inputs").slideToggle(250)}else{i.slideToggle(250)}}if((f&&b(this).hasClass("b-filters__title--open"))||(!f&&j.hasClass("js-b-filters--open"))){b(this).removeClass("b-filters__title--open").addClass("b-filters__title--close");j.removeClass("js-b-filters--open").addClass("js-b-filters--close");if(j.find(".filter-item.js-b-filter-checked").size()){i.slideUp(250)}else{g.slideUp(250)}h.text("poka")}else{b(this).removeClass("b-filters__title--close").addClass("b-filters__title--open");j.removeClass("js-b-filters--close").addClass("js-b-filters--open");i.slideDown(250);g.slideDown(250);h.text("ukryj")}});b(window).on("resize",function(){if(!b("html").hasClass("is-mobile")){b("div.b-filters__block--colors ul, div.b-filters__block--colors .filter-item").css("display","block");b("div.b-filters__block--colors").find("div.b-filters__title").removeClass("b-filters__title--close").addClass("b-filters__title--open");b("div.b-filters__block--colors").removeClass("js-b-filters--close").addClass("js-b-filters--open");b("div.b-filters__block--range .filter-item, div.b-filters__range-inputs").css("display","block");b("div.b-filters__block--range").find("div.b-filters__title").removeClass("b-filters__title--close").addClass("b-filters__title--open");b("div.b-filters__block--range").removeClass("js-b-filters--close").addClass("js-b-filters--open")}});b("#main-container").on("click","div.b-filters__show-all-link",function(){var g=b(this).closest("div.b-filters__block");var f=b(this).text()=="Poka popularne opcje";if(typeof(g.attr("data-open"))!="undefined"&&g.attr("data-open")==1){if(!f){g.find("li.main").hide();g.find("li:not(.main)").show()}else{g.find("li.main").show();g.find("li:not(.main)").hide()}}else{e.loadOptions(g,"",1)}b(this).text(f?"Poka wszystkie opcje":"Poka popularne opcje")});b("#main-container").on("submit","div.b-filters__block form:not(.b-filters__range)",function(g){g.preventDefault();var h=b(this).closest("div.b-filters__block");var f=h.find("input.b-form__input--filter-search").val();e.loadOptions(h,f,0)})},this.unsetCategoryOption=function(f){var g=f.closest("li").find("ul li label.js-b-filter-checked");b.each(g,function(i,h){e.setOption("category_ids",b(h).attr("data-value"))})},this.loadOptions=function(i,h,g){var f=e.getCurrentUrl().replace("/catalog/","/filter/catalog/").replace("/bestseller/","/filter/bestseller/").replace("/zapowiedzi/","/filter/zapowiedzi/").replace("/nowosci/","/filter/nowosci/").replace("/a/","/filter/a/").replace("/oferta/","/filter/oferta/");a.show(i);b.ajax({url:f,method:"post",data:{foi:i.attr("data-option_id"),foq:h,all:g},success:function(j){i.attr("data-open",g);i.find("li.main").hide();i.find("li:not(.main)").remove();var k=i.find("ul.b-filters__item-list-level-1");b.each(j,function(l,m){k.append(b('<li class="b-filters__item-level-1"><label class="b-filters__item-label-level-1 '+(m.selected?"js-b-filter-checked":"")+" "+(m.active?"":"js-b-filters-not-active")+'" data-value="'+m.id+'">'+m.name+'<span class="b-filters__item-label-checkbox-level-1"></span></label></li>'))});a.hide(i);if(j.length==0){b(".js-g-tooltip").text("     ").stop(true,true).fadeIn(50).css({left:i.offset().left+230,top:i.offset().top+30});setTimeout(function(){b(".js-g-tooltip").fadeOut(50)},3000)}}})},this.getCurrentUrl=function(){var f=window.location;var h=e.makeHash();var g=f.href.split("#")[0];return g+(g.indexOf("?")==-1?"?":"&")+h},this.setOption=function(g,f){topmall.params.filters=topmall.params.filters||{};topmall.params.filters[g]=topmall.params.filters[g]||[];if(b.inArray(f,topmall.params.filters[g])!=-1){topmall.params.filters[g]=b.grep(topmall.params.filters[g],function(h){return h!=f});b(this).removeClass("js-b-filter-checked")}else{topmall.params.filters[g].push(f);b(this).addClass("js-b-filter-checked")}},this.setPage=function(f,g){if(typeof(topmall.params.page)=="undefined"||topmall.params.page!=f){topmall.params.page=f;b.cookie("page",f,{path:"/"});if(typeof(g)!="undefined"){g()}}},this.setView=function(f,g){if(typeof(topmall.params.view)=="undefined"||topmall.params.view!=f){topmall.params.view=f;b.cookie("view",f,{path:"/"});if(typeof(g)!="undefined"){g()}}},this.setSort=function(f,g){if(typeof(topmall.params.sort)=="undefined"||topmall.params.sort!=f){topmall.params.sort=f;b.cookie("sort",f,{path:"/"});if(typeof(g)!="undefined"){g()}}},this.setPerPage=function(f,g){if(typeof(topmall.params.perpage)=="undefined"||topmall.params.perpage!=f){topmall.params.perpage=f;b.cookie("perpage",f,{path:"/"});if(typeof(g)!="undefined"){g()}}},this.load=function(f){window.location.search=e.makeHash()};this.parseHash=function(h){var g=location.hash.replace("#","");if(g.length>0){var f=location.search.replace("?","");f=((f.length>0)?(f+"&"):f)+g;f=(f.length>0)?"?"+f:f;location.href=location.href.split(/\?|#/)[0]+f}h=(undefined!==h)?h:true;var k=location.search.replace(/^\?/,"");if(k==""){e.gaTrack();return}var i=false;var j=k.split("&");b.each(j,function(m,l){var n=l.split("=");switch(n[0]){case"sort":e.setSort(n[1],function(){i=true});break;case"perPage":e.setPerPage(n[1],function(){i=true});break;case"view":e.setView(n[1],function(){i=true});break;case"page":e.setPage(n[1],function(){i=true});break;case"fl":break;default:if(typeof(n[1])!="undefined"){topmall.params.filters=topmall.params.filters||{};topmall.params.filters[n[0]]=n[1].split("-");i=true}}});if(i&&h){e.load(true)}else{e.gaTrack()}},this.gaTrack=function(){d.trackEnhancedEcommercePartial();d.trackRTBHouseChangeCatalogEvent()},this.carouselTrack=function(){c.catalogCarousel()},this.makeHash=function(){var f="";if(typeof(topmall.params.page)!="undefined"&&topmall.params.page!=1){f+="&page="+topmall.params.page}if(typeof(topmall.params.filters)!="undefined"){b.each(topmall.params.filters,function(h,g){if(g.length!=0){var i=(typeof(g)=="object"?g.join("-"):g);f+="&"+h+"="+i}})}if(typeof(topmall.params.sort)!="undefined"){f+="&sort="+topmall.params.sort}if(typeof(topmall.params.perpage)!="undefined"){f+="&perPage="+topmall.params.perpage}if(typeof(topmall.params.view)!="undefined"){f+="&view="+topmall.params.view}return f.replace(/^&/,"")};b(document).ready(function(){var f=b("body").attr("data-sf-controller");if("catalog"===f||"newremembered"===f){e.initFilter()}});return this}(jQuery,topmall.ga,topmall.loader,topmall.carousel));
(function(d,e,a,c){var f=this;var b;this.rootScope=function(){if(typeof(f.rootScope)=="undefined"){f.rootScope=angular.element(document.body).scope().$root}return f.rootScope};this.templateCache=function(){return window.$templateCache};this.getHoverImg=function(){if(typeof(f.hoverImg)=="undefined"){f.hoverImg=d('<img class="js-catalog-hovered-image">');d("body").append(f.hoverImg)}return f.hoverImg};this.rangeSlider=function(){var g=d("div.b-filters__range-slider");if(g.size()){g.noUiSlider({start:[parseInt(d(".b-filters__range-input--from").val()),parseInt(d(".b-filters__range-input--to").val())],connect:true,range:{min:[parseInt(d(".b-filters__range-input--from").attr("data-start"))],max:[parseInt(d(".b-filters__range-input--to").attr("data-end"))]},format:wNumb({decimals:0})},true);g.Link("lower").to(d("input.b-filters__range-input--from"));g.Link("upper").to(d("input.b-filters__range-input--to"))}};this.openProduct=function(g){if(!g.hasClass("loaded")){f.loadPpc(g,g.attr("data-ppc-id"),g.attr("data-warehouse"))}else{g.toggleClass("is-extended")}},this.initCatalog=function(){d(document).on("click","a[data-popup]",function(h){h.preventDefault();var g=d(this).attr("data-popup");if(typeof f.templateCache().get(g+".html")=="undefined"){d.ajax({url:g,method:"get",success:function(i){f.templateCache().put(g+".html",i);f.rootScope.showPopup(g);f.rootScope.$apply()}})}else{f.rootScope.showPopup(g);f.rootScope.$apply()}});f.initAccordeon(d(".catalog-top__description-info"));f.toggleAccordeon(d(".catalog-top__accordeon-link"));d(window).on("load filter",function(g){f.rangeSlider()});d("#main-container").on("click","a.b-supplier__content-full-toggle, a.b-brand-info__content-full-toggle",function(g){g.preventDefault();if(d(this).text()==""){d(this).text("Ukryj");d("div.b-supplier__content-full").slideDown("fast")}else{d(this).text("Wicej");d("div.b-supplier__content-full").slideUp("fast")}});d(document).on("mouseenter",".is-desktop ul.b-products-list--lines li.b-products-list__item img.b-products-list__image",function(g){if(!d(g.target).closest(".is-extended").length>0){f.getHoverImg().attr("src",d(this).attr("data-231")).show()}});d(document).on("mousemove",".is-desktop ul.b-products-list--lines li.b-products-list__item:not(.is-extended) img.b-products-list__image",function(g){f.getHoverImg().css({left:g.pageX+50,top:(g.clientY<500)?g.pageY-15:g.pageY-250})});d(document).on("mouseleave",".is-desktop ul.b-products-list--lines li.b-products-list__item:not(.is-extended) img.b-products-list__image",function(g){f.getHoverImg().hide()});d(document).on("mouseenter mouseleave",".is-desktop .b-products-list--tiles .b-products-list__helper",function(){var g=d(this).find("img.b-products-list__image");var i=g.attr("src");var h=g.attr("data-231-second");if(h!=""){g.attr("src",h).attr("data-231-second",i)}});d(document).on("click",".is-desktop .b-products-list--lines .b-products-list__helper",function(){f.openProduct(d(this).closest("li.b-products-list__item"))});d(document).on("click",".is-mobile .b-products-list__helper, .is-tablet .b-products-list__helper",function(){window.location.href=d(this).find("a.product-link:eq(0)").attr("href")});d("#main-container").on("click",".b-products-list__small-images-item img",function(g){g.stopPropagation();d(this).closest("ul.b-products-list__small-images").find("li.is-active").removeClass("is-active");d(this).closest("li.b-products-list__small-images-item").addClass("is-active");d(this).closest("li.b-products-list__item").find("img.b-products-list__image:visible").attr("src",d(this).attr("data-src")).attr("data-231",d(this).attr("data-src"))});d(document).on("click","div.jq-selectbox",function(m){m.stopPropagation();var l=d(this).find("div.dropdown");l.toggle();if(l.is(":hidden")){return}var k=d(this).find(".select").outerHeight();var j="js-jq-selectbox--active";d("div.jq-selectbox").removeClass(j);d(this).addClass(j);l.css({top:k,bottom:"auto"});var n=d(window).height(),h=l.height(),g=l.offset().top,i=d(document).scrollTop();if(((h+g)-i)>n){l.css({top:"auto",bottom:k}).addClass("js-dropdown--top")}else{l.css({top:k,bottom:"auto"}).removeClass("js-dropdown--top")}});d(document).on("click",function(g){d("div.dropdown").hide()});d("#main-container").on("click","div.dropdown li",function(g){g.stopPropagation();f.selectComboItem(d(this));d(this).closest("div.dropdown").hide()});d("#main-container").on("color",function(i,h){var g=h.closest("li.b-products-list__item");if(!h.hasClass("selected")){f.loadPpc(g,h.attr("data-value"),g.attr("data-warehouse"))}});d("#main-container").on("click","li.b-products-list__color-item",function(h){var g=d(this).closest("li.b-products-list__item");f.loadPpc(g,d(this).attr("data-ppc-id"),g.attr("data-warehouse"))});d("#main-container").on("sizepopup",function(j,h){var g=h.attr("data-value");var i=h.closest("div.g-popup--choose-size").find("div.mini-cart-btn").attr("data-ppc-id");var h=d('li[data-ppc-id="'+i+'"] li[data-value="'+g+'"]');if(h.size()){f.selectComboItem(h)}d('li[data-ppc-id="'+i+'"]').attr("data-ppcs-id",g)});d("#main-container").on("size",function(i,h){var g=h.closest("li.b-products-list__item");var j=h.attr("data-value");g.attr("data-ppcs-id",j);if(j!=0&&!h.hasClass("selected")){f.loadPpcs(g,j,g.attr("data-warehouse"))}if(j==0&&!h.hasClass("selected")){f.loadPpc(g,g.attr("data-ppc-id"),g.attr("data-warehouse"))}h.closest("ul").find("li.selected").removeClass("selected");h.addClass("selected")});d("#main-container").on("click","a.not-active-stars",function(g){if(d("html").hasClass("is-desktop")&&d("ul.b-products-list").hasClass("b-products-list--lines")){g.preventDefault();f.openProduct(d(this).closest("li.b-products-list__item"))}});d("#main-container").on("click","a.b-product-list__size-table-link",function(h){h.preventDefault();h.stopPropagation();var g=d(this).closest("li.b-products-list__item");f.sizeTable(g,g.attr("data-ppc-id"))});d("#main-container").on("click","button.g-buy-btn-new, button#add-cart-btn",function(h){h.stopPropagation();var g=(d(h.target).is("button#add-cart-btn"))?d(this):d(this).closest("li.b-products-list__item");f.createTempUser(f.addToCart,g,false)});d("#main-container").on("click","button.remove-from-remembered",function(g){g.stopPropagation();f.removeFromRemembered(d(this).closest("li.b-products-list__item"))});d(document).on("click","div.mini-cart-btn",function(j){j.stopPropagation();var i=d(this).attr("data-ppc-id");var h=d('li[data-ppc-id="'+i+'"]');var g=h.attr("data-ppcs-id");if(g==0){return false}f.rootScope.closePopup();f.rootScope.$apply();f.createTempUser(f.addToCart,h,false)});d("#main-container").on("click","a:not([data-popup])",function(g){g.stopPropagation()})};this.selectComboItem=function(g){var j=g.closest("div.jq-selectbox");var i=g.find("div.b-product-list__appended-color");if(typeof(j)!="undefined"){j.find("div.text").text(g.text());j.find("div.clone-color").html(i.html()).attr("data-color-count",i.attr("data-color-count"));var h=j.attr("data-event");if(typeof(h)!="undefined"){d("#main-container").trigger(h,[g])}}};this.productOutStock=function(h,g){g=(undefined!==g)?g:true;if(g){h.find("button.g-buy-btn-new").text("Niedostpne").addClass("disabled")}else{h.find("button.g-buy-btn-new").text("Kupowa").removeClass("disabled")}};this.removeFromRemembered=function(h){a.show(d("#main-container"));var g=h.attr("data-ppc-id");d.ajax({url:"/profile/remembered/remove/"+g,method:"post",success:function(i){c.load(true)}})},this.addToCart=function(i,g){var h=i.attr("data-ppc-id");if(undefined!==h){a.show(i);d.ajax({url:Routing.generate("topmall_cart_cart_add"),method:"post",data:{ppc_id:h,type:"cart"},success:function(k){if(k.status||false){if(d(window).width()>599){var j=560}else{var j=320}d("<div></div>").attr("id","dialog-notice").html(k.data.html).dialog({title:"Produkt zosta dodany do koszyka",autoOpen:true,dialogClass:"fixed minicart",resizable:false,width:j,height:"auto",minHeight:14,modal:true,draggable:false,position:["center",50],open:function(l,m){d(".ui-widget-overlay").css({width:"100%",height:"100%","z-index":1004});d(".ui-dialog").css({"z-index":1005})},close:function(){d(this).dialog("destroy");d("#dialog-notice").remove()},buttons:{back:{"class":"minicart-btn button button--primary button--large button--auto-width",text:"Powr do sklepu",click:function(){d(this).dialog("close")}},submit:{"class":"minicart-btn button button--secondary button--large button-auto-width",text:"Przejd do koszyka",click:function(){window.location.href=Routing.generate("topmall_cart_cart_index")}}}});d("#header-cart-item-count-text").html(k.data.quantity_text);d("#header-cart-item-count-text--mobile").html(k.data.quantity_text_mobile)}if(k.errorMsg||false){if(d(window).width()>599){var j=560}else{var j=320}d("<div></div>").attr("id","dialog-notice").html(k.data.html).dialog({title:k.errorMsg,autoOpen:true,dialogClass:"fixed minicart",resizable:false,width:j,height:"auto",minHeight:14,modal:true,draggable:false,position:["center",50],open:function(l,m){d(".ui-widget-overlay").css({width:"100%",height:"100%","z-index":1004});d(".ui-dialog").css({"z-index":1005})},close:function(){d(this).dialog("destroy");d("#dialog-notice").remove()},buttons:{back:{"class":"minicart-btn button button--primary button--large button--auto-width",text:"Powr do sklepu",click:function(){d(this).dialog("close")}},submit:{"class":"minicart-btn button button--secondary button--large button-auto-width",text:"Przejd do koszyka",click:function(){window.location.href=Routing.generate("topmall_cart_cart_index")}}}})}a.hide(i)}})}};this.createTempUser=function(i,h,g){if(typeof(d.cookie("topmall_uuid"))=="undefined"){d.ajax({url:Routing.generate("TopMallFrontendBundle_auth_createTemporaryUser"),method:"get",success:function(j){i(h,g)}})}else{i(h,g)}};this.loadPpc=function(h,i,g){a.show(h);d.ajax({url:Routing.generate("topmall_catalognew_catalog_productdata",{id:i,warehouse:g}),method:"get",success:function(j){h.attr("data-ppc-id",i).attr("data-ppcs-id",0).html(j).addClass("loaded is-extended");f.selectComboItem(h.find('li[data-value="'+h.attr("data-ppcs-id")+'"]'));a.hide(h)}})};this.loadPpcs=function(h,i,g){a.show(h);d.ajax({url:Routing.generate("topmall_catalognew_catalog_productsize",{id:i,warehouse:g}),method:"get",success:function(k){if(k.success){var j=d("#catalog-content").attr("data-min-discount");h.find("a.b-products-list__price-current").text(k.product.price+" ");h.find("span.b-products-list__shop-name__placeholder").html(k.product.shopName);if(k.product.discount>j){h.find("a.b-products-list__price-old > del").text(k.product.oldPrice+" ");h.find("a.b-products-list__price-old").show();h.find("span.b-products-list__sticker-item").text("-"+k.product.discount+"%").show()}else{h.find("a.b-products-list__price-old").hide();h.find("span.b-products-list__sticker-item").hide()}h.find(".other-full-wrapper").html(k.product.otherSizesFull);h.find(".other-wrapper").html(k.product.otherSizes);f.productOutStock(h,k.product.outStock)}a.hide(h)}})};this.sizeTable=function(g,h){a.show(g);d.ajax({url:Routing.generate("topmall_catalognew_catalog_sizetable",{id:h}),method:"get",success:function(i){f.rootScope.showPopup("size-table",{table:i.product.sizeTable});f.rootScope.$apply();a.hide(g)}})};this.initAccordeon=function(g){g.each(function(){var h=d(this).data("initAccordeon");d(this).css("max-height",h);if(d(this).length>0&&d(this).height()<h){d(this).parent().removeClass("is-gradient")}else{if(d(this).length>0&&d(this).height()==h){d(this).next().removeClass("is-hidden");d(this).parent().addClass("is-gradient")}}})};this.toggleAccordeon=function(g){g.click(function(){d(this).toggleClass("active");d(this).prev().toggleClass("active");d(this).parent().toggleClass("is-gradient")})};f.initCatalog()}(jQuery,topmall.ga,topmall.loader,topmall.filter));
(function(a){a(window).on("load resize",function(){a("html").removeClass("is-mobile is-desktop is-tablet touch no-touch");htmlCls()});a(document).on("click","html.is-mobile ul.b-footer__list li.b-footer__list-item",function(b){a(this).find("ul.b-footer__list-inner").slideToggle(250);a(this).toggleClass("b-footer__list-item--active")});a(window).on("resize",function(){a("ul.b-footer__list li.b-footer__list-item ul.b-footer__list-inner").css("display","");a(".b-footer__list-item--active").removeClass("b-footer__list-item--active")})}(jQuery));
function width(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0}function height(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}var scrollDiv=document.createElement("div");scrollDiv.style.cssText="width: 100px; height: 100px; overflow: scroll;position: absolute; top: -9999px;";document.body.appendChild(scrollDiv);window.scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);var App={};App.CommonCntr=(function(){var passMobile=false,passDesktop=false,passTablet=false,device="";return{isOpera:function(){return((typeof(window.opera)!="undefined"&&opera.version()<15)||(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&parseInt(navigator.userAgent.toLowerCase().split("msie")[1])<10))},isOperaNotWebkit:function(){return !!window.opera},isIOS:function(){return/iPod|iPhone|iPad/i.test(navigator.userAgent)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isWindows:function(){return/Windows/i.test(navigator.userAgent)},isDesktop:function(){return $("html").is(".is-desktop")},hasClass:function(target,className){return new RegExp("(\\s|^)"+className+"(\\s|$)").test(target.className)},isIE8:function(){var el=document.getElementsByTagName("html")[0];return this.hasClass(el,"ie8")},isIE10:function(){var isIE10=false;
/*@cc_on
				if (/^10/.test(@_jscript_version)) {
					isIE10 = true;
				}
			@*/
return isIE10},isIE11:function(){return !!navigator.userAgent.match(/Trident.*rv[ :]*11\./)},addDeviceEvents:function(){var _passMobile=passMobile;var _passDesktop=passDesktop;var _passTablet=passTablet;if(App.DeviceOptions.isMobile()){passMobile=true;if(false===_passMobile){$(document).trigger("passDevice","mobile")}if(device!=="mobile"){device="mobile"}}else{if(App.DeviceOptions.isTablet()){passTablet=true;if(false===_passTablet){$(document).trigger("passDevice","tablet")}if(device!=="tablet"){device="tablet"}}else{passDesktop=true;if(false===_passDesktop){$(document).trigger("passDevice","desktop")}if(device!=="desktop"){device="desktop"}}}},makeUnselectable:function(target){$(target).addClass("is-unselectable").attr({"is-unselectable":"on",draggable:"false"}).on("dragstart",function(){return false})}}}());App.CommonCntr.makeUnselectable(".pn__box-item-img");if(App.CommonCntr.isIE10()){$("html").addClass("ie10")}if(App.CommonCntr.isIE11()){$("html").addClass("ie11")}if(App.CommonCntr.isOperaNotWebkit()){$("html").addClass("opera-not-webkit")}function fixedHeaderBar(){var b=$(".b-header-main"),a=$(document).scrollTop();if(a>50&&$(window).width()>999){b.addClass("fixed");$(".b-header-helper").addClass("fixed")}else{b.removeClass("fixed");$(".b-header-helper").removeClass("fixed")}}function activeToggleMenu(){var d=$("#sub-menu-toggle_submenu"),a=$(window).height(),b=d.height(),c=65;$(".b-header-main__toggle_menu").click(function(){if(d.is(":visible")){$(".sandwich").removeClass("active");d.slideUp()}else{if((b+c)>a){d.css("height",a-c)}$(".sandwich").addClass("active");d.slideDown()}});$("#sub-menu-toggle_submenu li a, #sub-menu-toggle_submenu li.toggle_menu-cats--close").click(function(){$(".sandwich").toggleClass("active");$("#sub-menu-toggle_submenu").slideUp()});$(window).resize(function(){a=$(window).height()})}$(document).load(function(){fixedHeaderBar()});$(document).scroll(function(){fixedHeaderBar()});$(window).resize(function(){fixedHeaderBar()});$(window).ready(function(){activeToggleMenu()});
(function(a){window.onpageshow=function(b){if(b.persisted||window.performance.navigation.type==2){a.ajax({url:Routing.generate("topmall_cart_cart_updatequantitycart"),method:"post",success:function(c){a("#header-cart-item-count-text").html(c.data.quantity_text);a("#header-cart-item-count-text--mobile").html(c.data.quantity_text_mobile);if(a("body").hasClass("cart")){a("#wrapper").html(c.data.html)}}})}}}(jQuery));
(function(a){a.fn.styler=function(b){b=a.extend({idSuffix:"-styler",browseText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0},b);return this.each(function(){var d=a(this),c="",h="",g="";void 0!==d.attr("id")&&""!=d.attr("id")&&(c=' id="'+d.attr("id")+b.idSuffix+'"');void 0!==d.attr("class")&&""!=d.attr("class")&&(h=" "+d.attr("class"));var f=d.data(),i;for(i in f){""!=f[i]&&(g+=" data-"+i+'="'+f[i]+'"')}c+=g;d.is(":checkbox")?d.css({position:"absolute",left:-9999}).each(function(){if(1>d.next("span.jq-checkbox").length){var e=a("<span"+c+' class="jq-checkbox'+h+'" style="display: inline-block"><span></span></span>');d.after(e);d.is(":checked")&&e.addClass("checked");d.is(":disabled")&&e.addClass("disabled");e.click(function(){if(!e.is(".disabled")){return d.is(":checked")?(d.prop("checked",!1),e.removeClass("checked")):(d.prop("checked",!0),e.addClass("checked")),d.change(),!1}});d.parent("label").add('label[for="'+d.attr("id")+'"]').click(function(j){e.click();j.preventDefault()});d.change(function(){d.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).keydown(function(j){d.parent("label").length&&(13==j.which||32==j.which)&&e.click()}).focus(function(){e.is(".disabled")||e.addClass("focused")}).blur(function(){e.removeClass("focused")});d.on("refresh",function(){d.is(":checked")?e.addClass("checked"):e.removeClass("checked");d.is(":disabled")?e.addClass("disabled"):e.removeClass("disabled")})}}):d.is(":radio")?d.css({position:"absolute",left:-9999}).each(function(){if(1>d.next("span.jq-radio").length){var e=a("<span"+c+' class="jq-radio'+h+'" style="display: inline-block"><span></span></span>');d.after(e);d.is(":checked")&&e.addClass("checked");d.is(":disabled")&&e.addClass("disabled");e.click(function(){if(!e.is(".disabled")){return a('input[name="'+d.attr("name")+'"]').prop("checked",!1).next().removeClass("checked"),d.prop("checked",!0).next().addClass("checked"),d.change(),!1}});d.parent("label").add('label[for="'+d.attr("id")+'"]').click(function(j){e.click();j.preventDefault()});d.change(function(){a('input[name="'+d.attr("name")+'"]').next().removeClass("checked");d.next().addClass("checked")}).focus(function(){e.is(".disabled")||e.addClass("focused")}).blur(function(){e.removeClass("focused")});d.on("refresh",function(){d.is(":checked")?(a('input[name="'+d.attr("name")+'"]').next().removeClass("checked"),e.addClass("checked")):e.removeClass("checked");d.is(":disabled")?e.addClass("disabled"):e.removeClass("disabled")})}}):d.is(":file")?d.css({position:"absolute",top:"-50%",right:"-50%",fontSize:"200px",opacity:0}).each(function(){if(1>d.parent("span.jq-file").length){var j=a("<span"+c+' class="jq-file'+h+'" style="display: inline-block; position: relative; overflow: hidden"></span>'),k=a('<div class="name" style="float: left; white-space: nowrap"></div>').appendTo(j);a('<div class="browse" style="float: left">'+b.browseText+"</div>").appendTo(j);d.after(j);j.append(d);d.is(":disabled")&&j.addClass("disabled");d.change(function(){k.text(d.val().replace(/.+[\\\/]/,""))}).focus(function(){j.addClass("focused")}).blur(function(){j.removeClass("focused")}).click(function(){j.removeClass("focused")}).on("refresh",function(){d.is(":disabled")?j.addClass("disabled"):j.removeClass("disabled")})}}):d.is("select")&&d.each(function(){if(1>d.next("span.jqselect").length){var e=function(){function N(j){j.bind("mousewheel DOMMouseScroll",function(m){var k=null;"mousewheel"==m.type?k=-1*m.originalEvent.wheelDelta:"DOMMouseScroll"==m.type&&(k=40*m.originalEvent.detail);k&&(m.preventDefault(),a(this).scrollTop(k+a(this).scrollTop()))})}function E(){for(i=0;i<L.length;i++){var k="",j="",m="",p="";L.eq(i).prop("selected")&&(j="selected sel");L.eq(i).is(":disabled")&&(j="disabled");L.eq(i).is(":selected:disabled")&&(j="selected sel disabled");void 0!==L.eq(i).attr("class")&&(m=" "+L.eq(i).attr("class"));k='<li class="'+j+m+'">'+L.eq(i).text()+"</li>";L.eq(i).parent().is("optgroup")&&(void 0!==L.eq(i).parent().attr("class")&&(p=" "+L.eq(i).parent().attr("class")),k='<li class="'+j+m+" option"+p+'">'+L.eq(i).text()+"</li>",L.eq(i).is(":first-child")&&(k='<li class="optgroup'+p+'">'+L.eq(i).parent().attr("label")+"</li>"+k));q+=k}}var L=a("option",d),q="";if(d.is("[multiple]")){var J=a("<span"+c+' class="jq-select-multiple jqselect'+h+'" style="display: inline-block"></span>');d.after(J).css({position:"absolute",left:-9999});E();J.append('<ul style="position: relative">'+q+"</ul>");var I=a("ul",J),K=a("li",J).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),C=d.attr("size"),B=I.outerHeight(),o=K.outerHeight();void 0!==C&&0<C?I.css({height:o*C}):I.css({height:4*o});B>J.height()&&(I.css("overflowY","scroll"),N(I),K.filter(".selected").length&&I.scrollTop(I.scrollTop()+K.filter(".selected").position().top));d.is(":disabled")?(J.addClass("disabled"),L.each(function(){a(this).is(":selected")&&K.eq(a(this).index()).addClass("selected")})):(K.filter(":not(.disabled):not(.optgroup)").click(function(j){d.focus();J.removeClass("focused");var r=a(this);j.ctrlKey||r.addClass("selected");j.shiftKey||r.addClass("first");!j.ctrlKey&&!j.shiftKey&&r.siblings().removeClass("selected first");j.ctrlKey&&(r.is(".selected")?r.removeClass("selected first"):r.addClass("selected first"),r.siblings().removeClass("first"));if(j.shiftKey){var p=!1,m=!1;r.siblings().removeClass("selected").siblings(".first").addClass("selected");r.prevAll().each(function(){a(this).is(".first")&&(p=!0)});r.nextAll().each(function(){a(this).is(".first")&&(m=!0)});p&&r.prevAll().each(function(){if(a(this).is(".selected")){return !1}a(this).not(".disabled, .optgroup").addClass("selected")});m&&r.nextAll().each(function(){if(a(this).is(".selected")){return !1}a(this).not(".disabled, .optgroup").addClass("selected")});1==K.filter(".selected").length&&r.addClass("first")}L.prop("selected",!1);K.filter(".selected").each(function(){var s=a(this),k=s.index();s.is(".option")&&(k-=s.prevAll(".optgroup").length);L.eq(k).prop("selected",!0)});d.change()}),L.each(function(j){a(this).data("optionIndex",j)}),d.change(function(){K.removeClass("selected");var j=[];L.filter(":selected").each(function(){j.push(a(this).data("optionIndex"))});K.not(".optgroup").filter(function(k){return -1<a.inArray(k,j)}).addClass("selected")}).focus(function(){J.addClass("focused")}).blur(function(){J.removeClass("focused")}),B>J.height()&&d.keydown(function(j){(38==j.which||37==j.which||33==j.which)&&I.scrollTop(I.scrollTop()+K.filter(".selected").position().top-o);(40==j.which||39==j.which||34==j.which)&&I.scrollTop(I.scrollTop()+K.filter(".selected:last").position().top-I.innerHeight()+2*o)}))}else{var H=a("<span"+c+' class="jq-selectbox jqselect'+h+'" style="display: inline-block; position: relative; z-index:'+b.singleSelectzIndex+'"><div class="select" style="float: left"><div class="text"></div><b class="trigger"><i class="arrow"></i></b></div></span>');d.after(H).css({position:"absolute",left:-9999});var C=a("div.select",H),A=a("div.text",H),B=L.filter(":selected");B.length?A.text(B.text()):A.text(L.first().text());if(d.is(":disabled")){H.addClass("disabled")}else{E();var M=a('<div class="dropdown" style="position: absolute; overflow: auto; overflow-x: hidden"><ul style="list-style: none">'+q+"</ul></div>");H.append(M);var G=a("li",M);1>G.filter(".selected").length&&G.first().addClass("selected sel");var D=H.outerHeight();"auto"==M.css("left")&&M.css({left:0});"auto"==M.css("top")&&M.css({top:D});var F=G.outerHeight(),n=M.css("top");M.hide();C.click(function(){d.focus();if(b.selectSmartPositioning){var t=a(window),s=H.offset().top,m=t.height()-D-(s-t.scrollTop()),r=b.selectVisibleOptions,p=6*F,k=F*r;0<r&&6>r&&(p=k);0>m||m<p?(M.height("auto").css({top:"auto",bottom:n}),M.outerHeight()>s-t.scrollTop()-20&&(M.height(Math.floor((s-t.scrollTop()-20)/F)*F),0<r&&6>r?M.height()>p&&M.height(p):6<r&&M.height()>k&&M.height(k))):m>p&&(M.height("auto").css({bottom:"auto",top:n}),M.outerHeight()>m-20&&(M.height(Math.floor((m-20)/F)*F),0<r&&6>r?M.height()>p&&M.height(p):6<r&&M.height()>k&&M.height(k)))}a("span.jqselect").css({zIndex:b.singleSelectzIndex-1}).removeClass("focused");H.css({zIndex:b.singleSelectzIndex});M.is(":hidden")?(a("div.dropdown:visible").hide(),M.show(),H.addClass("opened")):(M.hide(),H.removeClass("opened"));G.filter(".selected").length&&M.scrollTop(M.scrollTop()+G.filter(".selected").position().top-M.innerHeight()/2+F/2);N(M);return !1});G.hover(function(){a(this).siblings().removeClass("selected")});var l=G.filter(".selected").text();G.filter(":not(.disabled):not(.optgroup)").click(function(){var j=a(this),m=j.text();if(l!=m){var k=j.index();j.is(".option")&&(k-=j.prevAll(".optgroup").length);j.addClass("selected sel").siblings().removeClass("selected sel");L.prop("selected",!1).eq(k).prop("selected",!0);l=m;A.text(m);d.change()}M.hide()});M.mouseout(function(){a("li.sel",M).addClass("selected")});d.change(function(){A.text(L.filter(":selected").text());G.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel")}).focus(function(){H.addClass("focused")}).blur(function(){H.removeClass("focused")}).bind("keydown keyup",function(j){A.text(L.filter(":selected").text());G.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel");(38==j.which||37==j.which||33==j.which)&&M.scrollTop(M.scrollTop()+G.filter(".selected").position().top);(40==j.which||39==j.which||34==j.which)&&M.scrollTop(M.scrollTop()+G.filter(".selected").position().top-M.innerHeight()+F);13==j.which&&M.hide()});a(document).on("click",function(j){!a(j.target).parents().hasClass("selectbox")&&"OPTION"!=j.target.nodeName&&(M.hide().find("li.sel").addClass("selected"),H.removeClass("focused opened"))})}}};e();d.on("refresh",function(){d.next().remove();e()})}})})}})(jQuery);
(function(){var a=("placeholder" in document.createElement("input"));$.fn.placeholder=function(b){if(!a){if(b){switch(b){case"clear":this.each(function(){var c=$(this);if(c.data("isEmpty")||c.val()==c.attr("placeholder")){c.val("")}});break}return this}this.each(function(){if(!$(this).data("gotPlaceholder")){$(this).focus(function(){var c=$(this);if(c.data("isEmpty")){c.val("").removeClass("placeholder")}}).blur(function(){var c=$(this);if(c.data("isEmpty")||!c.val().length){c.val(c.attr("placeholder")).addClass("placeholder")}}).keyup(function(){var c=$(this);c.data("isEmpty",(c.val().length==0))}).data("gotPlaceholder",true);if(!$(this).val().length||$(this).val()==$(this).attr("placeholder")){$(this).val($(this).attr("placeholder")).addClass("placeholder").data("isEmpty",true)}}})}return this};$("[placeholder]").placeholder()}());
!function(G,A){function m(f,h,u){var g=f.children(),s=!1;f.empty();for(var c=0,p=g.length;p>c;c++){var a=g.eq(c);if(f.append(a),u&&f.append(u),D(f,h)){a.remove(),s=!0;break}u&&u.detach()}return s}function b(o,t,g,p,a){var h=!1,r="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",f="script, .dotdotdot-keep";return o.contents().detach().each(function(){var d=this,c=G(d);if("undefined"==typeof d||3==d.nodeType&&0==G.trim(d.data).length){return !0}if(c.is(f)){o.append(c)}else{if(h){return !0}o.append(c),a&&o[o.is(r)?"after":"append"](a),D(g,p)&&(h=3==d.nodeType?k(c,t,g,p,a):b(c,t,g,p,a),h||(c.detach(),h=!0)),h||a&&a.detach()}}),h}function k(L,s,a,l,M){var N=L[0];if(!N){return !1}var K=H(N),I=-1!==K.indexOf(" ")?" ":"",i="letter"==l.wrap?"":I,J=K.split(i),S=-1,R=-1,P=0,O=J.length-1;for(l.fallbackToLetter&&0==P&&0==O&&(i="",J=K.split(i),O=J.length-1);O>=P&&(0!=P||0!=O);){var t=Math.floor((P+O)/2);if(t==R){break}R=t,q(N,J.slice(0,R+1).join(i)+l.ellipsis),D(a,l)?(O=R,l.fallbackToLetter&&0==P&&0==O&&(i="",J=J[0].split(i),S=-1,R=-1,P=0,O=J.length-1)):(S=R,P=R)}if(-1==S||1==J.length&&0==J[0].length){var Q=L.parent();L.detach();var u=M&&M.closest(Q).length?M.length:0;Q.contents().length>u?N=F(Q.contents().eq(-1-u),s):(N=F(Q,s,!0),u||Q.detach()),N&&(K=w(H(N),l),q(N,K),u&&M&&G(N).parent().append(M))}else{K=w(J.slice(0,S+1).join(i),l),q(N,K)}return !0}function D(a,c){return a.innerHeight()>c.maxHeight}function w(a,c){for(;G.inArray(a.slice(-1),c.lastCharacter.remove)>-1;){a=a.slice(0,-1)}return G.inArray(a.slice(-1),c.lastCharacter.noEllipsis)<0&&(a+=c.ellipsis),a}function B(a){return{width:a.innerWidth(),height:a.innerHeight()}}function q(a,c){a.innerText?a.innerText=c:a.nodeValue?a.nodeValue=c:a.textContent&&(a.textContent=c)}function H(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function C(a){do{a=a.previousSibling}while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function F(f,h,d){var g,c=f&&f[0];if(c){if(!d){if(3===c.nodeType){return c}if(G.trim(f.text())){return F(f.contents().last(),h)}}for(g=C(c);!g;){if(f=f.parent(),f.is(h)||!f.length){return !1}g=C(f[0])}if(g){return F(G(g),h)}}return !1}function z(a,c){return a?"string"==typeof a?(a=G(a,c),a.length?a:!1):a.jquery?a:!1:!1}function x(d){for(var g=d.innerHeight(),i=["paddingTop","paddingBottom"],f=0,h=i.length;h>f;f++){var c=parseInt(d.css(i[f]),10);isNaN(c)&&(c=0),g-=c}return g}if(!G.fn.dotdotdot){G.fn.dotdotdot=function(p){if(0==this.length){return G.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this}if(this.length>1){return this.each(function(){G(this).dotdotdot(p)})}var r=this;r.data("dotdotdot")&&r.trigger("destroy.dot"),r.data("dotdotdot-style",r.attr("style")||""),r.css("word-wrap","break-word"),"nowrap"===r.css("white-space")&&r.css("white-space","normal"),r.bind_events=function(){return r.bind("update.dot",function(i,l){i.preventDefault(),i.stopPropagation(),a.maxHeight="number"==typeof a.height?a.height:x(r),a.maxHeight+=a.tolerance,"undefined"!=typeof l&&(("string"==typeof l||l instanceof HTMLElement)&&(l=G("<div />").append(l).contents()),l instanceof G&&(f=l)),n=r.wrapInner('<div class="dotdotdot" />').children(),n.contents().detach().end().append(f.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var o=!1,g=!1;return h.afterElement&&(o=h.afterElement.clone(!0),o.show(),h.afterElement.detach()),D(n,a)&&(g="children"==a.wrap?m(n,a,o):b(n,r,n,a,o)),n.replaceWith(n.contents()),n=null,G.isFunction(a.callback)&&a.callback.call(r[0],g,f),h.isTruncated=g,g}).bind("isTruncated.dot",function(c,g){return c.preventDefault(),c.stopPropagation(),"function"==typeof g&&g.call(r[0],h.isTruncated),h.isTruncated}).bind("originalContent.dot",function(c,g){return c.preventDefault(),c.stopPropagation(),"function"==typeof g&&g.call(r[0],f),f}).bind("destroy.dot",function(c){c.preventDefault(),c.stopPropagation(),r.unwatch().unbind_events().contents().detach().end().append(f).attr("style",r.data("dotdotdot-style")||"").data("dotdotdot",!1)}),r},r.unbind_events=function(){return r.unbind(".dot"),r},r.watch=function(){if(r.unwatch(),"window"==a.watch){var g=G(window),i=g.width(),c=g.height();g.bind("resize.dot"+h.dotId,function(){i==g.width()&&c==g.height()&&a.windowResizeFix||(i=g.width(),c=g.height(),d&&clearInterval(d),d=setTimeout(function(){r.trigger("update.dot")},100))})}else{t=B(r),d=setInterval(function(){if(r.is(":visible")){var e=B(r);(t.width!=e.width||t.height!=e.height)&&(r.trigger("update.dot"),t=e)}},500)}return r},r.unwatch=function(){return G(window).unbind("resize.dot"+h.dotId),d&&clearInterval(d),r};var f=r.contents(),a=G.extend(!0,{},G.fn.dotdotdot.defaults,p),h={},t={},d=null,n=null;return a.lastCharacter.remove instanceof Array||(a.lastCharacter.remove=G.fn.dotdotdot.defaultArrays.lastCharacter.remove),a.lastCharacter.noEllipsis instanceof Array||(a.lastCharacter.noEllipsis=G.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),h.afterElement=z(a.after,r),h.isTruncated=!1,h.dotId=j++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),a.watch&&r.watch(),r},G.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},G.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},G.fn.dotdotdot.debug=function(){};var j=1,y=G.fn.html;G.fn.html=function(a){return a!=A&&!G.isFunction(a)&&this.data("dotdotdot")?this.trigger("update",[a]):y.apply(this,arguments)};var E=G.fn.text;G.fn.text=function(a){return a!=A&&!G.isFunction(a)&&this.data("dotdotdot")?(a=G("<div />").text(a).html(),this.trigger("update",[a])):E.apply(this,arguments)}}}(jQuery);
App.DeviceOptions=(function(){var isTouch=$("html").hasClass("touch");var getViewport=function(){var viewPortWidth;var viewPortHeight;if(typeof window.innerWidth!="undefined"){viewPortWidth=window.innerWidth;viewPortHeight=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){viewPortWidth=document.documentElement.clientWidth;viewPortHeight=document.documentElement.clientHeight}else{viewPortWidth=document.getElementsByTagName("body")[0].clientWidth;viewPortHeight=document.getElementsByTagName("body")[0].clientHeight}}return{width:viewPortWidth,height:viewPortHeight}};return{isOpera:function(){return((typeof(window.opera)!="undefined"&&opera.version()<15)||(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&parseInt(navigator.userAgent.toLowerCase().split("msie")[1])<10))},isOperaNotWebkit:function(){return !!window.opera},isIOS:function(){return/iPod|iPhone|iPad/i.test(navigator.userAgent)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isWindows:function(){return/Windows/i.test(navigator.userAgent)},isDesktop:function(){return $("html").is(".is-desktop")},isDesktopPC:function(){return !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},hasClass:function(target,className){return new RegExp("(\\s|^)"+className+"(\\s|$)").test(target.className)},isIE8:function(){var el=document.getElementsByTagName("html")[0];return this.hasClass(el,"ie8")},isIE10:function(){var isIE10=false;
/*@cc_on
        if (/^10/.test(@_jscript_version)) {
        isIE10 = true;
        }
        @*/
return isIE10},isIE11:function(){return !!navigator.userAgent.match(/Trident.*rv[ :]*11\./)},getWindowWidth:function(){return getViewport().width},isTouch:function(){return isTouch},isWindowsTouch:function(){return/Windows/i.test(navigator.userAgent)&&(/Touch/i.test(navigator.userAgent)||isTouch)},isMobile:function(){return this.getWindowWidth()<=640},isMobileTouch:function(){return isTouch&&this.getWindowWidth()<=640},isTablet:function(){return this.getWindowWidth()>640&&this.getWindowWidth()<1000},isTabletTouch:function(){return isTouch&&(this.getWindowWidth()>640&&this.getWindowWidth()<1000)},getScrollbarWidth:function(){return this.getWindowWidth()-$(window).width()},currentDevice:null}}());$(document).on("ready",function(){});$(window).on("resize",function(){});
App.SearchFormController={focusClass:"g-form--focused",init:function(){var a=this;$(window).on("load resize",function(b,c){a.selectStylerInitialization();a.focusHeaderInputOnSelectOptionClick()});this.addFocusedViewToSearchForm();this.addEventListenerClickToLower("header");this.addEventListenerClickToLower("page")},focusHeaderInputOnSelectOptionClick:function(){$(".b-form--search").find(".dropdown li").on("click",function(){$("#search_header").trigger("focus")})},addFocusedViewToSearchForm:function(){var a=this;if(App.CommonCntr.isIOS()){$(".g-form__input--default").on("mouseenter",function(){$(this).focus().add($(this).parent()).addClass(a.focusClass)}).on("mouseout",function(){$(this).blur().add($(this).parent()).removeClass(a.focusClass)})}else{$(".g-form__input--default").on("focus",function(){$(this).add($(this).parent()).addClass(a.focusClass)}).on("blur",function(){$(this).add($(this).parent()).removeClass(a.focusClass)})}},selectStylerInitialization:function(){$$(".b-form__select--search").styler()},addEventListenerClickToLower:function(a){$("#search-submit-"+a).on("click",function(b){b.preventDefault();$(this).parent().find(".b-form__input--search").val(function(c,d){return d.toLowerCase()});$("#b-form--search-"+a).submit()})}};App.SearchFormController.init();
App.SlideNavigation=(function(){var d=$(".pn__ill-1"),a=$("div.pn"),h,o,b=".pn__box",m="js-nav-list-active",j="js-nav-el-active",p=false,l;var e=$(document);function k(){if(!App.DeviceOptions.isTablet()){return false}var q=$(".g-responsive-width").width();d.width((q/4).toFixed(0));return true}var g=(function(){var r=App.SlideNavigation;function q(){$(".pn__layer-decor").css({width:App.SlideNavigation.defaultParentUlSizes._width()*App.SlideNavigation.getSizesForDecorLayerBlock.visibleActiveElementsLength(),height:App.SlideNavigation.getSizesForDecorLayerBlock.getMaxUlHeight()})}function s(){}return{init:function(){s()},setDimensions:q,_static:s}})();function i(){var q=$(".pn__layer-decor li");q.each(function(s,t){var r=$(t);r.on("mouseover",function(x){if($("html").hasClass("is-desktop")){var u=$(this).find("a.b-primary-nav__box-item-img");var y=u.attr("data-image");if(typeof(y)!="undefined"&&u.attr("data-loaded")!="1"){u.attr("data-loaded",1);var v=$('<img width="180" height="278" alt="photo"/>').attr("src",y);u.append(v)}}var w=$(this);w.siblings("li").removeClass(j);w.siblings("li").find("li."+j).removeClass(j);w.siblings("li").find("ul."+m).removeClass(m);if(!w.hasClass("not-has-menu")){if(!w.hasClass(j)){w.addClass(j)}w.children("ul:first").addClass(m).end().parent().addClass(m);if($("html").hasClass("is-desktop")){if(App.CommonCntr.isIOS()||App.CommonCntr.isAndroid()||(App.DeviceOptions.isWindowsTouch())){w.find(b).removeClass(m)}else{w.find(b).addClass(m)}}}$("ul.js-nav-list-active").css("height","");$("ul."+m).innerHeight(App.SlideNavigation.getSizesForDecorLayerBlock.getMaxUlHeight(true));g.setDimensions();n();App.SlideNavigation.setScrollDecorLayer()});r.on("mouseleave",function(x){var v=$(this),w=$(".pn__layer-scroll");var u=v.parent();if(u.hasClass("pn__ill-1")){u.css({height:"auto"})}$("ul.js-nav-list-active").css("height","");$("ul."+m).innerHeight(App.SlideNavigation.getSizesForDecorLayerBlock.getMaxUlHeight(true));g.setDimensions();n();App.SlideNavigation.setScrollDecorLayer()})})}function n(){if(!$("html").hasClass("is-desktop")){return}var q=$("ul.pn__ill-1").children("li.js-nav-el-active").find("ul."+m).length;var s=$("li.js-nav-el-active ul.pn__box");if(q>1){var r=q*100;s.show();s.css({left:r+"%"})}else{s.hide()}}function c(){o=$(".pn__layer-scroll")}function f(){h=$(".pn__layer-decor")}return{init:function(){var s=this;$(window).on("load resize",function(t,u){d.css({width:"",height:"",display:""});d.find("ul").css({height:"",display:"",width:""});if($("html").hasClass("is-mobile")){d.find("span.is-active").removeClass("is-active");s.unwrapRootNavUl();if($(".rwd-footer").size()==0){s.setNavVisible_off();s.removeEvents_m()}else{g.init();i();n();s.removeEvents_td();c();f();s.setNavVisible()}}if($("html").hasClass("is-tablet")){s.wrapRootNavUl();g.init();i();s.removeEvents_td();c();f();s.setScrollDecorLayer();s.slideNavMobile_clear();s.setNavVisible()}if($("html").hasClass("is-desktop")){s.wrapRootNavUl();g.init();i();n();s.removeEvents_td();c();f();s.setScrollDecorLayer();s.slideNavMobile_clear();s.setNavVisible()}if(p){s.setScrollDecorLayer()}});$(window).on("onHeaderInit",function(){p=true;s.setScrollDecorLayer()});e.on("ready",function(){k();if($(".rwd-footer").size()==0){s.slideNavMobile_()}});function q(){$("li.js-nav-el-active").removeClass("js-nav-el-active");$("ul.js-nav-list-active").removeClass("js-nav-list-active");$(".pn__holder").removeClass("js-nav-visible");$(".pn__ill-1").css("height","")}var r=window.matchMedia("(orientation: portrait)");r.addListener(function(t){if(App.CommonCntr.isAndroid()){$(document).trigger("resize")}if(App.CommonCntr.isAndroid()||t.matches){q()}});$(window).on("resize",function(){k();App.SlideNavigation.setScrollDecorLayer();q();if($("html").hasClass("is-mobile")){App.SlideNavigation.unwrapRootNavUl()}})},defaultParentUlSizes:{_height:d.outerHeight(),_width:function(){return d.outerWidth(true)}},getSizesForDecorLayerBlock:{visibleActiveElementsLength:function(){var q=$("ul.pn__ill-1").children("li.js-nav-el-active").find("ul."+m).length+1;return q},getMaxUlHeight:function(r){var q=0;$("ul."+m).each(function(){if(q<$(this).outerHeight()){if(!r){q=$(this).outerHeight()}else{q=$(this).innerHeight()}}});return q}},unwrapRootNavUl:function(){var q=$(".pn__layer-decor");if(q.length){q.unwrap();d.unwrap()}},wrapRootNavUl:function(){return d.wrap(function(){if($(".pn__layer-decor").length){return false}else{return'<div class="pn__layer-scroll"><div class="pn__layer-decor"></div></div>'}})},slideNavMobile_:function(){$.each([0,1,2,3],function(s,r){var q="html.is-mobile .pn"+((r===0)?"__item-main-link":"__inl-"+r),t=".pn__ill-"+(r+1);$(document).on("click",q,function(w){var v=$(w.target),u=$("<a>",{"class":"js-link-second-click",href:($(this).data("href")||$(this).attr("href")),target:"_self",text:""});if(!v.parent().is(".not-has-menu")){w.preventDefault()}if($(q).is(".pn__item-main-link")){$(".pn__ill-1").slideToggle(200)}else{v.toggleClass("is-active");v.siblings(t).slideToggle(200);if(v.siblings(".js-link-second-click").length==0&&!v.parent("li").is(".not-has-menu")){v.after(u);v.css("padding-right",u.outerWidth())}}})})},slideNavMobile_clear:function(){$(".pn a.js-link-second-click").remove();$(".pn a.is-active").removeClass("is-active")},slideNavMobile:function(){$.each([0,1,2,3],function(s,r){var q="html.is-mobile .pn"+((r===0)?"__item-main-link":"__toggle-helper--"+r);$(document).on("click",q,function(v){var u=$(v.target);if(u.parent().hasClass("not-has-menu")){return false}u.toggleClass("is-active");var t=".pn__ill-"+(r+1);v.preventDefault();u.siblings(t).slideToggle(200)})})},removeEvents_m:function(){$.each([1,2,3],function(q,r){$(".pn__item-level-"+r).each(function(){$(this).off()})})},removeEvents_td:function(){$.each([0,1,2,3],function(r,q){$(".pn"+((q===0)?"__item-main-link":"__toggle-helper--"+q)).each(function(){$(this).off()})})},_setScrollDecorLayer:function(){var v=$(".pn__layer-decor"),s=$(".pn__layer-scroll"),u=$(window).innerHeight(),t=v.outerHeight(true),r=$(".pn__holder").position().top,q=u-r-20;if($("div.pn").is(".js-pn--fixed")){r=0}s.width(App.SlideNavigation.defaultParentUlSizes._width()*App.SlideNavigation.getSizesForDecorLayerBlock.visibleActiveElementsLength());if((t+r)>u){s.height(q)}else{s.height(v.height())}},setScrollDecorLayer:function(){var u=20,s=50,q=0,v,x,w,t;if(!h){f()}if(!o){c()}var r=App.SlideNavigation.defaultParentUlSizes._width();var y=App.SlideNavigation.getSizesForDecorLayerBlock.visibleActiveElementsLength();if(a.hasClass("js-pn--fixed")){q=a.height()}else{if(o.length){q=o.offset().top}else{q=0}}x=h.outerHeight(true);v=window.innerHeight;w=v-q-u;if((x+q)>=(v-u)){t=w}else{t=h.outerHeight();if(t<=s){t=l}}if((x+q)<=(v-u)||($("div.pn__layer-scroll").width()+App.DeviceOptions.getScrollbarWidth())>$(window).width()-20){o.width(r*y)}else{o.width(r*y+App.DeviceOptions.getScrollbarWidth())}o.height(t);if(undefined===l){if(t>s){l=t}else{l=241}}if(App.CommonCntr.isIOS()||App.CommonCntr.isAndroid()){o.css({overflow:"inherit"})}},setNavVisible_off:function(){$(".pn__item-main-link").off()},setNavVisible:function(){var r=$(".pn__holder"),s=$(".pn__item-main-link"),q=$(".pn__ill-1");s.on("click",function(){$("div.pn__layer-scroll").scrollTop(0);$(this).parent(r).toggleClass("js-nav-visible");$("li.js-nav-el-active").removeClass("js-nav-el-active");$("ul.js-nav-list-active").removeClass("js-nav-list-active");if(r.is(".js-nav-visible")){q.addClass(m)}else{q.removeClass(m)}g.setDimensions();$("ul."+m).innerHeight(App.SlideNavigation.getSizesForDecorLayerBlock.getMaxUlHeight(true));App.SlideNavigation.setScrollDecorLayer();q.css("height","");return false});$(document).on("click",function(t){if($(t.target).closest(r).length){return}$("div.pn__layer-scroll").scrollTop(0);if(r.hasClass("js-nav-visible")){$(".pn__holder").removeClass("js-nav-visible")}$("li.js-nav-el-active").removeClass("js-nav-el-active");$("ul.js-nav-list-active").removeClass("js-nav-list-active");q.css("height","")})}}})();if(App.CommonCntr.isOpera()){App.SlideNavigation.setNavVisible();$("html").addClass("no-js");if(!App.CommonCntr.isIOS()){$("ul.pn__ill-3").remove()}}else{if(!$("html").hasClass("is-homepage")){App.SlideNavigation.init()}};
(function(b){var a={selector:'a[class^="sn__inl"]:not("li.not-has-menu a"), a[class^="pn__inl"]:not("li.not-has-menu a"), a.b-tiles__nav-item-link'};a.isSame=function(d,c){return b(d).index(a.selector)==b(c).index(a.selector)};a.setLinkable=function(e,d){var c=b(e);if(d){c.attr("href",c.data("href"))}else{c.data("href",c.attr("href"));c.removeAttr("href")}};if((App.DeviceOptions.isTouch()||App.DeviceOptions.isWindowsTouch()||App.DeviceOptions.isIOS())){b(document).on("ready",function(c){a.prevTouched=c.target;b(a.selector).on({"touchstart pointerdown":function(d){b(d.target).attr("touch",true)}})})}if((App.CommonCntr.isAndroid()&&b(".rwd-footer").size()>0)||(App.CommonCntr.isAndroid()&&b(".rwd-footer").size()==0)&&!App.DeviceOptions.isMobile()||App.DeviceOptions.isWindowsTouch()||App.CommonCntr.isIOS()){b(document).on("ready",function(c){a.prevTouched=c.target;b(a.selector).on({click:function(d){if(!(App.DeviceOptions.isWindowsTouch()&&typeof b(d.target).attr("touch")=="undefined")){a.setLinkable(d.target,a.isSame(a.prevTouched,d.target));a.prevTouched=d.target;if(typeof b(d.target).attr("touch")!="undefined"){b(d.target).removeAttr("touch")}}}})})}if(App.CommonCntr.isAndroid()&&b(".rwd-footer").size()==0){b(".pn__item-main-link").attr("href","#")}})($);
(function(a){a.fn.menuAim=function(c){this.each(function(){b.call(this,c)});return this};function b(c){var d=a(this),q=null,g=[],r=null,p=null,s=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop},c);var j=3,f=300;var e=function(t){g.push({x:t.pageX,y:t.pageY});if(g.length>j){g.shift()}};var o=function(){if(p){clearTimeout(p)}if(s.exitMenu(this)){if(q){s.deactivate(q)}q=null}};var l=function(){if(p){clearTimeout(p)}s.enter(this);h(this)},k=function(){s.exit(this)};var m=function(){i(this)};var i=function(t){if(t==q){return}if(q){s.deactivate(q)}s.activate(t);q=t};var h=function(u){var t=n();if(t){p=setTimeout(function(){h(u)},t)}else{i(u)}};var n=function(){if(!q||!a(q).is(s.submenuSelector)){return 0}var x=d.offset(),t={x:x.left,y:x.top-s.tolerance},E={x:x.left+d.outerWidth(),y:t.y},G={x:x.left,y:x.top+d.outerHeight()+s.tolerance},y={x:x.left+d.outerWidth(),y:G.y},z=g[g.length-1],D=g[0];if(!z){return 0}if(!D){D=z}if(D.x<x.left||D.x>y.x||D.y<x.top||D.y>y.y){return 0}if(r&&z.x==r.x&&z.y==r.y){return 0}function A(I,H){return(H.y-I.y)/(H.x-I.x)}var C=E,u=y;if(s.submenuDirection=="left"){C=G;u=t}else{if(s.submenuDirection=="below"){C=y;u=G}else{if(s.submenuDirection=="above"){C=t;u=E}}}var v=A(z,C),B=A(z,u),F=A(D,C),w=A(D,u);if(v<F&&B>w){r=z;return f}r=null;return 0};d.mouseleave(o).find(s.rowSelector).mouseenter(l).mouseleave(k).click(m);a(document).mousemove(e)}})(jQuery);
App.SidebarNavCtrl=(function(){var g="js-sidebar-nav-list-active",e="js-sidebar-nav-el-active",p=$('div.pn li:not(".sn__il-1")'),l=$("div.pn li.sn__il-1"),d=$('div.pn ul:not(".sn__ill-1")'),f=$("div.pn ul.sn__ill-1"),r=$(document),m=$(window),k=false,o=$("html");var b=function(t){if(!t.hasClass("not-has-menu")){if(!t.hasClass(e)){t.addClass(e)}t.children("ul:first").addClass(g).end().parent().addClass(g)}};var n=function(t){t.siblings("li").removeClass(e);t.siblings("li").find("li."+e).removeClass(e);t.siblings("li").find("ul."+g).removeClass(g)};var h=function(){$("ul.js-sidebar-nav-list-active").css("height","");$('ul:not(".sn__ill-1").'+g).innerHeight(App.SidebarNavCtrl.getSizesForDecorLayerBlock.getMaxUlHeight(true))};var q=function(){var t=$(".b-home-page"),u=t.width();if(t.width()<l.width()*4){p.parent("ul").width((u-224)/3)}else{p.parent("ul").css("width","")}};var j=function(){if(App.DeviceOptions.isOpera()||App.DeviceOptions.isIOS()||App.DeviceOptions.isAndroid()){return}f.css("top","")};var a=function(){if(App.DeviceOptions.isOpera()||App.DeviceOptions.isIOS()||App.DeviceOptions.isAndroid()){return}var u=$(window).scrollTop(),t=u-App.FlyingNav.headerHeight-49;if((u>=App.FlyingNav.headerHeight)){f.css({top:-t})}else{f.css("top","")}};function c(){if(!o.hasClass("flag-slideNav")){$.each([0,1,2,3],function(w,u){var t="html.is-mobile "+((u===0)?".pn__item-main-link":".sn__inl-"+u),x=".sn__ill-"+(u+1);r.on("click",t,function(z){var y=$(z.target),v=$("<a>",{"class":"js-link-second-click",href:($(this).data("href")||$(this).attr("href")),target:"_self",text:""});if(!y.parent().is(".not-has-menu")){z.preventDefault()}if($(t).is(".pn__item-main-link")){$(".sn__ill-1").slideToggle(200)}else{y.toggleClass("is-active");y.siblings(x).slideToggle(200);if(y.siblings(".js-link-second-click").length==0&&!y.parent("li").is(".not-has-menu")){y.after(v);y.css("padding-right",v.outerWidth())}}})})}o.addClass("flag-slideNav")}function s(){$(".pn a.js-link-second-click").remove();$(".pn a.is-active").removeClass("is-active")}function i(){$.each([0,1,2,3],function(w,u){var t="html.is-mobile .pn"+((u===0)?"__item-main-link":"__toggle-helper--"+u);r.on("click",t,function(y){var x=$(y.target);if(x.parent().hasClass("not-has-menu")){return false}x.toggleClass("is-active");var v=".sn__ill-"+(u+1);y.preventDefault();x.siblings(v).slideToggle(200)})})}return{init:function(){m.on("load resize",function(){if(o.hasClass("is-mobile")){c();j()}if(o.hasClass("is-tablet")||o.hasClass("is-desktop")){s();q();$("li."+e).removeClass(e);$("ul."+g).removeClass(g);d.removeAttr("style");f.css("display","")}});m.on("load resize scroll",function(){if(o.hasClass("is-tablet")||o.hasClass("is-desktop")){a()}});r.on("mouseover",'html.is-tablet nav.pn__holder li:not(".sn__il-1"), html.is-desktop nav.pn__holder li:not(".sn__il-1")',function(u){var t=$(this);n(t);b(t);h()});r.on("click",'html.is-tablet div.pn li.sn__il-1:not(".not-has-menu"), html.is-desktop div.pn li.sn__il-1:not(".not-has-menu")',function(v){var t=$(this),u=t.hasClass(e);if(!u){v.preventDefault()}n(t);b(t);h();q()});r.on("click","html.is-tablet, html.is-desktop",function(t){if($(t.target).closest("div.pn").length){return}$("li."+e).removeClass(e);$("ul."+g).removeClass(g)})},getSizesForDecorLayerBlock:{visibleActiveElementsLength:function(){var t=$("ul.sn__ill-1").children("li.js-sidebar-nav-el-active").find("ul."+g).length+1;return t},getMaxUlHeight:function(u){var t=0;$("ul."+g).each(function(){if(t<$(this).outerHeight()){if(!u){t=$(this).outerHeight()}else{t=$(this).innerHeight()}}});return t}}}})();if($("html").hasClass("is-homepage")){App.SidebarNavCtrl.init()};
App.PopularBrandsCtrl=(function(){var b=$(".b-popular-brands__slider"),a=$("html");return{init:function(){if($(b).length){$(window).on("ready resize",function(){if(a.hasClass("is-mobile")||a.hasClass("is-tablet")){c()}else{d()}})}function d(){b.owlCarousel({singleItem:true,navigation:true,navigationText:false,pagination:false,transitionStyle:"fade"})}function c(){if(undefined!==b.data("owlCarousel")){b.data("owlCarousel").destroy()}}}}}());App.PopularBrandsCtrl.init();
App.FlyingNav=(function(){var g="js-pn--fixed",c="js-g-entrance-profile-similar--fixed",e="js-g-form--search--fixed",b="js-b-main-content--padding",d=$(".g-entrance-profile-similar"),f=$("ul.sn__ill-1"),a=$("html");return{init:function(){var k=this;var m,l,i=function(n){m=d.detach();l=$(n);l.find(".g-responsive-width").append(m)},h=function(n){if(n==="add"){$(".pn").addClass(g);d.addClass(c);if(a.hasClass("is-tablet")||a.hasClass("is-desktop")){$(".b-form--search").addClass(e)}$(".b-main-content").addClass(b)}else{if(n==="remove"){$(".pn").removeClass(g);d.removeClass(c);if(a.hasClass("is-tablet")||a.hasClass("is-desktop")){$(".b-form--search").removeClass(e)}$(".b-main-content").removeClass(b)}}};if(!App.DeviceOptions.isAndroid()&&!App.DeviceOptions.isIOS()){var j=$(window).scrollTop();if(j>=k.headerHeight){if(!$(".g-entrance-profile-similar").is(".js-g-entrance-profile-similar--fixed")){i(".pn__inner");h("add")}}else{if($(".g-entrance-profile-similar").is(".js-g-entrance-profile-similar--fixed")){i(".b-header-top__phone-entrance");h("remove")}}}},headerHeight:96}}());var $html=$("html");$(window).on("scroll load",function(){if(App.DeviceOptions.isOpera()){return false}if($html.hasClass("is-tablet")||$html.hasClass("is-desktop")){App.FlyingNav.init();$(window).trigger("onHeaderInit")}if($(".rwd-footer").size()==1){$(window).trigger("onHeaderInit");App.FlyingNav.init()}});$(window).on("load resize",function(a,b){if($html.hasClass("is-mobile")&&$("html.is-mobile div.b-main-content").is(".js-b-main-content--padding")){$("div.b-main-content").removeClass("js-b-main-content--padding")}});
App.TooltopController=(function(){return{init:function(){var a=this;$(window).on("load resize",function(b,c){if($("html").hasClass("is-tablet")){a.showCatalogTitleTooltip()}if($("html").hasClass("is-desktop")){a.showCatalogTitleTooltip()}});this.addToolTipElement();this.showFiltersTooltip()},addToolTipElement:function(){if($("span.js-g-tooltip").length>=1){return}$("body").append('<span class="js-g-tooltip"></span>');$(".js-g-tooltip").css({display:"none",position:"absolute"})},showFiltersTooltip:function(){$(document).on("mousemove",".b-filters__block label",function(g){var a,d=$("div.b-catalog").width(),b=$(".js-g-tooltip"),c=$("html"),f="js-g-tooltip--all-width";if($(this).hasClass("js-b-filters-not-active")){a=$(this).parents("ul").attr("data-tooltip")}else{if($(this).is(".b-filters__color-item-label")&&!c.is(".is-mobile")){a=$(this).attr("data-tooltip")}else{return}}b.text(a).stop(true,true).fadeIn(50);if(c.is(".is-mobile.no-touch")){b.css({left:10,top:g.pageY-b.outerHeight(true)-30,width:d-20}).addClass(f)}else{if(c.is(".is-mobile.touch")){b.css({left:10,top:g.pageY-b.outerHeight(true)-30,width:d-20}).addClass(f).delay(2500).fadeOut(50)}else{b.css({left:g.pageX+30,top:g.pageY-15}).removeClass(f)}}}).on("mouseout",".b-filters__block label",function(){$(".js-g-tooltip").fadeOut(50)})},showCatalogTitleTooltip:function(){$(".b-products-list__manufacturer-holder, .b-products-list__title-holder").css({"word-wrap":"","white-space":""});$(document).on("mousemove",".b-products-list__manufacturer-holder .b-products-list__manufacturer, .b-products-list__title",function(f){var b=$(".js-g-tooltip"),a=$(this).attr("data-tooltip"),d=$(this).parent(".b-products-list__manufacturer-holder, .b-products-list__title-holder").width(),h=$(this).offset().left,g=0,c=$(this).parent(".b-products-list__manufacturer-holder, .b-products-list__title-holder")[0];if(0>c.clientWidth-c.scrollWidth){b.text(a).stop(true,true).fadeIn(50).addClass("js-g-tooltip--catalog-title-top").css({left:h,top:f.pageY+20,"max-width":d-20});g=b.height();if($(window).height()<(b.offset().top-$(window).scrollTop())+g+20){b.removeClass("js-g-tooltip--catalog-title-top").addClass("js-g-tooltip--catalog-title-bottom").css({top:f.pageY-g-38})}}else{}}).on("mouseout",".b-products-list__manufacturer, .b-products-list__title",function(){$(".js-g-tooltip").fadeOut(50,function(){$(".js-g-tooltip").css({"max-width":""});$(this).removeClass("js-g-tooltip--catalog-title-top js-g-tooltip--catalog-title-bottom")})})}}}());App.TooltopController.init();
var app=angular.module("app",[]);app.config(["$interpolateProvider","$locationProvider","$httpProvider",function(b,a,c){b.startSymbol("[[");b.endSymbol("]]");if(!!(window.history&&history.pushState)){a.html5Mode(true)}c.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);app.run(["cookieService","productSettingService","$rootScope","$log","configConstant","$tm","$templateCache",function(e,d,c,f,g,b,a){window.ng=angular;window.$a=angular.element;window.cookieService=e;window.rootScope=c;window.productSettingService=d;window.log=f;window.configConstant=g;window.$tm=b;window.$templateCache=a}]);app.directive("compileHtml",["$compile",function compileHtml(a){return{restrict:"A",link:function(d,c,b){d.$watch(function(){return d.$eval(b.compileHtml)},function(e){c.html(e);a(c.contents())(d)})}}}]);
app.constant("configConstant",{COOKIE_NAME_UUID:"topmall_uuid"});
(function(){app.factory("$tm",[function(){var a;a=function(){return angular.element.apply(this,arguments)};a.$ng=function(){return angular.apply(this,arguments)};a.device=function(){var b=true;switch(b){case App.DeviceOptions.isMobile():return"mobile";case App.DeviceOptions.isTablet():return"tablet";case App.CommonCntr.isDesktop():return"desktop"}return false};a.isDesktop=function(){return App.CommonCntr.isDesktop()};a.device.is=function(b){switch(b){case"mobile":return App.DeviceOptions.isMobile();case"tablet":return App.DeviceOptions.isTablet();case"desktop":return App.CommonCntr.isDesktop()}return false};return a}])}());
app.controller("baseCtrl",["$scope","$rootScope","cookieService",function(b,a,c){b.submit=function(f){if(typeof b.query!="undefined"){f.target.submit()}};var e=document.createElement("div");e.style.cssText="width: 100px; height: 100px; overflow: scroll;position: absolute; top: -9999px;";document.body.appendChild(e);var d=e.offsetWidth-e.clientWidth;document.body.removeChild(e);a.scrollbarWidth=d;b.showPopupIfNotAuth=function(h,g,f){if(c.get("auth")!=1){a.showPopup(h);f.preventDefault()}};b.userMenuVisible=false;b.toggleUserMenu=function(){b.userMenuVisible=!b.userMenuVisible}}]);jQuery(function(a){a("div.b-home-page").closest("body").find("div.b-widgets").hide()});jQuery(function(c){var b=false;var a=function(i,h){if(b){clearTimeout(b)}var d=c(i.target);var f;f=c(".category-menu");if(d.is(".pn__main-cats, .pn__main-cats *, .pn__main-cats li a, .category-menu, .category-menu *,.mobile-menu-trigger")){if(d.is(".pn__main-cats")){b=setTimeout(function(){f.removeClass("category-menu--visible");h.data("sub-id","null")},200)}else{if(undefined!==d.data("sub-id")){if(h.data("sub-id")!=d.data("sub-id")){h.data("sub-id",d.data("sub-id"));var g=c("#sub-menu-"+d.data("sub-id"));if(g.length>0&&App.DeviceOptions.isDesktopPC()){i.preventDefault();if(d.hasClass("pn__active")){h.data("sub-id","null");f.removeClass("category-menu--visible");c(".sub-menu").addClass("is-hidden");c("#sub-menu-"+d.data("sub-id")).addClass("is-mobile-hidden");d.removeClass("pn__active")}else{if(g.hasClass("pn__main-cats")){d.addClass("pn__active");g.removeClass("is-mobile-hidden")}else{f.addClass("category-menu--visible");c(".sub-menu").not(g).addClass("is-hidden");g.removeClass("is-hidden")}}}else{if(g.length>0&&!App.DeviceOptions.isDesktopPC()){g.removeClass("is-mobile-hidden")}else{f.removeClass("category-menu--visible");c(".sub-menu").addClass("is-hidden")}}}else{if(i.type!="mouseover"){i.preventDefault();h.data("sub-id","null");f.removeClass("category-menu--visible");c(".sub-menu").addClass("is-hidden");if(c("#sub-menu-"+d.data("sub-id")).hasClass("pn__main-cats")){c("#sub-menu-"+d.data("sub-id")).addClass("is-mobile-hidden")}}}}if(d.is(".pn__main-cats li a")&&undefined===d.data("sub-id")){f.removeClass("category-menu--visible");c(".sub-menu").addClass("is-hidden")}}}else{f.removeClass("category-menu--visible");h.data("sub-id","null")}};c("body").on("mouseover",function(f){if(App.DeviceOptions.isDesktopPC()){var d=c(this);a(f,d)}}).on("click",function(f){if(!App.DeviceOptions.isDesktopPC()){var d=c(this);a(f,d)}})});jQuery(function(a){a(".pn__main-cats li a").each(function(){if(!App.DeviceOptions.isDesktopPC()){var d=a(this).attr("href").split("/");var c=d.indexOf("catalog");if(c!==-1){d[c]="oferta";var b=d.join("/");a(this).attr("href",b)}}})});
function getCookie(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");return a?a[2]:null}function setCookie(a,b,e){var c=new Date;c.setTime(c.getTime()+24*60*60*1000*e);document.cookie=a+"="+b+";path=/;expires="+c.toGMTString()}app.controller("popupCtrl",["$scope","$element","cookieService","$http","$timeout","$rootScope","$templateCache",function(d,c,f,g,e,b,a){d.content=null;d.errors=[];d.$watch("content",function(){d.model={};d.errors=[]});b.popupClosedRemove=function(){};d.$watchCollection("model",function(h,i){angular.forEach(h,function(k,j){if(typeof h!="undefined"&&typeof i!="undefined"&&typeof i[j]!="undefined"&&typeof h[j]!="undefined"&&i[j]!=h[j]){d.errors[j]=[];d.errors.global=[]}})});d.passtype="password";d.$watch("passtype",function(h){d.passtext=(d.passtype=="password")?"poka":"ukryj"});d.togglePasswordFieldType=function(){d.passtype=(d.passtype=="password")?"text":"password"};d.acceptAll=function(){if(true===$("#akceptuje-wszystkie")[0].checked){$("#zapoznalem-sie")[0].checked=true;d.model.newsletter=true;d.model.personalization=true}else{$("#zapoznalem-sie")[0].checked=false;d.model.newsletter=false;d.model.personalization=false}};d.showAdvice=function(){$(".g-popup__content-descr--advice").fadeIn(150)};d.hideAdvice=function(){$(".g-popup__content-descr--advice").fadeToggle(150)};d.$parent.showPopup=function(i,h){if(typeof(h)!="undefined"){h.preventDefault()}d.showPopup(i)};d.showPopup=function(j,i,h){d.local=i||{};h=h||function(){return true};if(h()){d.setPopupName(j);d.hidden=false}};d.$on("keyup",function(h,i){if(i.keyCode===27){d.close()}});d.inPopups=function(h){return(typeof a.get(h+".html")!="undefined")};d.getPopup=function(h){if(d.inPopups(h)){return h+".html"}else{return false}};d.setPopupName=function(h){d.popupName=h;var i=d.getPopup(d.popupName);if(i!=false){d.content=i}};d.close=function(h,i){d.socialError="";if(typeof i=="undefined"){i=0}e(function(){if(typeof h=="undefined"||$(h.target).is(".g-popup__close, .g-popup-wrapper, .ng-close-popup")){if(d.popupName=="use-info"){d.showPopup("registration")}else{d.hidden=true;d.content=null;e(function(){if(b.popupHidden){b.$broadcast("popupClosed",{popupName:d.popupName,local:d.local})}})}}},i)};$(document).on("click",".g-popup--registration .accord .label .red",function(){var h=$(this).closest(".accord").children(".content");$(".accord .content").not(h).addClass("hidden");h.toggleClass("hidden")});d.submit=function(h,j){if(typeof h!="undefined"){h.preventDefault()}$(".checkacc").closest(".label").removeClass("er");if($("#zapoznalem-sie").length>0&&false===$("#zapoznalem-sie")[0].checked){$("#zapoznalem-sie").closest(".label").addClass("er");return true}$(".auth-button").addClass("button--disabled");if(undefined!==d.errors){d.errors=[]}j=j||{scroll:false};if(j.scroll){$$(window).scrollTop()}var i={};angular.forEach(d.model,function(l,k){i[d.formName+"["+k+"]"]=l});i=$.param(i);if(d.popupName=="blik"){d.errors=[];d.message="Potwierd patno w telefonie";e(function(){loader.showIn(".g-popup__content-loader")})}g({method:"POST",url:d.action,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(m){$(".auth-button").removeClass("button--disabled");d.errors=m.errors;if(undefined!==d.message){d.message=false;e(function(){loader.hideOut(".g-popup__content-loader")})}if(typeof m.local!="undefined"&&typeof m.local.code!="undefined"){d.model.code=m.local.code}if(typeof m.showPopup!="undefined"){if(m.showPopup.name=="verify"){var k=Routing.generate("TopMallFrontendBundle_profile_loadVerifyForm",{contact_value:m.contact_value});g.get(k)}var l=m.showPopup.local||{};d.showPopup(m.showPopup.name,l);if(typeof m.showPopup.timeout!="undefined"){e(function(){if(typeof m.showPopup.redirectUrl!="undefined"){window.location.href=m.showPopup.redirectUrl}else{window.location.reload()}},0)}}})};angular.element(document).on("fb:login:success vk:login:success",function(){d.showPopup("sign-in-success");window.location.reload()});angular.element(document).on("fb:login:error vk:login:error",function(h,i){d.socialError="   "+((typeof i!="undefined")?"Facebook":"VKontakte")+"  .   .";d.$apply()});b.showPopup=function(h,j,i){d.showPopup(h,i)};d.mpHaveWallet=function(h){if(h===false){Masterpass.issuer.registrationEvent({walletId:"ChampionPLProd",returnUrl:d.local.redirectUrl,country:"PL",language:"pl"});d.masterPassHasNoWallet=true}d.close()};b.$on("popupClosed",function(h,i){if(i.popupName==="masterpass"&&undefined===d.masterPassHasNoWallet){location.href=d.local.redirectUrl}});b.closePopup=function(){d.close()};d.keyPressed=function(i){var h=false;if(i.keyCode==8||i.keyCode==37||i.keyCode==39||i.keyCode==13){h=true}if(i.keyCode==8&&d.model.code!==undefined&&d.model.code.length==5){d.model.code=d.model.code.replace(" ","")}if((48<=i.keyCode&&i.keyCode<=57)||(96<=i.keyCode&&i.keyCode<=105)){if(d.model.code!==undefined){h=d.model.code.length<7;if(d.model.code.length==3){d.model.code+=" "}}else{h=true}}if(i.keyCode==32){h=false}if(!h){i.preventDefault()}};d.paste=function(h){h.preventDefault()};d.$watch("model.code",function(h){if(undefined!==h){d.model.codeValid=/^\d{6}$/.test(h.replace(/\s+/,""))}});d.$watch("hidden",function(j){b.popupHidden=j;var i=angular.element("body");var k=angular.element(".g-popup-wrapper.ng-scope");if(j){i.removeClass("g-body--popup-visible");i.css({"margin-right":d.bodyOldMargin||0})}else{d.bodyOldMargin=i.css("margin-right");i.addClass("g-body--popup-visible");var h=b.scrollbarWidth;i.css({"margin-right":h})}})}]);
app.controller("subscribeCtrl",["$scope","$http","$rootScope",function(b,c,a){b.model={email:""};b.errors={global:{}};b.$watchCollection("model",function(d,e){angular.forEach(d,function(g,f){if(typeof d!="undefined"&&typeof e!="undefined"&&typeof e[f]!="undefined"&&typeof d[f]!="undefined"&&e[f]!=d[f]){b.errors.global=[]}})});b.submit=function(e){e.preventDefault();$(".check").removeClass("er");var d=false;$(".check input:first").each(function(g,h){if(false===h.checked){$(h).closest(".check").addClass("er");d=true}});if(true===d){return true}var f={};angular.forEach(b.model,function(h,g){f[b.formName+"["+g+"]"]=h});if(typeof exponea!=="undefined"&&$("#subscriber_email")[0].value!==""){exponea.track("newsletter_signup",{email:$("#subscriber_email")[0].value,newsletter:$("#chre").is(":checked"),personalization:$("#chre2").is(":checked")})}f=$.param(f);c({method:"POST",url:b.action,data:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(g){if(typeof g=="undefined"){g={}}if(typeof g.errors!="undefined"){b.errors=g.errors}else{b.errors={};if(typeof exponea!=="undefined"&&typeof g.email!=="undefined"){exponea.identify(g.email)}$(window).scrollTop($(window).scrollTop()-1);a.showPopup("simple",g)}})}}]);
app.directive("popup",function(){return function(a){a.close=function(b){if($(b.target).is(".g-popup__close, .g-popup-wrapper")){a.hidden=true}}}}).directive("removeClass",function(){return{restrict:"A",link:function(c,b,a){b.removeClass(a.removeClass)}}}).directive("close",function(){return function(c,b,a){b.addClass("ng-close-popup")}});app.directive("staticInclude",["$http","$templateCache","$compile",function(c,a,b){return{restrict:"A",replace:true,link:function(f,e,d){f.$watch("content",function(){var g=f.content;if(g!=null){c.get(g,{cache:a}).success(function(h){var i=$("<div/>").html(h).contents();e.html(i);b(i)(f)})}})}}}]);app.directive("fbInit",function(){return{restrict:"A",link:function(c,b,a){b.on("click",function(d){d.preventDefault();$("a.login-facebook").click();c.socialError=""})}}});app.directive("vkInit",function(){return{restrict:"A",link:function(c,b,a){b.on("click",function(d){d.preventDefault();c.socialError="";$("a.login-vkontakte").click()})}}});app.directive("aftHtml",function(){return{restrict:"A",link:function(c,b,a){if(typeof a.aftHtml!="undefined"){c.$watch(a.aftHtml,function(d){b.html(d)})}}}});app.directive("focusToggleClass",function(){return{restrict:"A",link:function(c,b,a){b.on("focus",function(){$(this).add($(this).parent()).addClass(a.focusToggleClass)}).on("blur",function(){$(this).add($(this).parent()).removeClass(a.focusToggleClass)})}}});app.directive("ngPlaceholder",function(){return{restrict:"A",link:function(c,b,a,d){a.$observe("ngPlaceholder",function(e){b.attr("placeholder",e)})}}});app.directive("ngPlaceholder",function(){return{restrict:"A",link:function(c,b,a,d){a.$observe("ngPlaceholder",function(e){b.attr("placeholder",e)})}}});
app.filter("makeRange",function(){return function(c){var d,b,a=[];switch(c.length){case 1:d=0;b=parseInt(c[0],10)-1;break;case 2:d=parseInt(c[0],10);b=parseInt(c[1],10);break;default:return c}for(var e=d;e<=b;e++){a.push(e)}return a}});
app.directive("ngAction",function(){return{restrict:"A",link:function(c,b,a){a.$observe("ngAction",function(d){b.attr("action",d)})}}});
App.BrandsPageController=(function(){return{letterSlider:function(){var a="is-active",e=function(f){$(".b-brands__label-item").removeClass(a);$(f).addClass(a)},d=$(".b-brands__letters-sort"),c=function(){var f=parseInt(d.css("margin-top"));if(isNaN(f)){f=0}d.css({marginTop:-b+f+4})};if(d.size()==0){return false}var b=0;$(".b-brands__label-item").on("click",function(){if($(this).hasClass("b-brands__label-item--inactive")||$(this).hasClass(a)){return}b=$($(this).attr("data-href")).position().top;c();e(this)});$(window).on("resize",function(){b=$($(".b-brands__label-item."+a).attr("data-href")).position().top;c()})},showBrandsTooltip:function(){var a=(function(){var n=150,f=$(window),j=$('<div class="b-brands__letters-list-popup is-mobile-hidden is-tablet-hidden" />'),p=false,d=0,b={},o,i,e,g;function c(q){return"brand"+q}function h(){if(d){clearTimeout(d)}e=false;i=false;p=false;j.fadeOut(50)}function m(q,u,r){var t,s;t=u.pageX+20;if((t+r)>(f.outerWidth()+10)){t=q.offset().left-r-20}s=u.pageY;o={left:t,top:s}}function l(r,s){var q=c(i);g={pageX:s.pageX,pageY:s.pageY};if(undefined!==b[q]){k(b[q],i,r)}}function k(r,s,q){if(!r||s!=i){return}if(!p){p=true;j.html(r)}m(q,g,j.outerWidth());j.stop(true,true).fadeIn(50).css(o)}return{init:function(){if(!$(".b-brands").length){return}j.appendTo("body");$(".b-brands__letters-list .item a").on("mouseenter",function(){var s=$(this);var r=s.data("brand_id");var q=c(r);if(undefined===b[q]){d=setTimeout(function(){$.ajax({url:"/ajaxbrands/popup/"+r+"/",type:"GET",dataType:"json",success:function(t){b[c(t.id)]=t.html;k(t.html,t.id,s)},error:function(){h()}})},n)}}).on("mousemove",function(q){if(!i){e=$(this);i=e.data("brand_id");if(!i){return}}l(e,q)}).on("mouseleave",function(){h()})}}})();a.init()}}}());App.BrandsPageController.letterSlider();App.BrandsPageController.showBrandsTooltip();
app.provider("cookieService",function(){var d=function(g,h,j,i){i=typeof i!=="undefined"?i:"/";i=(i=="!")?location.pathname:"/";var e="";if(j){var f=new Date();f.setTime(f.getTime()+(j*24*60*60*1000));e="; expires="+f.toGMTString()}document.cookie=encodeURIComponent(g)+"="+encodeURIComponent(h)+e+"; path="+i};var c=function(e){return this.get(e)!=null};var b=function(g,e){var j=encodeURIComponent(g)+"=";e=typeof e!=="undefined"?e:null;var f=document.cookie.split(";");for(var h=0;h<f.length;h++){var k=f[h];while(k.charAt(0)==" "){k=k.substring(1,k.length)}if(k.indexOf(j)==0){return decodeURIComponent(k.substring(j.length,k.length))}}return e};var a=function(e){this.set(e,"",-1)};return{$get:function(){return{has:c,get:b,set:d,remove:a}}}});
app.factory("miniCartService",["$http","$rootScope","$timeout","$q","configConstant","cookieService",function(f,g,a,d,b,c){var i={},h=function(){var j=d.defer();if(!c.has(b.COOKIE_NAME_UUID)){f.get(Routing.generate("TopMallFrontendBundle_auth_createTemporaryUser")).success(function(){j.resolve()})}else{j.resolve()}return j.promise},e=function(k){var j=d.defer();h().then(function(){f({method:"POST",url:Routing.generate("topmall_cart_cart_catalogadd"),data:k}).success(function(l){j.resolve(l)})});return j.promise};i.addItem=function(j){var k={productColor:j.id};if(j.size||false){k.productColorSize=j.size}g.$broadcast("catalog:productToBuy",j);if(undefined!==j.outStock&&true===j.outStock){g.showPopup("simple",{title:"   ",content:" ,      "})}else{e(k).then(function(n){var p=0,q=false,o,m=0;n.success=n.success||false;n.reject=n.reject||false;if(n.success){g.showPopup("mini-cart",n.cart);g.$broadcast("catalog:productToMiniCart");if(n.quantityText){g.quantityText=n.quantityText}}else{if(n.reject==="productColorHasManySizes"){if(n.productSizes){j.productSizes=n.productSizes;if(undefined!==j.d){j.d.resolve(j.productSizes)}a(function(){angular.element(".g-styled-select-size").trigger("refresh")});o=0;angular.forEach(j.productSizes,function(l){if(undefined!==l.stock){o+=l.stock}m+=0;if(undefined!==l.outStock){p+=1}});if(p===m&&p!==0){q=true}if(o>0&&!q){g.showPopup("choose-size",{product:j})}else{j.outStock=true}}}if(n.reject==="outStock"){j.outStock=true;g.showPopup("simple",{title:"Produkt nie jest dostpny w magazynie",content:"Niestety, w chwili gdy towary nie s dostpne"})}if(n.reject==="productSizeNotExists"){n.rejectMsg=n.rejectMsg||"Produkt nie jest dostpny w magazynie";g.showPopup("simple",{title:"Przykro nam, ale nie moesz zamwi tej liczby produktw.",content:n.rejectMsg})}if(n.reject==="exceededAllowableQuantityLimit"){n.rejectMsg=n.rejectMsg||"Produkt nie jest dostpny w magazynie";g.showPopup("simple",{title:"Przykro nam, ale nie moesz zamwi tej liczby produktw.",content:n.rejectMsg})}}})}return false};i.removeItem=function(m,k,j){var l=f({method:"GET",url:Routing.generate("topmall_cart_cart_removeandfetchcart",{id:m})});l.success(function(n){if(n.success){g.quantityText=n.quantityText;g.$broadcast("miniCart:remove",{productId:k,size:j})}});return l};return i}]);
app.service("rememberService",["$rootScope","$http",function(a,b){this.toggleProduct=function(d){var c=(d.isRemembered)?"TopMallFrontendBundle_remembered_removeByProductColorId":"TopMallFrontendBundle_remembered_create";var e=b.get(Routing.generate(c,{id:d.productId}));e.success(function(){a.$broadcast("fetchRemembered");d.isRemembered=!d.isRemembered});return e}}]);
app.service("productSettingService",["cookieService",function(a){this.get=function(){var b=a.get("product_setting");if(null!=b){return JSON.parse(a.get("product_setting"))}return{}};this.set=function(b){a.set("product_setting",JSON.stringify(b));return this};this.addObj=function(b,d){var c=b.objs||"";c=c.split(",");c=c.concat([d]);c=c.join(",");b.objs=c;return this};this.add=function(d,b){var c=this.get();c[d]={ppcs_id:b};this.addObj(c,d);return this.set(c)}}]);
(function(){app.service("ft",function(){var a=this;a.trimString=function(b){b=b.replace(/^-/,"");return b.replace(/-$/,"")};this.translit=function(c){if(undefined===c){return false}var g="-",e,d={"":"a","":"b","":"v","":"g","":"d","":"e","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":g,"":"y","":g,"":"e","":"yu","":"ya"," ":g,_:g,"`":g,"~":g,"!":g,"@":g,"#":g,"$":g,"%":g,"^":g,"&":g,"*":g,"(":g,")":g,"-":g,"=":g,"+":g,"[":g,"]":g,"\\":g,"|":g,"/":g,".":g,",":g,"{":g,"}":g,"'":g,'"':g,";":g,":":g,"?":g,"<":g,">":g,"":g},b="",f="";c=c.toLowerCase();for(e=0;e<c.length;e+=1){if(undefined!==d[c[e]]){if(f!==d[c[e]]||f!==g){b+=d[c[e]];f=d[c[e]]}}else{b+=c[e];f=c[e]}}b=a.trimString(b);return b};this.findByNameValue=function(e,b,d){var c=false;angular.forEach(e,function(g,f){if(g[b]===d){c=g}});return c}})}());
app.directive("miniCart",["$timeout","$rootScope","miniCartService","rememberService",function(b,a,d,c){return{restrict:"A",link:function(e){e.remove=function(f){d.removeItem(f.id,f.productId,f.size).success(function(g){if(g.success){if(g.cart.cartItems.length===0){a.closePopup()}e.local=g.cart||{}}})};e.removeItemByIndex=function(f){e.items.splice(f,1)};e.remember=function(f){return c.toggleProduct(f)}}}}]);
app.directive("widgetRemembered",["$rootScope","$timeout",function(a,b){return{restrict:"A",scope:true,link:function(e,d,c){e.count=parseInt(c.widgetRemembered);e.$watch("count",function(f){(f>0)?d.removeClass("hidden"):d.addClass("hidden")});a.$on("fetchRemembered",function(){$.ajax({url:Routing.generate("TopMallFrontendBundle_remembered_loadWidget",{page:1}),method:"get",success:function(f){commonController.initWidget("remembered-widget",f,1);b(function(){e.count=f.count})}})})}}}]);
(function(){app.directive("sizeTable",["$timeout","ft","$tm",function(b,c,a){return{restrict:"A",replace:true,link:function(n,i){i.find("select.g-styled-select").styler();var e,f=function(p){var o=false;angular.forEach(p,function(q){if(false===o){o=q}if(true===q.selected){o=q}});return o},g=function(p,o){o.find("#brand-size-select option").not("[value=hint], [value=all]").each(function(q){p.brands.push({name:this.innerHTML,value:this.value,selected:this.selected,index:q,table:angular.element("table","#"+this.value.replace("'","\\'"))})})},l=function(o){n.tables=[];o.find("#size-table-tabs-menu li a, .tabNavigation li a").each(function(){var q=angular.element(this),p;angular.element("table tr",angular.element(this).attr("href")).each(function(){if($$.trim(angular.element(this).text())===""){angular.element(this).addClass("toRemove")}});angular.element(".toRemove",angular.element(this).attr("href")).remove();p=angular.element("table:last",angular.element(this).attr("href"));if(p.length===0){p=angular.element("table")}n.tables.push({name:this.innerHTML,table:p,selected:q.parent().is(".selected")})})},m=function(o){o.cols=[];angular.forEach(o.tables,function(q,p){var r=[],s=[];if($$.trim(q.table.find("tr").text())!==""){angular.forEach(q.table.find("tr"),function(u,t){angular.forEach(angular.element(u).find("th, td"),function(w,v){if(undefined===r[v]){r[v]=[]}r[v][t]=angular.element(w).text()})});if(i.find(".invert").length>0){angular.forEach(r,function(t,u){angular.forEach(r,function(w,v){if(undefined!==r[v][u]){if(undefined===s[u]){s[u]=[]}s[u][v]=r[v][u]}})});r=s}o.cols.push({col:r,selected:q.selected,name:q.name,value:c.translit(q.name),index:p,table:q})}})},h=function(A,q){var y,v,u,r,o,B,z,p,x=[],w=function(){var D,C=false,t,s=0;for(D=0;D<o;D+=1){if(!(D>=p*B&&D<(p+1)*B)){angular.element("td:eq("+D+")",this).addClass("toRemove")}}};if(A.brands.length>0){if(undefined===A.brand){A.brand=f(A.brands).value}y=angular.element("table","#"+A.brand.replace("'","\\'").replace(" ","\\ "));v=y.first();r=y.last();u=v.find("tr:eq(0) td").length;o=r.find("tr:eq(0) td").length;B=o/u;for(p=0;p<u;p+=1){z=r.clone();z.find("tr").each(w);z.find(".toRemove").remove();x.push({name:v.find("tr:eq(0) td:eq("+p+")").text(),s:p*B,ss:(p+1)*B,table:z})}angular.element(".table-place").html("");angular.element(".table-place").append('<div id="size-table-tabs-menu"></div>');for(p=0;p<x.length;p+=1){angular.element(".table-place #size-table-tabs-menu").append(angular.element('<li><a href="#sex'+p+'">'+x[p].name+"</a></li>"));angular.element(".table-place").append(angular.element('<div id="sex'+p+'"></div>'));angular.element("#sex"+p).append(x[p].table);if(A.current===c.translit(x[p].name)){angular.element("#sex"+p).parent().addClass("selected")}}}},d=function(){if(undefined!==n.col){n.width=angular.element(".g-popup--size-table").width()-40;n.maxColsCount=Math.floor((n.width-158)/79);n.vv=Math.ceil((n.col.length-1)/n.maxColsCount)}},k=function(p,o){h(p,i);if(p.brands.length===0){i.find(".table-place .is-title").closest("table").remove()}l(i);m(p);e=f(p.cols);p.col=e.col;p.current=e.value;d();b(function(){i.find(".g-styled-select").trigger("refresh")})},j=function(){angular.forEach(i.find("table"),function(s){var o=angular.element(s).clone(),q=[],r,p=0,t;angular.element.each(o.find("tr:first td"),function(u){var v;if(undefined!==angular.element(this).attr("rowspan")){angular.element(this).attr("rowspan",1);o.find("tr:eq(1) td").eq(u).before("<td></td>")}t=angular.element(this).attr("colspan");if(undefined!==t){angular.element(this).attr("colspan",1);for(v=0;v<t;v+=1){angular.element(this).before(angular.element(this).clone())}angular.element(this).remove();q.push({index:p,text:angular.element(this).text()});p=p+window.parseInt(t)-1}p+=1});for(r=0;r<q.length;r+=1){o.find("tr").each(function(u){var v="#4";if(u===1){v=q[r].text}angular.element(this).find("td").eq(q[r].index).before("<td>"+v+"</td>")})}angular.element.each(o.find("tr:first td"),function(u){var w,v;w=o.find("tr:first td").eq(u);v=o.find("tr:eq(1) td").eq(u);if($$.trim(v.text())!==""){if(o.find("tr:first td").eq(u).length>0&&o.find("tr:eq(1) td").eq(u+1).length>0&&o.find("tr:eq(1) td").eq(u+1).text()===o.find("tr:eq(1) td").eq(u).text()){v.text(w.text())}else{w.text(v.text())}}});o.find("tr:eq(1)").remove();angular.element(s).replaceWith(o)})};n.brands=[];n.isHide=function(){return undefined!==n.col[n.vv*n.maxColsCount+n.maxColsCount]};n.$watch("local.table",function(q,p){angular.extend(n,{chunked:[],col:[],cols:[],tables:[],brands:[],rwCol:false});i.find(".table-place").html(n.local.table.html);if(i.find(".table-place").find(".b-info-popup-title").length>0){n.local.title=i.find(".table-place").find(".b-info-popup-title").text()}else{n.local.title=" "}g(n,i);if(n.hasBrands()){n.$watch("brand",function(s,r){i.find(".table-place").html(n.local.table.html);k(n,true)})}else{k(n,false)}});n.$watch("current",function(q,p){if(undefined!==q&&undefined!==p&&q!==p){c.findByNameValue(n.cols,"value",q).selected=true;c.findByNameValue(n.cols,"value",p).selected=false;n.col=f(n.cols).col;n.selected=f(n.cols);d()}});n.hasBrands=function(){return(n.brands.length>0)};n.hasCols=function(){return(undefined!==n.cols)&&(n.cols.length>0)};n.until=function(p,q,o){var r=1;while(true){q+=1;if(undefined!==p[q]&&undefined!==p[q][o]){if(p[q][o]==="#4"){r+=1}}else{break}}return r};n.$watch("selected",function(){var o,p=0;b(function(){if(undefined!==n.col){o=f(n.cols);if(o&&undefined!==o.table&&undefined!==o.table.table){b(function(){angular.element(".non-responsive").html(f(n.cols).table.table.html())});f(n.cols).table.table.find("td").each(function(){var s=angular.element(this),q=s.attr("colspan"),t=s.attr("rowspan");if(undefined!==q&&window.parseInt(q,10)>0){p+=1}if(undefined!==t&&window.parseInt(t,10)>0){p+=1}});n.rwCol=(p>0)}}})});angular.element(window).bind("resize",function(){d();n.$apply()});n.$watch("rwCol",function(q,p){b(function(){function o(r,s){var t=0;if(s.type=="scroll"){t=a(".has-non-responsive").scrollLeft()}r.css("margin-left",t)}a(".has-non-responsive").on("scroll",function(r){o(a(".g-popup__content-form"),r)});a(".has-non-responsive").on("resize",function(r){o(a(".g-popup__content-form"),r)});a(".has-non-responsive").on("scroll",function(r){o(a(".b-size-table-selects"),r)});a(".has-non-responsive").on("resize",function(r){o(a(".b-size-table-selects"),r)})})})}}}]);app.directive("ntl",function(){return{restrict:"A",link:function(c,b,a){if(window.parseInt(a.ntl,10)!==1){b.attr("colspan",a.ntl);b.addClass("text-align-center")}}}})}());
(function(){app.directive("jsonInit",function(){return{restrict:"A",link:function(c,b,a){c=angular.extend(c,angular.fromJson(a.jsonInit))}}});app.directive("unwrap",["$timeout",function(a){return{restrict:"A",scope:{unwrap:"="},link:function(d,c,b){if(true===d.unwrap){a(function(){c.unwrap()})}}}}]);app.directive("include",["$http","$templateCache","$compile",function(c,a,b){return{restrict:"A",link:function(f,e,d){var g=f.$eval(d.include);c.get(g,{cache:a}).success(function(h){e.replaceWith(b(h)(f))})}}}])}());
function getAjaxUrl(a){if(typeof(ajax_urls)=="undefined"){return false}if(typeof(ajax_urls[a])!="undefined"){a=ajax_urls[a]}if(typeof(cache)!="boolean"){cache=false}return a}function ajax_query(b,d,c,a){if(typeof(ajax_urls)=="undefined"){return false}if(typeof(ajax_urls[b])!="undefined"){b=ajax_urls[b]}if(typeof(a)!="boolean"){a=false}$.ajax({url:b,data:d,success:c,cache:a})}function ajax_query_post(a,c,b){if(!a.length){return false}if(typeof(ajax_urls[a])!="undefined"){a=ajax_urls[a]}$.ajax({url:a,data:c,type:"POST",success:b})}$.fn.serializeObject=function(){var c={};var b=this.serializeArray();$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c};
var commonController=(function(d,c){var b=this,f,e,g,a=[{name:"remembered",url:"/ajax/remembered/loadWidget/?page="},{name:"compare",url:"/compare/load/widget/?page="}];f=function(i,l,k){var j=1,h=1;d("#"+i+" .b-remembered-slider .b-remembered-container").html(l.html);d("#"+i+" .b-remembered-button__quantity").html(l.count);d("#"+(i.split("-")[0])+"-header-btn .items-quantity").text(l.count);if(!l.count){d("#"+(i.split("-")[0])+"-header-btn").parent(".b-widgets-top").addClass("hidden")}else{d("#"+(i.split("-")[0])+"-header-btn").parent(".b-widgets-top").removeClass("hidden")}if(l.count<=3){d("#"+i).find(".widget-pager-btn").addClass("hidden");d("#"+i).find(".button-img").addClass("hidden")}else{d("#"+i).find(".widget-pager-btn").removeClass("hidden");d("#"+i).find(".button-img").removeClass("hidden")}if(l.count){d("#"+i).removeClass("hidden");if(d("#compare-widget").hasClass("comparealone")){d("#compare-widget").removeClass("comparealone");d("#compare-widget").addClass("compare")}}if(l.count-l.limit+1===k){j=k;d("#"+i+" .button-right").removeClass("active");d("#"+i+" .button-left").addClass("active")}else{j=k+1;d("#"+i+" .button-right").addClass("active")}if(k==1){h=1;d("#"+i+" .button-right").addClass("active");d("#"+i+" .button-left").removeClass("active")}else{h=k-1;d("#"+i+" .button-left").addClass("active")}if(l.count<=l.limit){d("#"+i+" .button-right, #"+i+" .button-left").removeClass("active")}d("#"+i+" .button-left").attr("href","#"+h);d("#"+i+" .button-right").attr("href","#"+j)};e=function(){var i=function(){d(this).find(".b-remembered-top").removeClass("hidden")},h=function(){d(this).find(".b-remembered-top").addClass("hidden")};d.each(a,function(j,k){var l=d("#"+k.name+"-widget");if(l.length>0){l.hover(i,h);l.find(".b-remembered-button").hover(function(){if(l.find(".b-remembered-container .b-remembered-item").length===0){d.ajax({url:k.url+1,method:"get",success:function(m){l.find(".b-remembered-slider .b-remembered-container").html(m.html)}})}});l.find(".button-left, .button-right").click(function(n){var m;n.preventDefault();if(d(this).hasClass("active")){m=c.parseInt(d(this).attr("href").split("#")[1],10);d.ajax({url:k.url+m,method:"get",success:function(o){f(k.name+"-widget",o,m)}})}})}})};g=function(){d(c.document).ready(function(){e()})};g();return{removeFromRemembered:function(h){d.ajax({url:"/ajax/remembered/remove/?id="+h,method:"get",success:function(){var i=d('[onclick$="removeFromRemembered('+h+')"]');d(".b-remembered-button__quantity",i.closest(".b-remembered-box")).html(c.parseInt(d(".b-remembered-button__quantity",i.closest(".b-remembered-box")).html(),10)-1);if(c.parseInt(d(".b-remembered-button__quantity",i.closest(".b-remembered-box")).html(),10)===0){d("#remembered-widget .b-remembered-slider .b-remembered-container").html('<div class="empty-widget-hint">   </div>')}i.closest(".b-remembered-item").remove();d.ajax({url:"/ajax/remembered/loadWidget/?page=1",method:"get",success:function(j){f("remembered-widget",j,1)}})}})},removeFromCompare:function(h){d.ajax({url:"/compare/remove/?id="+h,method:"get",success:function(){var i=d('[onclick$="removeFromCompare('+h+')"]');i.closest(".b-remembered-box").find(".b-remembered-button__quantity").html(c.parseInt(i.closest(".b-remembered-box").find(".b-remembered-button__quantity").html(),10)-1);if(c.parseInt(d(".b-remembered-button__quantity",i.closest(".b-remembered-box")).html(),10)===0){d("#compare-widget .b-remembered-slider .b-remembered-container").html('<div class="empty-widget-hint">   </div>')}i.closest(".b-remembered-item").remove();d.ajax({url:"/compare/load/widget/?page=1",method:"get",success:function(j){f("compare-widget",j,1)}})}})},initWidget:f}}(jQuery,window));
$(".orders-table__item").click(function(a){if($(this).hasClass("orders-table__item--open")==false){$(".orders-table__item").removeClass("orders-table__item--open");$(this).addClass("orders-table__item--open");$(".orders-table__item-details").hide();$(this).children().next().show();$(this).children().next().append("<p>wczytuj dane</p>");var b=$(this).children().next();$.ajax({type:"POST",url:Routing.generate("TopMallFrontendBundle_ajax_order_details",{id:$(this).attr("data-id"),orders_history:true}),success:function(c){b.html(c)}})}else{$(".orders-table__item").removeClass("orders-table__item--open");$(".orders-table__item-details").hide()}});function updateDefaultAddress(a){$.ajax({type:"POST",url:Routing.generate("TopMallFrontendBundle_ajax_address_update_default",{id:a}),success:function(b){$(".user-addresses__card").removeClass("user-addresses__card--default");$("#addressDefaultButton_"+a).parent().parent().addClass("user-addresses__card--default");$(".user-addresses-card__actions").children().next().show();$(".user-addresses-card__actions").children().show();$("#addressDefaultButton_"+a).hide();$("#addressDefaultButton_"+a).prev().hide()}})}function deleteAddress(a){$.ajax({type:"POST",url:Routing.generate("TopMallFrontendBundle_ajax_address_delete",{id:a}),success:function(b){$("#addressDefaultButton_"+a).parent().parent().hide()},error:function(d,b,c){}})}(function(c){var a=false;var b=function(k,g){if(!a){var d=g.parent().next();var m=(k=="next")?1:-1;var h=g.closest(".promoted-products__category").find(".b-tiles__block-item");var f=h.data();var e=parseInt(g.parent().parent().attr("data-id"));var l=null;var j;var i=f.page+m;if(i>f.count){i=1}if(i<1){i=f.count}a=true;if(undefined!==g.parent().parent().attr("data-type")){j=g.parent().parent().attr("data-type")}else{j=(e==0)?"popular":"bestseller"}if(undefined!==g.parent().parent().attr("data-ppcId")){l=g.parent().parent().attr("data-ppcId");e="undefined"}if(undefined!==e&&e!=0){c.ajax({type:(e==0)?"POST":"GET",url:Routing.generate((e==0)?"TopMallFrontendBundle_ajax_get_products":"topmall_frontendnew_homepage_navblock",{type:j,category:e,ppcId:l,page:i,perPage:6}),success:function(n){d.html(n);c(window).trigger("view");a=false}})}}};c.each(["next","prev"],function(e,d){c(".promoted-products-"+d).on("click",function(){var f=c(this);b(d,f)})})}(jQuery));
errorController=function(){var a=this;this.init=function(){$(window).resize(a.hideHintError)};this.inputErrorMessageTempalate=function(c){var b=c;return b};this.showInputError=function(b,c){if(!$(b).parent().hasClass("relative-inlineb")){$(b).wrap('<div class="relative-inlineb">')}$(b).parent().append(c)};this.showCustomInputError=function(b,c){if(!$(b).parent().hasClass("relative-inlineb")){$(b).wrap('<div class="relative-inlineb">')}if(!$(b).parent().find(".error").not(":input").length){$(b).parent().append('<label for="'+$(b).attr("id")+'" generated="true" class="error" style="display: none;"></label>')}$(b).parent().find(".error").not(":input").text(c);$(b).parent().find(".error").not(":input").show();$(b).addClass("error")};this.hideInputErrors=function(){$(".form-error").remove()};this.showPopup=function(h,g,e,d,c,b,f){if(typeof(e)=="undefined"){e={}}if(typeof(d)=="undefined"){d="error"}if(typeof(h)=="undefined"){h=""}if(typeof(c)=="undefined"){c=380}if(typeof(b)=="undefined"){b=200}if(!$("#error-dialog").length){var i="<div id='error-dialog' class='"+d+"'>";$("body").append(i);$("#error-dialog").dialog({resizable:false,draggable:false,width:c,height:b,modal:true})}if(f){$("#error-dialog").dialog("option","dialogClass","dialog-transparent")}if(e){$("#error-dialog").dialog("option","buttons",e)}if(h){$("#error-dialog").dialog("option","title",h)}$("#error-dialog").html(g);$("#error-dialog").dialog("open")};this.showPopupWithHtml=function(h,d,g,e,b,f){if(typeof(e)=="undefined"){e=380}if(typeof(b)=="undefined"){b=200}if(!$("#error-dialog").length){var i="<div id='error-dialog'>";$("body").append(i);$("#error-dialog").dialog({resizable:false,draggable:false,width:e,height:b,modal:true})}if(g){$("#error-dialog").dialog("option","dialogClass","dialog-transparent")}if(typeof(f)=="undefined"){d=this.getPopupHtml(h,d)}$("#error-dialog").html(d);$("#error-dialog").dialog("open");if($.browser.msie){if($.browser.version=="7.0"){var c=document.getElementById("error-dialog");c.style.left="-"+($("#error-dialog").children().outerWidth()/2)+"px";$("#error-dialog").dialog("close");$("#error-dialog").dialog("open")}}};this.closePopup=function(){$("#error-dialog").dialog("close");return false};this.getPopupHtml=function(c,b){return'<div style="display:block;" class="b-info-popup"><div class="b-info-popup-bg"></div><div class="b-comment-popup-middle clearfix"><a id="popup-close-btn" href="#" class="b-comment-popup-close"></a><div class="b-info-popup-title">'+c+'</div><div class="separator"></div><p class="b-info-popup-text ">'+b+'</p><div class="separator"></div><a id="popup-yes-btn" class="b-comment-popup-submit-comment-button"></a><a id="popup-no-btn" class="b-comment-popup-cancel-comment-button"></a></div></div>'};this.showPopupTest=function(){return a.showPopup("test",{"Delete all items":function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}})};this.showHintError=function(e,n,w,t,p,x){var c=$(e);var l=$(e).attr("id");if($("#error-hint-"+l).length){return false}var q=(l!="undefined")?"error-hint-"+l:false;function i(){$("#error-hint-"+l).hide()}if(typeof(n)=="undefined"){var f=c.attr("hint");n=f?f:""}if(typeof(w)=="undefined"){var j=c.attr("hintpos");w=j?j:"left"}if(typeof(t)=="undefined"){var v=c.attr("hintstyle");t=v?v:""}if(typeof(p)=="undefined"){p=0}var b=0;var h=0;if(typeof(p)=="object"){if(typeof(p.left)!="undefined"){b=p.left}if(typeof(p.top)!="undefined"){h=p.top}p=0}this.hideHintError();var d=10,r=127,k=c.outerWidth(),s=c.outerHeight(),g=c.offset().top-7,u=c.offset().left;switch(w){case"left":g+=h;u=u+k+d+p+b;break;case"right":g+=h;u=u-d-r+p+b;break;case"top":g+=s+(d*2)+p+h;u=u-(r/2)+(k/2)+b;break;case"bottom":g=g-s-21-p+h;u=u-(r/2)+(k/2)+b;break;default:u+=k+d}if(w=="right"){g=g-4;u=u-4}var m="<div "+((q)?('id="'+q+'"'):(""))+' class="error-hint '+((typeof(x)!="undefined")?("stable"):(""))+" "+t+" position-"+w+'" style="top:'+g+"px; left:"+u+'px; z-index:150;"><i class="popup-triangle"></i><div class="error-hint-content">'+n+"</div></div>",o=$(m).appendTo("body");if(w=="bottom"){if((n.length>21)&&(n.length<28)){$(".popup-triangle").addClass("big2")}if(n.length>=28){$(".popup-triangle").addClass("big3")}}};this.hideHintError=function(b){if($(b).length){if($(b).attr("id")!="undefined"){$("#error-hint-"+$(b).attr("id")).remove()}else{$(".error-hint:not(.stable)").remove()}}else{$(".error-hint:not(.stable)").remove()}};this.showPopover=function(d,f,b,e,c){this.destroyPopover($(d));if(typeof(c)=="undefined"){var c="manual"}$(d).popover({html:true,placement:b,offset:5,trigger:c,delay:{show:500,hide:100},template:'<div class="popover'+(e?" "+e:"")+'"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return"<span>"+f+"</span>"}});$(d).popover("show")};this.hidePopover=function(b){$(b).popover("hide")};this.destroyPopover=function(b){$(b).popover("destroy")}};errorController=new errorController();$(function(){errorController.init()});
commonController=function(){var c=this;var a=false;var b=500;this.remind_btn_flag=false;this.reset_btn_flag=false;this.verify_btn_flag=false;this.verify_href_flag=false;this.widget_show_time=0;this.widget_delay={compare:false,remembered:false};if((typeof(window.opera)!="undefined"&&opera.version()<15)||(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&parseInt(navigator.userAgent.toLowerCase().split("msie")[1])<10)){$("ul.pn__ill-3").remove()}this.search=function(d){if(typeof d=="undefined"){d=""}if($("#"+d+"search_header").val()==$("#"+d+"search_header").attr("placeholder")||$("#"+d+"search_header").val()==""){return false}$("#"+d+"search").submit();return false},this.placeholder=function(e,d){if(e.val()&&e.val().length!=0||typeof(d)!="undefined"&&d){e.parent().find(".holder").hide()}else{e.parent().find(".holder").show()}},this.subscribe=function(d){setTimeout(function(){$.ajax({url:d.attr("action"),data:d.serialize(),type:"POST",dataType:"json",success:function(e){if(e.status==0){$("#tm-subscribe-content").html(e.content)}else{$("#subscribe-email-error").html("");$("#subscriber_email").val("")}c.placeholder($("#subscriber_email"));a=false},error:function(h,e,g,f){$("#subscribe-email-error").html(" !   .");a=false}})},b)},this.initLazyLoad=function(){if($(".lazy-load-image-main-page").length&&$.fn.lazyload!="undefined"){$(".lazy-load-image-main-page").lazyload({effect:"fadeIn",threshold:500,skip_invisible:false})}};this.init=function(){this.initLazyLoad();$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(f){if(!this.options.title){f.html("&#160;")}else{f.html(this.options.title)}}}));$.ui.dialog.prototype.options.autoReposition=true;$(window).resize(function(){$(".ui-dialog-content:visible").each(function(){var f=$(this).data("ui-dialog");if($(window).width()>599){var g=560}else{var g=320}if(f.options.autoReposition){f.option("position",f.options.position);f.option("width",g)}})});$("#tm-subscribe-content").on("submit","form",function(f){f.preventDefault();if(a===false){a=true;c.subscribe($(this))}});$(document).on("click",".supplier-info-btn",function(g){var f=$(this).attr("url");if(f==$("#supplier-info-container").attr("url")){$("#supplier-info-container").removeClass("hidden");return false}ajax_query(f,{},function(h){if(!$("#supplier-info-container").length){$("body").append('<div id="supplier-info-container" class="hidden"></div>')}setTimeout(function(){$("#supplier-info-container").attr("url",f).html(h).removeClass("hidden");$(".scroll-pane").jScrollPane({showArrows:true,horizontalGutter:7,verticalGutter:4});$(".text-page a, .b_popup_user_settings .content a").each(function(){var i=!!$(this).children("span").length,j=$(this);if(i){j.css({color:j.find("span").css("color")})}})},50);$("#supplier-info-container").click(function(j){var i=j.target.className;if(i=="overlay"||i=="close_ico close-btn"||i=="close_btn close-btn"){$("#supplier-info-container").addClass("hidden");return false}})});return false});$(document).on("keydown",function(g){var f=$("#supplier-info-container").hasClass("hidden");if(g.keyCode===27){if(!f){$("#supplier-info-container").addClass("hidden")}}});var d="auth";$("#con_tab-2").on("click","a.secured, input:button.secured",function(g){if(typeof d=="undefined"||$.cookie(d)==null){g.preventDefault();var f=angular.element("body").scope();f.showPopup("sign-in");f.$apply()}});$(window).scroll(function(){errorController.hideHintError($("#compare-widget"))});$(document).on("click",".b-show-password",function(){var f=$(this).parent().find(".password-input-visible");var g=$(this).parent().find("input:first");if(f.hasClass("hidden")){f.removeClass("hidden");g.addClass("hidden");f.val(g.val());f.attr("name",g.attr("name"));g.removeAttr("name")}else{f.addClass("hidden");g.removeClass("hidden");g.val(f.val());g.attr("name",f.attr("name"));f.removeAttr("name")}});$("#main-menu-container .front-menu-category, #scroll-main-menu-container .front-menu-category").mouseenter(function(){if($(this).find(".front-menu-submenu").length){$(this).addClass("active");if(window.PIE){$(".front-menu-submenu").each(function(){PIE.attach(this)})}return false}$(this).addClass("hover")}).mouseleave(function(){if(window.PIE){$(".front-menu-submenu").each(function(){PIE.detach(this)})}$(this).removeClass("hover");$(this).removeClass("active")});$("#search_header").keypress(function(f){if(f.which==13){if($(this).val()==""){f.preventDefault()}else{}}});$(document).delegate("click",".dialog-close-btn",function(){$("#dialog-container").dialog("close");return false});if($("#remembered-widget").hasClass("hidden")){$("#compare-widget").removeClass("compare");$("#compare-widget").addClass("comparealone")}var e=this;$(document).keydown(function(f){if(f.which==27&&$("#holder").is(":visible")){commonController.hideLoginRegisterForm();if(typeof checkoutController!="undefined"){checkoutController.closeAdressList()}}});$(".holding input, .holding textarea").each(function(){c.placeholder($(this))});$(document).on("contextmenu",".holder",function(){return false});$(document).on("mousedown",".holder",function(f){if(f.button==2){f.preventDefault();$(this).hide().parent().find("input,textarea").focus().trigger("contextmenu")}});$(document).on("mouseup",".holder",function(){$(this).parent().find("input").focus();$(this).parent().find("textarea").focus()});$(document).on("keydown",".holding input,.holding textarea",function(){var f=($(this).val().length==0)?true:false;c.placeholder($(this),f)});$(document).on("input",".holding input,.holding textarea",function(){c.placeholder($(this))});$(document).on("focus",".holding input,.holding textarea",function(){$(this).closest(".holding").find(".holder").addClass("focused")});$(document).on("blur",".holding input,.holding textarea",function(){$(this).closest(".holding").find(".holder").removeClass("focused");c.placeholder($(this))});$("#profile-button").mouseenter(function(){$("#profile").fadeIn("fast")});$(".profile-top").mouseleave(function(){$("#profile").fadeOut("fast")});$("#compare-widget .b-remembered-button").hover(function(){clearTimeout(e.widget_delay.compare);e.widget_delay.compare=setTimeout(function(){if($("#compare-widget .b-remembered-container .b-remembered-item").length==0){c.loadCompareWidget(1)}$("#compare-widget .b-remembered-top").removeClass("hidden");errorController.hideHintError($("#compare-widget"))},e.widget_show_time)});$("#remembered-widget .b-remembered-button").hover(function(){clearTimeout(e.widget_delay.remembered);e.widget_delay.remembered=setTimeout(function(){if($("#remembered-widget .b-remembered-container .b-remembered-item").length==0){c.loadRememberedWidget(1)}$("#remembered-widget .b-remembered-top").removeClass("hidden");errorController.hideHintError($("#compare-widget"))},e.widget_show_time)});$(".b-remembered-box").mouseleave(function(){var f=$(this);clearTimeout(e.widget_delay[$(this).attr("id").split("-")[0]]);e.widget_delay[$(this).attr("id").split("-")[0]]=setTimeout(function(){$(f).find(".b-remembered-top").addClass("hidden");errorController.hideHintError($("#compare-widget"))},e.widget_show_time)});$("#compare-widget .button-left, #compare-widget .button-right").click(function(){if(!$(this).hasClass("active")){return false}page=parseInt($(this).attr("href").split("#")[1]);commonController.loadCompareWidget(page);return false});$("#remembered-widget .button-left, #remembered-widget .button-right").click(function(){if(!$(this).hasClass("active")){return false}page=parseInt($(this).attr("href").split("#")[1]);commonController.loadRememberedWidget(page);return false});if(typeof($.datepicker)!="undefined"){$.datepicker.setDefaults($.datepicker.regional.ru)}$(document).delegate("click",".submit-btn",function(){$(this).parents("form").submit();return false});$(window).scroll(function(){$("#size_hint").addClass("hidden")});$.fn.alignCenter=function(){var g=-$(this).width()/2+"px";var f=-$(this).height()/2+"px";return $(this).css({"margin-left":g,"margin-top":f})};$(document).delegate("click","#terms_of_use",function(){var f=$("#dialog-document").detach(),g="  ";commonController.showCommonPopup(f,g);$(document).delegate("click","#dialog-close",function(){$("#dialog-container").dialog("close")});return false});$(".user_termdoc").on("click",function(f){f.preventDefault();if($("#dialog-terms_of_Use").length){commonController.showDialog($(".user_termdoc"));$("#id-cancel-back, #id-apply, #id-cancel").addClass("hidden")}else{$.ajax({url:$(this).attr("href"),type:"GET",success:function(g){$("#wrapper").after(g);$(".user_termdoc").attr("rel","dialog-terms_of_Use");commonController.showDialog($(".user_termdoc"));$("#id-cancel-back, #id-apply, #id-cancel").addClass("hidden")}})}})};this.showDialog=function(d){$myDialog=$(".dialog-content");$(".dialog-content").find(".scroll-pane-popup").each(function(){$(this).jScrollPane()});$.fn.dialogPosition=function(){return $(this)};$myDialog.dialog({resizable:false,open:function(h,i){$(this).find(".scroll-pane-popup").each(function(){$(this).jScrollPane()})},draggable:true,modal:true,width:"auto",height:"auto",dialogClass:"fixed",autoOpen:false,position:"center",buttons:{back:{"class":"big-cancel back",id:"id-cancel-back",text:"< ",click:function(){$(this).dialog("close")}},cancel:{"class":"big-cancel",id:"id-cancel",text:"",click:function(){$(this).dialog("close")}},submit:{"class":"big-apply",id:"id-apply",text:"",click:function(){$(this).dialog("close")}},close:{"class":"big-apply",id:"id-close",text:"",click:function(){$(this).dialog("close")}}}});$(".fixed.ui-dialog").dialogPosition();var f=d,e=f.attr("rel"),g=($.type(e)=="string"&&e.length)?$("#"+e):null;$(".tabs-content").tabs({show:function(h,i){$(".scroll-pane-popup").jScrollPane()}});$(".scroll-pane").jScrollPane();$(window).resize(function(){$("input.ui-autocomplete-input").autocomplete("close")});$("#id-cancel-back, #id-apply, #id-cancel").addClass("hidden");g.dialog("open")},this.setTimerForInput=function(d){var e=this;if($(d).val().length>0){(d).parent().addClass("hasome")}else{$(d).parent().removeClass("hasome")}setTimeout(function(){e.setTimerForInput(d)},50)};this.getClientSize=function(e){e=e||document;var d=e.compatMode=="CSS1Compat"?e.documentElement:e.body;return d};this.showCommonPopup=function(d,e){$("#dialog-container").html(d).dialog({title:e,resizable:false,draggable:false,modal:true,autoOpen:false,width:"auto",height:"auto",dialogClass:"fixed"}).dialog("open");$.fn.dialogPosition=function(){return $(this).css("margin-top",-(this.outerHeight()/2)+"px").css("margin-left",-(this.outerWidth()/2)+"px").css({position:"fixed",top:"50%",left:"50%"})};$(".fixed.ui-dialog").dialogPosition();$(function(){$(".scroll-pane").each(function(g,h){$(this).jScrollPane();if($(this).hasClass("terms")){var f=$('<div class="popup-shadow-top"></div><div class="popup-shadow-bottom"></div>');f.appendTo($(this))}})})};this.pageReload=function(){window.location.reload()};this.loading=function(){return(!$("#progress-wrapper").length)?'<div id="progress-wrapper" class="progress-wrapper"><i class="progress-loader"></i><div class="progress-loading">Czekaj...</div></div>':""};this.removeLoading=function(){$("#progress-wrapper").remove()};this.removeFromRemembered=function(d){ajax_query(Routing.generate("TopMallFrontendBundle_remembered_remove"),{id:d},this.removeFromRememberedOk);return false};this.removeFromRememberedOk=function(d){if(d.product_id){commonController.loadRememberedWidget();if(($("#product_id").length)&&(d.product_id==$("#product_id").val())){$("#remembered-action").removeClass("hidden");$("#remembered-link").addClass("hidden")}if($("#product-item-"+d.product_id).length){$("#product-item-"+d.product_id).find(".hoverSave").removeClass("hidden");$("#product-item-"+d.product_id).find(".go-to-save-for-later").addClass("hidden");$("#product-item-"+d.product_id).find(".d-add-remembered-btn").removeClass("active")}}};this.removeFromCompare=function(d){ajax_query("compare/remove",{id:d},this.removeFromCompareOk);return false};this.removeFromCompareOk=function(d){if(d.product_id){commonController.loadCompareWidget();if(($("#product_id").length)&&(d.product_id==$("#product_id").val())){$("#buy-later-action").removeClass("hidden");$("#buy-later-link").addClass("hidden")}if($("#product-item-"+d.product_id).length){$("#product-item-"+d.product_id).find(".hoverCompare").removeClass("hidden");$("#product-item-"+d.product_id).find(".go-to-compare").addClass("hidden");$("#product-item-"+d.product_id).find(".d-add-compare-btn").removeClass("active")}}};this.loadRememberedWidget=function(e){if(typeof(e)=="undefined"){e=1}var d=function(f){commonController.initWidget("remembered-widget",f,e)};$.ajax({url:Routing.generate("TopMallFrontendBundle_remembered_loadWidget"),data:{page:e},success:d,cache:false})};this.removeFromRememberedByProductId=function(e,d){$.ajax({url:Routing.generate("TopMallFrontendBundle_remembered_removeByProductColorId"),data:{id:e},success:d});return false};this.loadCompareWidget=function(d){};this.initWidget=function(d,f,e){$("#"+d+" .b-remembered-slider .b-remembered-container").html(f.html);$("#"+d+" .b-remembered-button__quantity").html(f.count);$("#"+(d.split("-")[0])+"-header-btn .items-quantity").text(f.count);if(!f.count){$("#"+(d.split("-")[0])+"-header-btn").parent(".b-widgets-top").addClass("hidden")}else{$("#"+(d.split("-")[0])+"-header-btn").parent(".b-widgets-top").removeClass("hidden")}if(f.count<=3){$("#"+d).find(".widget-pager-btn").addClass("hidden");$("#"+d).find(".button-img").addClass("hidden")}else{$("#"+d).find(".widget-pager-btn").removeClass("hidden");$("#"+d).find(".button-img").removeClass("hidden")}if(!f.count){}else{$("#"+d).removeClass("hidden");if($("#compare-widget").hasClass("comparealone")){$("#compare-widget").removeClass("comparealone");$("#compare-widget").addClass("compare")}}if(f.count-f.limit+1==e){next_page=e;$("#"+d+" .button-right").removeClass("active");$("#"+d+" .button-left").addClass("active")}else{next_page=e+1;$("#"+d+" .button-right").addClass("active")}if(e==1){prev_page=1;$("#"+d+" .button-right").addClass("active");$("#"+d+" .button-left").removeClass("active")}else{prev_page=e-1;$("#"+d+" .button-left").addClass("active")}if(f.count<=f.limit){$("#"+d+" .button-right, #"+d+" .button-left").removeClass("active")}$("#"+d+" .button-left").attr("href","#"+prev_page);$("#"+d+" .button-right").attr("href","#"+next_page)};this.initWidgetWithPage=function(d,f,e){$("#"+d+" .b-remembered-slider .b-remembered-container").html(f.html);$("#"+d+" .b-remembered-button__quantity").html(f.count);if(f.count==null){}else{$("#"+d).removeClass("hidden")}if(f.page_count==e){next_page=e;$("#"+d+" .button-right").removeClass("active");$("#"+d+" .button-left").addClass("active")}else{next_page=e+1;$("#"+d+" .button-right").addClass("active")}if(e==1){prev_page=1;$("#"+d+" .button-right").addClass("active");$("#"+d+" .button-left").removeClass("active")}else{prev_page=e-1;$("#"+d+" .button-left").addClass("active")}if(f.page_count==1){$("#"+d+" .button-right, #"+d+" .button-left").removeClass("active")}$("#"+d+" .button-left").attr("href","#"+prev_page);$("#"+d+" .button-right").attr("href","#"+next_page)};this.loadSizeHintTable=function(d){var e=function(g){var f=("#dialog-container").length;if(f==0){$("#product-container").append('<div id="dialog-container"></div>')}$("#dialog-container").html("");$("#dialog-container").html(g.html).dialog({title:$("#size-hint-table-btn").attr("title"),autoOpen:true,dialogClass:"fixed",resizable:false,width:"1000",height:"auto",modal:true,open:function(){$("#dialog-container select.styled").each(function(){$(this).stylingSelect()});var h=$("#brand-size-select").val();if(h!="hint"){$(".b-brand-table").each(function(){if($(this).attr("id")==h){$(this).show()}else{if(h=="all"){$(this).show()}else{$(this).hide()}}})}}});loader.hideOut("#main")};loader.showIn("#main");ajax_query("product/loadSizeHintTable",{product_color_id:d},e)};this.clickHeaderSelect=function(e){var d=$(e).parents("form");$(d).attr("action",$(e).attr("url"));$(d).find("input").attr("placeholder","  "+$(e).attr("count"))}};var commonController=new commonController();$(document).ready(function(){commonController.init()});Cookies=function(){this.init=function(){};this.set=function(c,d,f,e){e=typeof e!=="undefined"?e:"/";e=(e=="!")?location.pathname:"/";var a="";if(f){var b=new Date();b.setTime(b.getTime()+(f*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=escape(c)+"="+escape(d)+a+"; path="+e};this.has=function(a){return this.get(a)!=null};this.get=function(d,a){var f=escape(d)+"=";a=typeof a!=="undefined"?a:null;var b=document.cookie.split(";");for(var e=0;e<b.length;e++){var g=b[e];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(f)==0){return unescape(g.substring(f.length,g.length))}}return a};this.remove=function(a){this.set(a,"",-1)}};var cookies=new Cookies();(function(a){a.fn.removeClassWild=function(b){return this.removeClass(function(d,c){var e=b.replace(/\*/g,"\\S+");return(c.match(new RegExp("\\b"+e+"","g"))||[]).join(" ")})};cookies.init()})(jQuery);$(function(){$(".ui-dialog.fixed").css({background:"#fff","z-index":"1002"})});(function(){function c(n,p){var o=n[0],m=n[1],r=n[2],q=n[3];o=a(o,m,r,q,p[0],7,-680876936);q=a(q,o,m,r,p[1],12,-389564586);r=a(r,q,o,m,p[2],17,606105819);m=a(m,r,q,o,p[3],22,-1044525330);o=a(o,m,r,q,p[4],7,-176418897);q=a(q,o,m,r,p[5],12,1200080426);r=a(r,q,o,m,p[6],17,-1473231341);m=a(m,r,q,o,p[7],22,-45705983);o=a(o,m,r,q,p[8],7,1770035416);q=a(q,o,m,r,p[9],12,-1958414417);r=a(r,q,o,m,p[10],17,-42063);m=a(m,r,q,o,p[11],22,-1990404162);o=a(o,m,r,q,p[12],7,1804603682);q=a(q,o,m,r,p[13],12,-40341101);r=a(r,q,o,m,p[14],17,-1502002290);m=a(m,r,q,o,p[15],22,1236535329);o=h(o,m,r,q,p[1],5,-165796510);q=h(q,o,m,r,p[6],9,-1069501632);r=h(r,q,o,m,p[11],14,643717713);m=h(m,r,q,o,p[0],20,-373897302);o=h(o,m,r,q,p[5],5,-701558691);q=h(q,o,m,r,p[10],9,38016083);r=h(r,q,o,m,p[15],14,-660478335);m=h(m,r,q,o,p[4],20,-405537848);o=h(o,m,r,q,p[9],5,568446438);q=h(q,o,m,r,p[14],9,-1019803690);r=h(r,q,o,m,p[3],14,-187363961);m=h(m,r,q,o,p[8],20,1163531501);o=h(o,m,r,q,p[13],5,-1444681467);q=h(q,o,m,r,p[2],9,-51403784);r=h(r,q,o,m,p[7],14,1735328473);m=h(m,r,q,o,p[12],20,-1926607734);o=e(o,m,r,q,p[5],4,-378558);q=e(q,o,m,r,p[8],11,-2022574463);r=e(r,q,o,m,p[11],16,1839030562);m=e(m,r,q,o,p[14],23,-35309556);o=e(o,m,r,q,p[1],4,-1530992060);q=e(q,o,m,r,p[4],11,1272893353);r=e(r,q,o,m,p[7],16,-155497632);m=e(m,r,q,o,p[10],23,-1094730640);o=e(o,m,r,q,p[13],4,681279174);q=e(q,o,m,r,p[0],11,-358537222);r=e(r,q,o,m,p[3],16,-722521979);m=e(m,r,q,o,p[6],23,76029189);o=e(o,m,r,q,p[9],4,-640364487);q=e(q,o,m,r,p[12],11,-421815835);r=e(r,q,o,m,p[15],16,530742520);m=e(m,r,q,o,p[2],23,-995338651);o=k(o,m,r,q,p[0],6,-198630844);q=k(q,o,m,r,p[7],10,1126891415);r=k(r,q,o,m,p[14],15,-1416354905);m=k(m,r,q,o,p[5],21,-57434055);o=k(o,m,r,q,p[12],6,1700485571);q=k(q,o,m,r,p[3],10,-1894986606);r=k(r,q,o,m,p[10],15,-1051523);m=k(m,r,q,o,p[1],21,-2054922799);o=k(o,m,r,q,p[8],6,1873313359);q=k(q,o,m,r,p[15],10,-30611744);r=k(r,q,o,m,p[6],15,-1560198380);m=k(m,r,q,o,p[13],21,1309151649);o=k(o,m,r,q,p[4],6,-145523070);q=k(q,o,m,r,p[11],10,-1120210379);r=k(r,q,o,m,p[2],15,718787259);m=k(m,r,q,o,p[9],21,-343485551);n[0]=d(o,n[0]);n[1]=d(m,n[1]);n[2]=d(r,n[2]);n[3]=d(q,n[3])}function j(u,o,n,m,r,p){o=d(d(o,u),d(m,p));return d((o<<r)|(o>>>(32-r)),n)}function a(o,n,u,r,m,q,p){return j((n&u)|((~n)&r),o,n,m,q,p)}function h(o,n,u,r,m,q,p){return j((n&r)|(u&(~r)),o,n,m,q,p)}function e(o,n,u,r,m,q,p){return j(n^u^r,o,n,m,q,p)}function k(o,n,u,r,m,q,p){return j(u^(n|(~r)),o,n,m,q,p)}function i(p){if(/[\x80-\xFF]/.test(p)){p=unescape(encodeURI(p))}txt="";var r=p.length,q=[1732584193,-271733879,-1732584194,271733878],o;for(o=64;o<=p.length;o+=64){c(q,l(p.substring(o-64,o)))}p=p.substring(o-64);var m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<p.length;o++){m[o>>2]|=p.charCodeAt(o)<<((o%4)<<3)}m[o>>2]|=128<<((o%4)<<3);if(o>55){c(q,m);for(o=0;o<16;o++){m[o]=0}}m[14]=r*8;c(q,m);return q}function l(n){var o=[],m;for(m=0;m<64;m+=4){o[m>>2]=n.charCodeAt(m)+(n.charCodeAt(m+1)<<8)+(n.charCodeAt(m+2)<<16)+(n.charCodeAt(m+3)<<24)}return o}var g="0123456789abcdef".split("");function f(p){var o="",m=0;for(;m<4;m++){o+=g[(p>>(m*8+4))&15]+g[(p>>(m*8))&15]}return o}function b(m){for(var n=0;n<m.length;n++){m[n]=f(m[n])}return m.join("")}md5=function(m){return b(i(m))};function d(n,m){return(n+m)&4294967295}if(md5("hello")!="5d41402abc4b2a76b9719d911017c592"){function d(m,p){var o=(m&65535)+(p&65535),n=(m>>16)+(p>>16)+(o>>16);return(n<<16)|(o&65535)}}})();
cartControllerNew=function(){var a=this;this.updateQuantity=false;this.init=function(){$(document).delegate("click","#checkout-submit-btn.disable-btn.not-pass-min-price",function(b){b.preventDefault();var c="";$(".b_msg.yellow").each(function(){c+='<p style="line-height: 15px;padding-bottom: 15px;">'+$(this).text()+"</p>"});$(".p-messages").html(c);if(c!=""){$("#min-price-popup").dialog({autoOpen:true,dialogClass:"fixed visible",resizable:false,width:"350px",height:"auto",zIndex:1900,modal:true,close:function(){$(this).dialog("destroy")},buttons:{ok:{"class":"big-apply grid-102",id:"id-close",text:"Zamkn",click:function(d){$(this).dialog("close")}}}})}});$(document).ajaxStart(function(){$("article").addClass("loader-transparent");a.loaderShow()});$(document).ajaxStop(function(){$("article").removeClass("loader-transparent");a.loaderHide()});$("#add-cart-btn:not(.not-active)").on("click",function(b){a.addToCart(b)});$("#buy_button:not(.not-active)").on("click",function(b){a.addToBuy(b)});$("#wrapper").on("click","a.add_vaucher",function(b){a.showVaucherForm(b)});$("#wrapper").on("submit","form.vaucher_form",function(b){a.addVaucher(b)});$("#wrapper").on("click",".b_cart-item a.delete",function(b){a.deleteItem(b)});$("#wrapper").on("click",".b_cart-item a.bookmark",function(b){a.toggleRemembered(b)});$(document).on("click",".b-mc-items a.delete",function(b){a.deleteItem(b)});$(document).on("click",".b-mc-items a.bookmark",function(b){a.toggleRemembered(b)});$("#wrapper").on("focus","input.quantity",function(b){$(b.target).attr("old_value",$(b.target).val())});$("#wrapper").on("blur","input.quantity",function(d){var b=$(d.target);var c=b.closest("form");a.update(d,c,b)});$("#wrapper").on("submit","form.quantity",function(d){var c=$(d.target);var b=c.find("input.input");a.update(d,c,b)});$("#wrapper").on("mouseenter",".cart-product-img",function(b){$(this).closest("div.col").find(".b-cart-big-img").html('<img class="j_img_middle_preview" src="'+$(this).closest("div.col").find(".preview-image-url").val()+'">').show()});$("#wrapper").on("mouseleave",".cart-product-img",function(b){$(this).closest("div.col").find(".b-cart-big-img").hide()});$("#checkout-submit-btn:not(.disable-btn)").click(function(){$("head").click();$(this).addClass("hidden");$("#checkout-progress-block").removeClass("hidden");if(typeof ga!="undefined"){dataLayer.push({event:"proceedToCheckout",category:"button",action:"click",opt_label:"proceed to checkout",nonInteraction:0})}});$(document).delegate("click",".minicart-btn",function(b){if(typeof ga!="undefined"){dataLayer.push({event:"proceedToCheckout",category:"button",action:"click",opt_label:"proceed to checkout",nonInteraction:0})}})},this.loaderShow=function(){$("article").after('<div id="progress-wrapper" class="progress-wrapper"><i class="progress-loader"></i><span class="progress-loading">adowanie...</span></div>')},this.loaderHide=function(){$("#progress-wrapper").remove()},this.update=function(d,c,b){d.preventDefault();if(b.val()==b.attr("old_value")||a.updateQuantity){return false}a.updateQuantity=true;$.ajax({type:c.attr("method"),url:c.attr("action"),data:c.serialize(),dataType:"json",success:function(e){a.updateQuantity=false;$("#header-cart-item-count-text").html(e.data.quantity_text);$("#header-cart-item-count-text--mobile").html(e.data.quantity_text_mobile);$("#wrapper").html(e.data.html)}})},this.deleteItem=function(b){b.preventDefault();errorController.hideHintError($(b.target));$.ajax({type:"GET",url:$(b.target).attr("href"),dataType:"json",success:function(c){if(c.status){$("#header-cart-item-count-text").html(c.data.quantity_text);if(c.data.quantity){$("#header-cart-item-count-text--mobile").html(c.data.quantity_text_mobile)}else{$("#header-cart-item-count-text--mobile").hide()}if($(b.target).hasClass("minicart_btn")){$(b.target).parents(".b-mc-items").remove();if($(".minicart div.b-mc-items").length>=3){$(".scroll-pane").jScrollPane().data("jsp").reinitialise()}else{$(".scroll-pane").jScrollPane().data("jsp").destroy()}var d=[];$.each($(".b-mc-items a.seller"),function(){if(jQuery.inArray($(this).text(),d)==-1){d.push($(this).text())}});if(d.length<=1){$("#few_supplier_messsage").addClass("hidden")}$("#minicart_price").text(c.data.price);if(!$(".b-mc-items").children().length){$("#dialog-notice").dialog("close")}}else{$("#wrapper").html(c.data.html)}}else{errorController.hideHintError($(b.target));errorController.showHintError($(b.target),c.error,"top","red");clearInterval(a.interval);a.interval=setTimeout(function(){errorController.hideHintError($("#add-cart-btn"))},5000)}}})},this.addVaucher=function(b){b.preventDefault();errorController.hideHintError($(b.target));$.ajax({type:"POST",url:$(b.target).attr("action"),dataType:"json",data:$(b.target).serialize(),success:function(c){if(c.status){$("#header-cart-item-count").text(c.data.quantity);$("#wrapper").html(c.data.html)}else{errorController.hideHintError($(b.target));errorController.showHintError($(b.target),c.error,"top","red");clearInterval(a.interval);a.interval=setTimeout(function(){errorController.hideHintError($("#add-cart-btn"))},5000)}}})},this.showVaucherForm=function(b){b.preventDefault();$(b.target).parent().find(".vaucher_form").toggle()},this.trackGaEvent=function(b,d,c){b.ecommerce={};b.ecommerce[d]={products:[c]};analyticsData.push(b)},this.addToBuy=function(b){a.checkSize(b,"buy");if(typeof ga!="undefined"){dataLayer.push({event:"oneClickAddToCart",category:"button",action:"click",opt_label:"one-click add to cart",nonInteraction:0})}},this.addToCart=function(b){a.checkSize(b,"cart");if(typeof ga!="undefined"){dataLayer.push({event:"addToCart",category:"button",action:"click",opt_label:"add to cart",nonInteraction:0})}if(typeof(_vis_opt_top_initialize)=="function"){_vis_opt_goal_conversion(203);_vis_opt_pause(500)}},this.checkSize=function(c,b){if(!$("#sizes-container .product-size.active").length){if(!$("#sizes-container").parent().hasClass("hidden")){$("#styled_popupsize-select span.change").text("  ");$(function(){$("#sizes_container_popup").dialog({autoOpen:true,dialogClass:"fixed visible",resizable:false,width:"210px",height:"auto",zIndex:1900,modal:true,close:function(){$(this).dialog("destroy")},buttons:{cancel:{"class":"big-cancel back",id:"id-cancel-back",text:"",click:function(){$(this).dialog("close")}},select:{"class":"big-apply grid-102",id:"id-cancel",text:"",click:function(d){if($("#popupsize-select option:selected").val()=="hint"){return false}a.add(d.target,$("#sizes-container .product-size.active").attr("pcs_id"),b);$(this).dialog("close")}}}})});return false}}a.add(c.target,$("#sizes-container .product-size.active").attr("pcs_id"),b)},this.add=function(g,f,b){try{if(typeof eaProductObj!="undefined"){var c=eaProductObj;c.variant=$("#sizes-container .product-size.active").text().trim();cartControllerNew.trackGaEvent({event:(b=="buy"?"One click checkout":"Add to cart"),action:"click",opt_label:"Product"},"add",c)}}catch(d){}errorController.hideHintError($("#add-cart-btn"));$(g).attr("disabled","disabled");$.ajax({type:"POST",url:Routing.generate("topmall_cart_cart_add"),dataType:"json",data:{ppcs_id:f,type:b},success:function(h){if(typeof ga!="undefined"){dataLayer.push({pageview:"/mini_cart"})}try{analyticsData.push({event:"Mini cart",action:"open",opt_label:"Cart",ecommerce:{}})}catch(j){}$(g).removeAttr("disabled");if(h.status){if(h.data.url!=""){window.location=h.data.url;return false}if($(window).width()>599){var i=560}else{var i=320}$("<div></div>").attr("id","dialog-notice").html(h.data.html).dialog({title:"Produkt zosta dodany do koszyka",autoOpen:true,dialogClass:"fixed minicart",resizable:false,width:i,height:"auto",minHeight:14,modal:true,draggable:false,position:["center",50],open:function(e,k){$(".ui-widget-overlay").css({width:$(document).width(),height:$(document).height(),"z-index":1004});$(".ui-dialog").css({"z-index":1005})},close:function(){$(this).dialog("destroy");$("#dialog-notice").remove()},buttons:{back:{"class":"minicart-btn button button--primary button--large button--auto-width",text:"Powr do produktu",click:function(){$(this).dialog("close");window.location.reload()}},submit:{"class":"minicart-btn button button--secondary button--large button-auto-width",text:"Przejd do koszyka",click:function(){window.location.href=Routing.generate("topmall_cart_cart_index")}},}});$("#header-cart-item-count-text").html(h.data.quantity_text);$("#header-cart-item-count-text--mobile").html(h.data.quantity_text_mobile)}else{errorController.hideHintError($("#add-cart-btn"));errorController.showHintError($("#add-cart-btn"),h.error,"top","red")}if(typeof(rrApi)!="undefined"){rrApi.addToBasket($("#product_id").val(),$("#user_id").val())}clearInterval(a.interval);a.interval=setTimeout(function(){errorController.hideHintError($("#add-cart-btn"))},5000)}})},this.toggleRemembered=function(b){if($(b.target).hasClass("active")){this.removeFromRemembered(b)}else{this.addToRemembered(b)}return false},this.addToRemembered=function(b){ajax_query("remembered/create",{id:$(b.target).attr("data-ppc_id")},function(){$(b.target).addClass("active");$(b.target).text("Produkt zosta dodany do schowka");commonController.loadRememberedWidget()});return false},this.removeFromRemembered=function(c){var b=function(){$(c.target).removeClass("active");$(c.target).text("Dodaj do schowka");commonController.loadRememberedWidget()};commonController.removeFromRememberedByProductId($(c.target).attr("data-ppc_id"),b);return false},this.resizeCart=function(){var i=$("ul.b_cart-items").outerHeight(true),j=$("#sidebar_fixed").outerHeight(true),e=$("#sidebar_fixed");if(e.size()){var g=$(e).offset().top-94,k=$(window).width(),h=960,c=$(".cart-wrapper").outerWidth(),b=$(".cart-wrapper .b_left").outerWidth(),d=20;if(i>j){if(k>h){var f=$(window).scrollTop();$(e).css("position",((f)>g)?"fixed":"static");$(e).css("top",((f)>g)?"44px":"");$(e).css("left",((f)>g)?((k-c)/2+b+d)+"px":"");$.event.add(window,"scroll",function(){var l=$(window).scrollTop();$(e).css("position",((l)>g)?"fixed":"static");$(e).css("top",((l)>g)?"44px":"");$(e).css("left",((l)>g)?((k-c)/2+b+d)+"px":"")})}}else{$(e).css("position","static")}}}};var cartControllerNew=new cartControllerNew();$(document).ready(function(){cartControllerNew.init()});
(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})(jQuery);
(function($){$(document).ready(function(){});function format(str){for(var i=1;i<arguments.length;i++){str=str.replace("%"+(i-1),arguments[i])}return str}function CloudZoom(jWin,opts){var sImg=$("img",jWin);var img1;var img2;var zoomDiv=null;var $mouseTrap=null;var lens=null;var $tint=null;var softFocus=null;var $ie6Fix=null;var zoomImage;var controlTimer=0;var cw,ch;var destU=0;var destV=0;var currV=0;var currU=0;var filesLoaded=0;var mx,my;var ctx=this,zw;setTimeout(function(){if($mouseTrap===null){var w=jWin.width();jWin.parent().append(format('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >...</div>',w/3,(w/2)-(w/6))).find(":last").css("opacity",0.5)}},200);var ie6FixRemove=function(){if($ie6Fix!==null){$ie6Fix.remove();$ie6Fix=null}};this.removeBits=function(){if(lens){lens.remove();lens=null}if($tint){$tint.remove();$tint=null}if(softFocus){softFocus.remove();softFocus=null}ie6FixRemove();$(".cloud-zoom-loading",jWin.parent()).remove()};this.destroy=function(){jWin.data("zoom",null);if($mouseTrap){$mouseTrap.unbind();$mouseTrap.remove();$mouseTrap=null}if(zoomDiv){zoomDiv.remove();zoomDiv=null}this.removeBits()};this.fadedOut=function(){if(zoomDiv){zoomDiv.remove();zoomDiv=null}this.removeBits()};this.controlLoop=function(){if(lens){var x=(mx-sImg.offset().left-(cw*0.5))>>0;var y=(my-sImg.offset().top-(ch*0.5))>>0;if(x<0){x=0}else{if(x>(sImg.outerWidth()-cw)){x=(sImg.outerWidth()-cw)}}if(y<0){y=0}else{if(y>(sImg.outerHeight()-ch)){y=(sImg.outerHeight()-ch)}}lens.css({left:(x>2)?x-2:x,top:(y>2)?y-2:y});lens.css("background-position",(-x)+"px "+(-y)+"px");destU=(((x)/sImg.outerWidth())*zoomImage.width)>>0;destV=(((y)/sImg.outerHeight())*zoomImage.height)>>0;currU+=(destU-currU)/opts.smoothMove;currV+=(destV-currV)/opts.smoothMove;zoomDiv.css("background-position",(-(currU>>0)+"px ")+(-(currV>>0)+"px"))}controlTimer=setTimeout(function(){ctx.controlLoop()},30)};this.init2=function(img,id){filesLoaded++;if(id===1){zoomImage=img}if(filesLoaded===2){this.init()}};this.init=function(){$(".cloud-zoom-loading",jWin.parent()).remove();$mouseTrap=jWin.parent().append(format("<div class='mousetrap' style='z-index:20;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'></div>",sImg.outerWidth(),sImg.outerHeight(),0,0)).find(":last");$mouseTrap.bind("mousemove",this,function(event){mx=event.pageX;my=event.pageY});$mouseTrap.bind("mouseleave",this,function(event){clearTimeout(controlTimer);if(lens){lens.fadeOut(299)}if($tint){$tint.fadeOut(299)}if(softFocus){softFocus.fadeOut(299)}zoomDiv.fadeOut(300,function(){ctx.fadedOut()});return false});$mouseTrap.bind("mouseenter",this,function(event){mx=event.pageX;my=event.pageY;zw=event.data;if(zoomDiv){zoomDiv.stop(true,false);zoomDiv.remove()}var xPos=opts.adjustX,yPos=opts.adjustY;var siw=sImg.outerWidth();var sih=sImg.outerHeight();var w=opts.zoomWidth;var h=opts.zoomHeight;if(opts.zoomWidth=="auto"){w=siw}if(opts.zoomHeight=="auto"){h=sih}var appendTo=jWin.parent();switch(opts.position){case"top":yPos-=h;break;case"right":xPos+=siw;break;case"bottom":yPos+=sih;break;case"left":xPos-=w;break;case"inside":w=siw;h=sih;break;default:appendTo=$("#"+opts.position);if(!appendTo.length){appendTo=jWin;xPos+=siw;yPos+=sih}else{w=appendTo.innerWidth();h=appendTo.innerHeight()}}zoomDiv=appendTo.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:19;"></div>',xPos,yPos,w,h,zoomImage.src)).find(":last");if(sImg.attr("title")&&opts.showTitle){zoomDiv.append(format('<div class="cloud-zoom-title">%0</div>',sImg.attr("title"))).find(":last").css("opacity",opts.titleOpacity)}if($.browser.msie&&$.browser.version<7){$ie6Fix=$('<iframe frameborder="0" src="#"></iframe>').css({position:"absolute",left:xPos,top:yPos,zIndex:19,width:w,height:h}).insertBefore(zoomDiv)}zoomDiv.fadeIn(500);if(lens){lens.remove();lens=null}cw=(sImg.outerWidth()/zoomImage.width)*zoomDiv.width();ch=(sImg.outerHeight()/zoomImage.height)*zoomDiv.height();$(".cloud-zoom-lens").remove();lens=jWin.append(format("<div class = 'cloud-zoom-lens' style='display:none;z-index:18;position:absolute;width:%0px;height:%1px;'></div>",cw,ch)).find(":last");$mouseTrap.css("cursor",lens.css("cursor"));var noTrans=false;if(opts.tint){lens.css("background",'url("'+sImg.attr("src")+'")');$tint=jWin.append(format('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',sImg.outerWidth(),sImg.outerHeight(),opts.tint)).find(":last");$tint.css("opacity",opts.tintOpacity);noTrans=true;$tint.fadeIn(500)}if(opts.softFocus){lens.css("background",'url("'+sImg.attr("src")+'")');softFocus=jWin.append(format('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',sImg.outerWidth()-2,sImg.outerHeight()-2,opts.tint)).find(":last");softFocus.css("background",'url("'+sImg.attr("src")+'")');softFocus.css("opacity",0.5);noTrans=true;softFocus.fadeIn(500)}if(!noTrans){lens.css("opacity",opts.lensOpacity)}if(opts.position!=="inside"){lens.fadeIn(500)}zw.controlLoop();return})};img1=new Image();$(img1).load(function(){ctx.init2(this,0)});img1.src=sImg.attr("src");img2=new Image();$(img2).load(function(){ctx.init2(this,1)});img2.src=jWin.attr("href")}$.fn.CloudZoom=function(options){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}this.each(function(){var relOpts,opts;eval("var	a = {"+$(this).attr("rel")+"}");relOpts=a;if($(this).is(".cloud-zoom")){$(this).css({position:"relative",display:"block"});$("img",$(this)).css({display:"block"});if($(this).parent().attr("id")!="wrap"){$(this).wrap('<div id="wrap" style="top:0px;z-index:20;position:relative;"></div>')}opts=$.extend({},$.fn.CloudZoom.defaults,options);opts=$.extend({},opts,relOpts);$(this).data("zoom",new CloudZoom($(this),opts))}else{if($(this).is(".cloud-zoom-gallery")){opts=$.extend({},relOpts,options);$(this).data("relOpts",opts);$(this).bind("click",$(this),function(event){var data=event.data.data("relOpts");$("#"+data.useZoom).data("zoom").destroy();$("#"+data.useZoom).attr("href",event.data.attr("href"));$("#"+data.useZoom+" img").attr("src",event.data.data("relOpts").smallImage);$("#"+event.data.data("relOpts").useZoom).CloudZoom();return false})}}});return this};$.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:false,tintOpacity:0.5,lensOpacity:0.5,softFocus:false,smoothMove:3,showTitle:true,titleOpacity:0.5,adjustX:0,adjustY:0}})(jQuery);
function gId(a){return document.getElementById(a)}function Dummy(a){return false}function Go(a){if(a!=""){window.location.href=a}return false}function DeleteObj(b){var a=document.getElementById(b);if(b!=0){a.parentNode.removeChild(a)}}function updateObj(a){if(a.id!=0){var b=document.getElementById(a.id);b.innerHTML=a.data}}function upClose(b){var a=document.getElementById(b);if(a.style.display!="block"){a.style.display="block"}else{a.style.display="none"}}function AddDiv(b,d){var e=document.createElement("div");var a=b;e.setAttribute("id",a);var c=document.getElementById(d);c.appendChild(e)}function Reload(a){document.location.reload()}function uploadProgress(b,c,a){}function uploadError(){}function print_r(b,g){var a="";if(!g){g=0}var f="";for(var c=0;c<g+1;c++){f+="    "}if(typeof(b)=="object"){for(var d in b){var e=b[d];if(typeof(e)=="object"){a+=f+"'"+d+"' :\n";a+=print_r(e,g+1)}else{a+=f+"'"+d+"' => \""+e+'"\n'}}}else{a="===>"+b+"<===("+typeof(b)+")"}return a}function addReferalUrl(f){var a=$("a");for(var c=0;c<a.length;c++){var b=a[c].href.split("#");var e=b[0];var d=b[1]?("#"+b[1]):"";if(e.indexOf("?",0)>=0){a[c].href=e+"&from="+f+d}else{a[c].href=e+"/?from="+f+d}}}loader=function(a){this.loader_html='<div class="loader-wrapper" style="display: none;"><div class="over-progress"></div><div class="progress-wrapper" id="progress-wrapper"><i class="progress-loader"></i><span class="progress-loading">Czekaj...</span></div></div>';this.showIn=function(c){if(!$(c).length){return false}$(c).addClass("loader-transparent");var e=$(c).find(".loader-wrapper");if(!$(e).size()){e=$(c).prepend(this.loader_html).find(".loader-wrapper")}var b=$(c).height()+$(c).css("padding-top").replace("px","")*1+$(c).css("padding-bottom").replace("px","")*1;var d=$(c).width()+$(c).css("padding-left").replace("px","")*1+$(c).css("padding-right").replace("px","")*1;e.height(b);e.width(d);e.css("margin-top","-"+$(c).css("padding-top"));e.css("margin-left","-"+$(c).css("padding-left"));e.find(".loader").css("margin-top",(b-32)/2);setTimeout(function(){e.show()},a);return e};this.hideOut=function(b){$(b).removeClass("loader-transparent");var c=$(b).find(".loader-wrapper");$(c).remove()}};loader=new loader(200);loader_cart=function(){this.loader_html='<div class="loader-wrapper styled" style="display: none;"><div class="over-progress"></div><div class="progress-wrapper styled"><i class="progress-loader"></i><span class="progress-loading">Czekaj...</span></div></div>';this.showIn=function(b){if(!$(b).length){return false}$(b).addClass("loader-transparent");var d=$(b).find(".loader-wrapper");if(!$(d).size()){d=$(b).prepend(this.loader_html).find(".loader-wrapper")}var a=$(b).height()+$(b).css("padding-top").replace("px","")*1+$(b).css("padding-bottom").replace("px","")*1;var c=$(b).width()+$(b).css("padding-left").replace("px","")*1+$(b).css("padding-right").replace("px","")*1;d.height(a);d.width(c);d.css("margin-top","-"+$(b).css("padding-top"));d.css("margin-left","-"+$(b).css("padding-left"));d.find(".loader").css("margin-top",(a-32)/2);d.show();$(d).find(".progress-wrapper").css({top:$(b).offset().top+10,left:$(b).offset().left+c-110});return d};this.hideOut=function(a){$(a).removeClass("loader-transparent");var b=$(a).find(".loader-wrapper");$(b).remove()}};loader_cart=new loader_cart();
productController=function(){var b="in_action";this.product_cookie_name="product_setting";this.product_cookie_expires=11/12;this.product_cookie_count=5;this.data=null;this.filters={};this.image_arr=[];this.m_image_arr=[];this.btnAddToCart=false;this.default_quantity=1;this.animationm_time=600;this.add_btn_hint_interval=false;this.ratingStatisticTimer;this.hide_minicart_status=0;this.mainDescWrapperHeight=440;this.mainDescHeaderHeight=$(".product-page__details--header").height();this.mainDescContainerHeight=this.mainDescWrapperHeight-this.mainDescHeaderHeight-80;this.mainDescContentHeight;var c=this;function a(){var g=null,h;var e=window.location.href.split("#")[0];var d=e.slice(window.location.href.indexOf("?")+1).split("&");for(var f=0;f<d.length;f++){h=d[f].split("=");if("filter_supplier"==h[0]){g=h[1];break}}return g}this.init=function(){var g=$(".product__main-description");$(".product-page__details").css("height",c.mainDescWrapperHeight);$(".topmall-tabs_brand-info").css("min-height",c.mainDescContainerHeight);g.css("max-height",c.mainDescContainerHeight);c.mainDescContentHeight=g.height();$(".topmall-tabs a.topmall-tabs-menu").click(function(){var e=$(this).attr("id");f(e,$(this).attr("ppc_id"),$(this).attr("is_marketplace"));return false});function f(e,l,m){if(e!=$(".topmall-tabs a.active").attr("id")){$(".topmall-tabs a").removeClass("active");$("#"+e).addClass("active");$(".topmall-tabs div").removeClass("active");$("#con_"+e).addClass("active");if($("#"+e).hasClass("ajax_content")){c.loadAjaxContent(e,l,m)}}}if($("#size-select").length){if($("#size-select").val()!="hint"){productController.updateProductStatus($("#size-select option[value="+$("#size-select").val()+"]").attr("pcs_id"))}}$.coolGallery({callback:function(){productController.readUserChoice()}});($("#outfit-container a").length)?$("#outfit-title").removeClass("hidden"):$("#outfit-title").addClass("hidden");$("#buy_button").click(function(l){l.preventDefault();cartControllerNew.add($(this),$(this).attr("data-ppcs-id"),"buy")});$("#other_suppliers_price a").click(function(){$("#tab-4").trigger("click");$("body").scrollTo($("#tab-4").position().top+30,{duration:500});return false});$(document).on("mouseenter",".product-review-statistic-preview",function(){$(this).addClass("over");$(this).parent().find(".product-review-statistic-hint").addClass("show")}).on("mouseleave",".product-review-statistic-preview",function(){$(this).removeClass("over");var e=$(this);clearTimeout(c.ratingStatisticTimer);c.ratingStatisticTimer=setTimeout(function(){if(!$(e).parent().find(".product-review-statistic-hint").hasClass("over")){$(e).parent().find(".product-review-statistic-hint").removeClass("show")}},1000)}).on("mouseenter",".product-review-statistic-hint",function(){$(this).addClass("over")}).on("mouseleave",".product-review-statistic-hint",function(){$(this).removeClass("over");var e=$(this);clearTimeout(c.ratingStatisticTimer);c.ratingStatisticTimer=setTimeout(function(){if(!$(e).hasClass("over")&&!$(e).parent().find(".product-review-statistic-preview").hasClass("over")){$(e).parent().find(".product-review-statistic-hint").removeClass("show")}},1000)});$(document).delegate("#size-hint-table-btn","click",function(){analyticsData.push({event:"Size Table",action:"open",opt_label:"Product",ecommerce:{}});var e=$(".color-list .product-color.active").attr("id").split("-")[2];commonController.loadSizeHintTable(e);$(document).delegate("#brand-size-select","change",function(){var l=this.value;$(".b-brand-table").each(function(){if($(this).attr("id")==l){$(this).show()}else{if(l=="all"){$(this).show()}else{$(this).hide()}}})});return false});if($("#sizes-container .product-size.active.update-status").length){if($("#sizes-container .product-size.active.update-status").attr("pc_id")==$("product_id").val()){productController.updateProductStatus($("#sizes-container .product-size.active.update-status").attr("pcs_id"))}}$(document).delegate(".dialog-close-btn","click",function(){$("#dialog-container").dialog("close");return false});$(document).delegate(".color-list .product-color.multi-color","mouseenter",function(){var m=$(this).attr("id").split("-")[3];var e=$(this);$(this).addClass("mouseover");if($(this).parent().find(".color-hint").length){$(".color-list .color-hint").addClass("hidden");$(this).parent().find(".color-hint").removeClass("hidden")}else{var l=function(n){$(e).parent().append(n.html);if($(e).hasClass("mouseover")){$(e).parent().find(".color-hint").removeClass("hidden")}};ajax_query("product/loadColorHintData",{id:m},l)}}).delegate(".color-list .product-color.multi-color","mouseleave",function(){$(this).parent().find(".color-hint").addClass("hidden");$(this).removeClass("mouseover")});$("#wrap").mouseover(function(){errorController.hideHintError()});if(window.location.hash){if(window.location.hash.indexOf("tab")!==-1){$(window.location.hash).trigger("click")}}$("#product-tabs-menu a").click(function(){var e=$(this).attr("href").split("#")[1];$("#product-tabs-menu li").removeClass("selected");$("#product-tabs .product-tab").addClass("hidden");$("#"+e).removeClass("hidden");$(this).parent().addClass("selected");if($(this).hasClass("ajax_content")){c.loadAjaxContent($(this).attr("href").split("-")[1])}return false});$(document).delegate("#size-table-tabs-menu a","click",function(){var e=$(this).attr("href").split("#")[1];$("#size-table-tabs-menu li").removeClass("selected");$("#size-table-tabs .size-table-tab").addClass("hidden");$("#size-table-tabs #"+e).removeClass("hidden");$(this).parent().addClass("selected");return false});$("#product_quantity").bind({keypress:function(e){if(!$(".refreshProduct").hasClass("active")){$(".refreshProduct").addClass("active")}errorController.hideHintError();if(e.keyCode){key=e.keyCode;keyind=1}else{if(e.which){key=e.which;keyind=2}}$("#product_quantity").delay(100).focus();errorController.hideHintError();if((key==13)&&(keyind==1)){$("#product_quantity").delay(100).focus();$("#product_quantity").delay(100).blur().queue(function(){$(this).dequeue()});return productController.updateQuantity($("#product_quantity").val())}},focus:function(e){errorController.showHintError(this,"   ","top")},blur:function(e){if(!$("#product_quantity").hasClass("error")){errorController.hideHintError()}}});$(".addProduct").click(function(e){if($("#product_quantity").val()==999){return false}if($("#product_quantity").val()<0){$("#product_quantity").val(0)}if($("#product_quantity").val()==0){$("#product_quantity").removeClass("error");$("a.removeProduct").hide()}if(!$("#product_quantity").hasClass("error")){errorController.hideHintError()}return productController.plusQuantity()});$(".removeProduct").click(function(){if(!$("#product_quantity").hasClass("error")){errorController.hideHintError()}});$(".refreshProduct").click(function(){$("#product_quantity").blur()});$(document).delegate(".colors-container a.product-color:not(.active)","click",function(){if($(this).hasClass("not-active")){return false}$("#product-container").after('<div id="progress-wrapper" class="progress-wrapper"><i class="progress-loader"></i><div class="progress-loading">Wczytywanie...</div></div>');var e=$(this).attr("id").split("-");var m=e[2];var l=e[3];productController.changeColor(m);$(".colors-container a").removeClass("active");$("#product-color-"+m+"-"+l).addClass("active");$("#header_product-color-"+m+"-"+l).addClass("active");return false});$(document).on("change","#size-select, #header_size-select",function(){errorController.hidePopover($("#styled_size-select"));var l=$(this).val();if($("#size-select").val()!=l&&$(this).attr("id")!="size-select"){$("#styled_size-select_"+l).trigger("click")}if($("#header_size-select").val()!=l&&$(this).attr("id")!="header_size-select"){$("#styled_header_size-select_"+l).trigger("click")}if($(this).attr("id")=="size-select"){var e=$("#size-select option[value="+l+"]").attr("pcs_id");productController.updateProductStatus(e);productController.saveUserChoice();productController.btnAddToCart=false}return false});$(document).on("click","#sizes-container .product-size, #header_sizes-container .product-size",function(){if($(this).hasClass("active")){return false}var l=$(this).attr("id").split("-")[2];$("#sizes-container .product-size, #header_sizes-container .product-size").removeClass("active");$("#header_product-size-"+l).addClass("active");$("#product-size-"+l).addClass("active");var e=$(this).attr("pcs_id");productController.updateProductStatus(e);productController.saveUserChoice();productController.btnAddToCart=false;return false});$(".outfit .productOutfitDiv").mouseover(function(){$(".productOutfitDiv-hover").removeClass("active");$(".productOutfitDiv-hover").addClass("active")});$(".outfit").mouseleave(function(){$(".productOutfitDiv-hover").removeClass("active")});try{if($.browser.msie&&window.opener){if(window.opener.location){if(window.opener.location.pathname){var i=window.opener.location.pathname.split("/"),h=i.length-1;if(i[h]){this.storeFilters(i[h])}}}$(".back-to-search").attr("href",window.opener.location.href)}}catch(k){}$("#product_quantity").change(function(){$(this).parent().find(".refreshProduct").click()});$(".product-size").bind("click",function(){productController.btnAddToCart=false});function d(e){e.click(function(){var l=$(this).attr("href");var m=$(l);e.not($(this)).removeClass("active");$(this).toggleClass("active");$(".accordeon-content").not(m).fadeOut(150);m.fadeToggle(150);if("#read-more"==l){e.prev().toggleClass("active");$(".product__accordeon-link.read-more-link").parent().toggleClass("is-gradient");if(e.hasClass("active")){$(".topmall-tabs_brand-info").css("min-height","100%");$(".product__main-description").css("max-height","100%");$(".product-page__details").css("height","auto")}else{$(".product-page__details").css("height",c.mainDescWrapperHeight);$(".topmall-tabs_brand-info").css("min-height",c.mainDescContainerHeight);$(".product__main-description").css("max-height",c.mainDescContainerHeight)}}else{e.prev().removeClass("active");if(g.length>0&&c.mainDescContentHeight==c.mainDescContainerHeight){$(".product__accordeon-link.read-more-link").parent().addClass("is-gradient");$(".product-page__details").css("height",c.mainDescWrapperHeight);$(".topmall-tabs_brand-info").css("min-height",c.mainDescContainerHeight);$(".product__main-description").css("max-height",c.mainDescContainerHeight)}}if($(this).hasClass("ajax_content")){productController.loadAjaxContent(l,$(this).attr("data-ppc-id"),false)}j($(".topmall-tabs"));return false})}d($(".product__accordeon-link"));function j(l){var m=l.offset().top-$(window).scrollTop();if($(window).width()>999){if(m<60){$("html, body").animate({scrollTop:l.offset().top-75},0)}}else{if(m<0){$("html, body").animate({scrollTop:l.offset().top-20},0)}}}if(g.length>0&&c.mainDescContentHeight==c.mainDescContainerHeight){g.next().removeClass("is-hidden");g.parent().addClass("is-gradient")}};this.loadAjaxContent=function(d,f,g){var e=$(d);if($.trim($(e).html())==""){loader.showIn(e);if(d.indexOf("con_tab-3")>-1){$.ajax({url:Routing.generate("topmall_productpage_new_loaddeliverytab"),data:{ppc_id:f,is_marketplace:g},success:function(h){loader.hideOut(e);$(e).html(h)},cache:false})}else{loader.hideOut(e)}}};this.updateProductPageByStatus=function(d){if(d.active_buy_button){$("#add-cart-btn").text("Dodaj do koszyka");$("#buy_button, #add-cart-btn").removeClass("not-active").removeClass("hidden");$("#order-by-phone-hint").removeClass("hidden")}else{$("#buy_button").addClass("hidden");$("#add-cart-btn").addClass("not-active");$("#add-cart-btn").text("Niedostpne");$("#order-by-phone-hint").addClass("hidden")}if(d.show_cart_button){$("#add-cart-btn").removeClass("hidden")}else{$("#add-cart-btn").addClass("hidden")}if(d.show_remembered_button){$("#remembered-action").removeClass("hidden")}else{$("#remembered-action").addClass("hidden")}if(d.show_compare_button){$("#compare-action").removeClass("hidden")}else{$("#compare-action").addClass("hidden")}if(d.show_price){$("#product-price-above-buy-btn-container").removeClass("hidden");$("#product-price-hint").addClass("hidden");$("#product-price").removeClass("hidden");$("#product-price-container").removeClass("hidden");$("#product-price-currency").removeClass("hidden")}else{$("#product-price-hint").removeClass("hidden");$("#product-price").addClass("hidden");$("#product-price-container").addClass("hidden");$("#product-price-currency").addClass("hidden");$("#product-price-above-buy-btn-container").addClass("hidden")}$("#product-price-hint").html(d.price_hint);$("#product-status-title").html(d.status_title);$("#product-status-title").removeClass("available").removeClass("no-available");$("#product-status-title").addClass(d.status_title_color)};this.updateProductStatus=function(d){var e=function(h){c.updateProductPageByStatus(h);if(h.status===false){window.location.reload();return false}$("#product-price, #product-price-above-buy-btn").text(h.price);if(h.show_price&&h.old_price&&h.old_price>h.price&&h.discount>=15){$("#product-old-price").text(h.old_price);$("#product-old-price-container").removeClass("hidden")}else{$("#product-old-price-container").addClass("hidden")}$("#product_discount").text(h.discount);if(h.show_price&&h.discount>=15){$("#product_discount_container").removeClass("hidden")}else{$("#product_discount_container").addClass("hidden")}if(h.show_free_delivery!=null&&h.show_price){$("#product_delivery_container").removeClass("hidden");$("#product_delivery").text(h.show_free_delivery)}else{$("#product_delivery_container").addClass("hidden")}if(null!=h.product_name){$(".product_name_wrapper").html(h.product_name)}if(h.sku){$("#product_article").text(h.sku)}if(h.url&&$("#sizes-container .product-size:not(.not-active)").length>1){if($("#sizes-container .product-size.active").length){if($("#sizes-container .product-size.active").attr("pc_id")==$("#product_id").val()){History.pushState(null,$(document).attr("title"),h.url)}else{History.pushState(null,$(document).attr("title"),window.location.href.split("?")[0])}}}$("#other-suppliers").html(h.suppliers_tab);if(h.suppliers_price){$("#tab-4").removeClass("hidden");$("#other_suppliers_price").removeClass("hidden");$("#other_suppliers_price a").text(h.suppliers_price)}else{$("#other_suppliers_price").addClass("hidden");if(!$("#tab-4").hasClass("active")){$("#tab-4").addClass("hidden")}}if(h.supplier_sku!=null&&h.supplier_sku!=""){$("#supplier_sku_container").show();$("#supplier_sku_label").show();$("#supplier_sku_value").show().text(h.supplier_sku)}else{$("#supplier_sku_container").hide();$("#supplier_sku_label").hide();$("#supplier_sku_value").hide().text("")}if(h.supplier_link){$("#product-supplier-provider").html(h.supplier_link)}if(h.product_location){$("#product-location-country").html(h.product_location)}var g=$("#tab-3");var i=$("#con_tab-3");g.attr("ppc_id",h.product_id);g.attr("is_marketplace",h.is_marketplace);if(g.hasClass("active")){ajax_query(Routing.generate("topmall_productpage_new_loaddeliverytab"),{ppc_id:h.product_id,is_marketplace:h.is_marketplace},function(j){i.html(j)})}else{i.html("")}};if($.trim(d)==""){return false}var f={id:d,filter_supplier:a()||""};ajax_query("product/loadStatusData",f,e)};this.changeColor=function(e){var d=function(f){productController.btnAddToCart=false;errorController.destroyPopover($("#styled_size-select, #styled_popupsize-select"));$("#progress-wrapper").remove();$("#sizes-container").html(f.sizes);$("#header_sizes-container").html(f.sizes_header);$("#sizes_container_popup").html(f.sizes_popup);$(".sizes-container.header-container #size-select").attr("id","header_size-select");$("#size-select, #popupsize-select, #header_size-select").each(function(){$(this).stylingSelect()});c.updateProductPageByStatus(f);$("#outfit-container").html(f.outfit);if(typeof rrApi!="undefined"){rrApi.view(f.id,$("#user_id").val())}($("#outfit-container a").length)?$("#outfit-title").removeClass("hidden"):$("#outfit-title").addClass("hidden");if(f.is_remembered){$("#remembered-action").addClass("active")}else{$("#remembered-action").removeClass("active")}if(f.is_compare){$("#compare-action").addClass("active")}else{$("#compare-action").removeClass("active")}if(f.active_buy_button){$("#buy_button, #add-cart-btn").removeClass("not-active").removeClass("hidden");$("#order-by-phone-hint").removeClass("hidden")}else{$("#add-cart-btn").html("  ");$("#buy_button").addClass("hidden");$("#order-by-phone-hint").addClass("hidden")}if(f.gallery){$("#product-images-container").html(f.gallery)}if(f.id){$("#product_id").val(f.id)}if(f.sku){$("#product_article").text(f.sku)}if(f.name){$("#product-name").text(f.name)}if(f.brand){$(".product-brand a").text(f.brand)}if(f.brand_link){$(".product-brand a").attr("href",f.brand_link)}if(f.description){$("#product-description p").text(f.description)}if(f.options){$("#product-options-list").html(f.options)}$("#product_discount").text(f.discount);if(f.show_price&&f.discount>=15){$("#product_discount_container").removeClass("hidden")}else{$("#product_discount_container").addClass("hidden")}if(f.show_free_delivery!=null&&f.show_price){$("#product_delivery_container").removeClass("hidden");$("#product_delivery").text(f.show_free_delivery)}else{$("#product_delivery_container").addClass("hidden")}if(f.price){$("#product-price, #product-price-above-buy-btn").text(f.price)}if(f.show_price&&f.old_price&&f.old_price>f.price&&f.discount>=15){$("#product-old-price").text(f.old_price);$("#product-old-price-container").removeClass("hidden")}else{$("#product-old-price-container").addClass("hidden")}if(f.supplier_name){$("#product-supplier-name").text(f.supplier_name)}if(f.supplier_country){$("#product-supplier-country").text(f.supplier_country)}if(f.supplier_url){$("#product-supplier-name").parent().attr("href",f.supplier_url)}(f.null_size_check)?$("#sizes-container").addClass("hidden"):$("#sizes-container").removeClass("hidden");History.pushState(null,f.title,f.url);$.coolGallery({callback:function(){productController.readUserChoice()}},"reset");if(f.sku){if(typeof sociomantic==="object"&&typeof sociomantic.sonar==="object"&&typeof sociomantic.sonar.adv==="object"&&typeof sociomantic.sonar.adv["topmall-ua"]==="object"&&typeof sociomantic.sonar.adv["topmall-ua"].clear==="function"&&typeof sociomantic.sonar.adv["topmall-ua"].track==="function"){sociomantic.sonar.adv["topmall-ua"].clear();window.product={identifier:f.sku};sociomantic.sonar.adv["topmall-ua"].track()}}$("#other-suppliers").html(f.suppliers_tab);if(f.suppliers_price){$("#tab-4").removeClass("hidden");$("#other_suppliers_price").removeClass("hidden");$("#other_suppliers_price a").text(f.suppliers_price)}else{$("#other_suppliers_price").addClass("hidden");if(!$("#tab-4").hasClass("active")){$("#tab-4").addClass("hidden")}}if($("#sizes-container .product-size.active.update-status").length){productController.updateProductStatus($("#sizes-container .product-size.active.update-status").attr("pcs_id"))}initZoom()};ajax_query("product/loadData",{id:e,filter_supplier:a()||""},d)};this.getFilters=function(){return this.filters};this.storeFilters=function(d){if($.isArray(d)||$.isPlainObject(d)){this.filters=$.toJSON(d)}else{if(typeof d=="string"&&d.length){this.filters=d}}};this.getData=function(){if($.isPlainObject(this.data)&&!$.isEmptyObject(this.data)){return this.data}var d=$.cookie(this.product_cookie_name);d=!d?{}:$.parseJSON(d);this.data=$.isPlainObject(d)?d:{};return this.data};this.storeData=function(d){this.data=d;$.cookie(this.product_cookie_name,$.toJSON(d),{expires:this.product_cookie_expires,path:"/"})};this.saveUserChoice=function(){var e=$("#product_id").val(),d=this.getData();if(typeof(d[e])=="undefined"){d[e]={}}if($("#sizes-container .product-size.active").length){d[e].s=$("#sizes-container .product-size.active").attr("id").split("-")[2];d[e].ppcs_id=$("#sizes-container .product-size.active").attr("pcs_id")}else{d[e].s=""}if(!isNaN($("#product_quantity").val())&&$("#product_quantity").val()!=""){d[e].q=$("#product_quantity").val()}else{if(!$("#product_quantity").hasClass("error")){$("#product_quantity").addClass("error")}$("#product_quantity").focus();$("#product_quantity").blur();d[e].q=0}if(!isNaN($("#mainImage").attr("data-key"))&&$("#mainImage").attr("data-key")!=""){d[e].i=$("#mainImage").attr("data-key")}else{d[e].i=""}if(typeof(d.objs)=="undefined"){d.objs=""}if(d.objs!=""){objs=d.objs.split(",")}else{objs=[]}if($.inArray(e,objs)==-1){if(objs.length>=this.product_cookie_count){delete d[objs[0]];objs.shift()}objs.push(e)}d.objs=objs.join(",");this.storeData(d)};this.readUserChoice=function(){var e=$("#product_id").val(),d=this.getData();if($.isEmptyObject(d)){return false}if(typeof(d[e])!="undefined"){d=d[e];if("s" in d){if(d.s!=""&&$("#product-size-"+d.s).length&&!$("#sizes-container .product-size.active").length&&!$("#product-size-"+d.s).hasClass("not-active")){if($("#product-size-"+d.s).length){$("#sizes-container .product-size").removeClass("active");$("#header_sizes-container .product-size").removeClass("active");$("#product-size-"+d.s).trigger("click").addClass("active");$("#header_product-size-"+d.s).addClass("active")}}}if("i" in d){if(d.i!=""){$("#openZoom").attr("href",productController.image_arr[d.i]);$("#mainImage").attr({src:productController.m_image_arr[d.i],"data-key":d.i});$(".b-gallery-thumb-wrapper").removeClass("selected");$("#gallery-list-image-"+d.i).addClass("selected");setTimeout(function(){$("#gallery-list-image-"+(parseInt(d.i))).find("img").trigger("click")},150)}}if("q" in d){if(d.q!=""){productController.updateQuantity(d.q)}}}};this.minusQuantity=function(){value=parseInt($("#product_quantity").val());if(value-1==1){value=value-1;return this.updateQuantity(value)}if(value>=2){value=value-1;return this.updateQuantity(value)}return false};this.plusQuantity=function(){errorController.hideHintError();value=parseInt($("#product_quantity").val());value=value+1;return this.updateQuantity(value)};this.updateQuantity=function(d){if($(".refreshProduct").hasClass("active")){$(".refreshProduct").removeClass("active")}d=Number(d);if(d==1){$("#product_quantity").val(d);$(".remove").css("display","none")}else{if(d<2||isNaN(d)){$(".remove").css("display","none")}else{$("#product_quantity").val(d);$(".remove").css("display","inline")}}productController.saveUserChoice();return false};this.addTo=function(d){var f=function(g){if(g.errors_count){baseTypesValidator.showErrors(g.errors)}else{if(g.error){errorController.showHintError($("#remembered-action"),g.error,"top","red")}else{if(d=="Remembered"){$("#remembered-action").html("Produkt zosta dodany do schowka").addClass("active").removeClass(b);commonController.loadRememberedWidget()}}}};var e=function(){$.ajax({url:Routing.generate("TopMallFrontendBundle_remembered_create"),data:{id:$("#remembered-action").attr("data-ppc-id"),size:$("#remembered-action").attr("data-ppcs-id"),quantity:1},success:f,cache:false})};if(typeof($.cookie("topmall_uuid"))=="undefined"){$.ajax({url:Routing.generate("TopMallFrontendBundle_auth_createTemporaryUser"),method:"get",success:function(g){e()}})}else{e()}return false};this.toggleCompare=function(){if($("#compare-action").hasClass(b)){return false}$("#compare-action").addClass(b);if($("#compare-action").hasClass("active")){this.removeFromCompare()}else{this.addToCompare()}};this.addToCompare=function(){var d=function(f){if(f.error_count){errorController.showHintError($("#compare-widget"),"   20 ","right","red",-20)}else{if(f.error){errorController.showHintError($("#buy-later-action"),f.error,"top","red")}else{$("#compare-action").html("   ").addClass("active").removeClass(b);commonController.loadCompareWidget()}}};var e=$("#product_id").val();ajax_query("compare/create",{id:e},d);return false};this.removeFromCompare=function(){var d=function(e){$("#compare-action").html("").removeClass("active").removeClass(b);commonController.loadCompareWidget()};compareController.removeByProductId($("#product_id").val(),d);return false};this.toggleRemembered=function(){if($("#remembered-action").hasClass(b)){return false}$("#remembered-action").addClass(b);if($("#remembered-action").hasClass("active")){this.removeFromRemembered()}else{this.addToRemembered()}};this.removeFromRemembered=function(){var d=function(e){$("#remembered-action").html("Dodaj do schowka").removeClass("active").removeClass(b);commonController.loadRememberedWidget()};commonController.removeFromRememberedByProductId($("#remembered-action").attr("data-ppc-id"),d);return false};this.addToRemembered=function(){return this.addTo("Remembered")};this.showSupplierSizes=function(d){ajax_query(d,{},function(e){$("#other-supplier-sizes_container_popup").html(e);$("#other-supplier-sizes_container_popup select.styled").stylingSelect();$("#other-supplier-sizes_container_popup").dialog({autoOpen:true,dialogClass:"fixed visible",resizable:false,width:"210px",height:"auto",zIndex:1900,modal:true,close:function(){$(this).dialog("destroy")},buttons:{back:{"class":"big-cancel back",id:"id-cancel-back",text:"",click:function(){$(this).dialog("close")}},cancel:{"class":"big-apply grid-102",id:"id-cancel",text:"",click:function(){if($("#other-supplier-size-select").val()=="hint"){return}cartControllerNew.add($("#add-cart-btn"),$("#other-supplier-size-select option:selected").attr("pcs_id"),"cart");$(this).dialog("close")}}}})});return false};this.addOtherSupplierSizeToCart=function(d){cartControllerNew.add($("#add-cart-btn"),d,"cart");return false}};function popupSize(){$(document).on("change","#popupsize-select",function(){$("#size-select option").attr("selected",false);$(this).find("option").each(function(){if($(this).attr("selected")){$("#sizes-container .product-size, #header_sizes-container .product-size").removeClass("active");$("#product-size-"+$(this).val()).trigger("click").addClass("active");$("#header_product-size-"+$(this).val()).addClass("active")}})})}var productController=new productController();$(document).ready(function(){productController.init();popupSize()});$("#thumbsContainer img, #thumbsContainer .ibox").on("click",function(){var b=$(this).attr("data-image-id")||$(this).children().attr("data-image-id");var a=_getInternalData();a.image_b=b;_initActiveMainImage();a.image_size_check=false;_storeInternalData(a);_initActiveThumbs();productController.saveUserChoice();return false});
(function(h,f){var k="coolGallery_params",l="coolGallery_internal_data",i="click.coolGallery",o=4000,n=56,d=300,c=1,j=6,m,b=function(p){var q=_getInternalData();q.percent_top=(p.clientY-q.zoom_popup_top)/q.popup_height;q.percent_left=(p.clientX-q.zoom_popup_left)/q.popup_width;_storeInternalData(q);if(typeof(el.addEventListener)=="undefined"){e()}},g=function(){var p=_getConfig(),t=_getInternalData(),s=t.image_arr,r=t.m_image_arr,q=t.i_image_arr;percent_top=t.percent_top,percent_left=t.percent_left,popup_height=t.popup_height,popup_width=t.popup_width,page=t.page,page_count=Math.ceil(t.image_arr.length/c),html="";if(typeof(t.page)=="undefined"){t.page=1}_storeInternalData(t);html+='<div id="zoomLayer" class="LayerWindow" style="display: none"><a class="closeWithText" id="elm_2">zamknij x</a><div id="bigImageContainer" style="width: 100%; height: 100%; text-align: center;" class=""><img src="" id="bigImage"></div><img width="38px" height="49px" src="'+host_images_url_left+'" class="arrows" id="arrowLeft" style="top: 279px;"><img width="38px" height="49px" src="'+host_images_url_right+'" class="arrows" id="arrowRight" style="top: 279px;">';html+='<a href="#" id="other-thumb-prev-btn" class="l-product-left-img-thumbs-btn top thumb-gallery-btn '+((!isNaN(page)&&page>1)?"active":"")+'"'+(s.length<=(j+1)?' style="display:none;"':"")+'></a><div id="otherThumbs" class="previewZoom l-product-left-img-slider"><div class="thumb-slider" id="other-thumb-slider" style="top:'+((page>1)?-(page-1)*n:0)+'px" >';for(key in s){html+='<a id="gallery-other-list-image-'+key+'" '+(key==0?'class="selected"':"")+' href="#"><img  image="'+key+'" src="'+q[key]+'"'+(key==0?' class="selected"':"")+'"></a>'}html+="</div></div>";html+='<a href="#" id="other-thumb-next-btn" class="l-product-left-img-thumbs-btn bottom thumb-gallery-btn '+((isNaN(page)||(!isNaN(page)&&page<page_count))?"active":"")+'"'+(s.length<=(j+1)?' style="display:none;"':"")+"></a></div>"},a=function(){var q=_getInternalData(),p=h("#otherThumbsList");p.empty();h.each(q.image_arr,function(r,s){p.append("<li "+(r==0?'class="selected"':"")+'><div class="b-gallery-thumb-bkg"></div><img id="gallery-other-list-image-'+r+'"image="'+r+'" src="'+q.m_image_arr[r]+'"'+(r==0?'class="selected"':"")+'"></li>')})},e=function(){var p=h("#bigImage").get(0);setInterval(function(){var q=_getInternalData();if((!q.image_size_check&&h("#bigImage").hasClass("loaded"))||q.window_resize_check){q.move_width=(q.popup_width>h("#bigImage").outerWidth())?false:true;q.move_height=(q.popup_height>h("#bigImage").outerHeight())?false:true;h("#bigImage").css({top:q.popup_height/2-h("#bigImage").outerHeight()/2,left:q.popup_width/2-h("#bigImage").outerWidth()/2,position:"absolute"});q.image_size_check=true;q.window_resize_check=false;h("#bigImage").removeClass("loaded");h("#progress-wrapper").remove();_storeInternalData(q)}if(typeof(q.percent_top)!="undefined"&&typeof(q.percent_left)!="undefined"){if(q.move_height){p.style.top=((q.popup_height-p.height)*q.percent_top)+"px"}if(q.move_width){p.style.left=((q.popup_width-p.width)*q.percent_left)+"px"}}},0)};_initZoomPopup=function(){if(!h("#zoomLayer").length){h("#zoom-container").after('<div id="progress-wrapper" class="progress-wrapper"><i class="progress-loader"></i><div class="progress-loading">Wczytywanie...</div></div>');g();h("#bigImage").load(function(){if(h("#bigImage").width()==0){h("#bigImage").addClass("need_resize")}h(this).show().addClass("loaded");clearTimeout(m);e()});var p=_getInternalData();h("#bigImage").css("left",p.popup_width/2-h("#bigImage").outerWidth()/2);el=document.getElementById("bigImageContainer");if(typeof(el.addEventListener)=="undefined"){h(document).delegate("#bigImageContainer","mousemove",b)}else{el.addEventListener("mousemove",b,true)}e()}else{a()}},_initTimer=function(){m=setTimeout(function(){h("#bigImage").show()},o)},_initCloudZoom=function(){if(h("#mainImage").hasClass("no-image")){return false}var p=_getInternalData();h(".mousetrap").remove();h("#openZoom").attr("href",p.image_arr[p.image_b]);h(".cloud-zoom, .cloud-zoom-gallery").CloudZoom()},_initActiveThumbs=function(){var p=_getInternalData();h("#innerThumbs a").removeClass("selected");h("#gallery-list-image-"+p.image_b).addClass("selected")},_initActiveMainImage=function(){var p=_getInternalData();h(".openbox.visible img").removeAttr("id");h(".openbox.visible img").removeAttr("class");h(".openbox").removeClass("visible");h("#openbox"+p.image_b).addClass("visible");h(".openbox.visible img").attr("id","mainImage");h(".openbox.visible img").addClass("mainImage")},_syncSlider=function(q,p){(q=="")?type_="other-":type_="";h("#"+type_+"thumb-slider").css("top",p);var r=_getInternalData();r[type_+"page"]=r[q+"page"];_storeInternalData(r);(h("#"+q+"thumb-next-btn").hasClass("active"))?h("#"+type_+"thumb-next-btn").addClass("active"):h("#"+type_+"thumb-next-btn").removeClass("active");(h("#"+q+"thumb-prev-btn").hasClass("active"))?h("#"+type_+"thumb-prev-btn").addClass("active"):h("#"+type_+"thumb-prev-btn").removeClass("active")};_initSlider=function(p){p=p===f?"":p+"-";h(document).delegate("#"+p+"thumb-next-btn",i,function(){var s=h(this),t=_getInternalData(),r=Math.ceil(t.image_arr.length/c),q=t[p+"page"];q=q===f?1:q;if(q==r||r==1||!s.hasClass("active")){return false}if(!t.slider_move){t.slider_move=true;q++;h("#"+p+"thumb-slider").animate({top:"-="+n},d,function(){if(-parseInt(h("#thumb-slider").css("top"))==(r-j-1)*n){h("#"+p+"thumb-next-btn").removeClass("active");h("#"+p+"thumb-prev-btn").addClass("active")}else{h("#"+p+"thumb-next-btn, #"+p+"thumb-prev-btn").addClass("active")}t[p+"page"]=q;t.slider_move=false;_syncSlider(p,"-="+n)});_storeInternalData(t)}return false});h(document).delegate("#"+p+"thumb-prev-btn",i,function(){var t=_getInternalData(),s=h(this),r=Math.ceil(t.image_arr.length/c),q=t[p+"page"];q=q===f?1:q;if(q==1||r==1||!s.hasClass("active")){return false}if(!t.slider_move){t.slider_move=true;q--;h("#"+p+"thumb-slider").animate({top:"+="+n},d,function(){if(!parseInt(h("#thumb-slider").css("top"))){h("#"+p+"thumb-prev-btn").removeClass("active");h("#"+p+"thumb-next-btn").addClass("active")}else{h("#"+p+"thumb-next-btn, #"+p+"thumb-prev-btn").addClass("active")}t[p+"page"]=q;t.slider_move=false;_syncSlider(p,"+="+n)});_storeInternalData(t)}return false})},_resetSlider=function(q){q=q===f?"":q+"-";var r=_getInternalData(),p=q+"page";r.slider_move=false;r[p]=1;_storeInternalData(r);h("#"+q+"thumb-slider").css({top:"0"});if(r.image_arr.length>j){h("#"+q+"thumb-prev-btn").removeClass("active");h("#"+q+"thumb-next-btn").addClass("active");h("#"+q+"thumb-prev-btn").show();h("#"+q+"thumb-next-btn").show()}else{h("#"+q+"thumb-prev-btn").hide();h("#"+q+"thumb-next-btn").hide();h(".thumb-gallery-btn").removeClass("active")}},_log=function(p){if(console&&console.log){console.log("jQuery.coolGallery: "+p)}},_getConfig=function(){var p=h(document).data(k);if(!p){_log("The element has no data attached.");return f}return p},_getInternalData=function(){var p=h(document).data(l);if(!p){_log("The element has no data attached.");return f}return p},_storeConfig=function(p){h(document).data(k,p)},_setOption=function(q,r){if(q){var p=_getConfig();if(h.isPlainObject(p)){p[q]=r;_storeConfig(p)}}},_storeInternalData=function(p){h(document).data(l,p)},_refreshImageData=function(){var t=_getInternalData(),s=[],p=[],r=[],q=[];h("#innerThumbs img").each(function(){var u=h(this);if(u.attr("data-image-id")!=""){if(u.attr("data-orig")!==u.attr("data-preview")){s.push(u.attr("data-preview"));p.push(u.attr("data-orig"))}else{s.push(u.attr("data-orig"));p.push(u.attr("data-orig"))}r.push(u.attr("data-source"));q.push(u.attr("src"))}});t.image_arr=s;t.pr_image_arr=p;t.m_image_arr=r;t.i_image_arr=q;t.slider_move=false;t.image_b=0;productController.image_arr=s;productController.m_image_arr=r;h("#mainImage").attr("data-key",0);if(h("#mainImage").attr("src")!==r[0]){h("#mainImage").attr("src",r[0])}_storeInternalData(t);return t},_preInit=function(){var p={zoom_popup_top:10,zoom_popup_left:12.5,popup_width:0,popup_height:0,image_size_check:false,window_resize_check:false,move_width:true,move_height:true};_storeInternalData(p)},publicMethods={refresh:function(){_refreshImageData();_resetSlider();_resetSlider("other");_initActiveThumbs();_initCloudZoom();var p=_getConfig();if(h.isFunction(p.callback)){p.callback.call()}},setOption:function(p,q){_setOption(p,q)},init:function(r){_preInit();_refreshImageData();_initActiveThumbs();var p=h.extend({},h.coolGallery.defaults,r),u=_getInternalData(),t=u.image_arr,s=u.m_image_arr;_storeConfig(p);if(h.isFunction(p.callback)){p.callback.call();if(h("#innerThumbs a.selected").length){page_=Math.ceil((parseInt(h("#innerThumbs a.selected").attr("id").split("-")[3])+1)/c);page_count=Math.ceil(u.image_arr.length/c);if(page_>1&&page_>j+1){h("#thumb-slider").animate({top:"-="+((page_count-j-1)*n)},d,function(){if(page_>page_count-j){h("#thumb-prev-btn").addClass("active");h("#thumb-next-btn").removeClass("active")}else{h("#thumb-prev-btn").addClass("active");h("#thumb-next-btn").addClass("active")}u.page=(page_count-j);u.slider_move=false;_syncSlider("","-="+((page_count-j-1)*n))})}}}h(document).delegate("#thumbsContainer .b-gallery-thumb-bkg, #otherThumbsList .b-gallery-thumb-bkg","click",function(){h(this).parent().find("img").trigger("click");return false});h(document).delegate("#thumbsContainer img",i,function(){var v=h(this).attr("data-image-id"),w=_getInternalData();w.image_b=v;h("#mainImage").attr({src:w.m_image_arr[v],"data-key":v});w.image_size_check=false;_storeInternalData(w);_initActiveThumbs();_initTimer();_initCloudZoom();productController.saveUserChoice();return false});h(window).resize(function(){var x=_getInternalData(),v=h("#zoomLayer"),w=h(this);v.css({top:h(document).scrollTop()+x.zoom_popup_top,height:w.height()-(x.zoom_popup_top*2),left:x.zoom_popup_left,width:w.width()-(x.zoom_popup_left*2)});x.popup_width=v.outerWidth();x.popup_height=v.outerHeight();x.image_size_check=false;x.window_resize_check=true;_storeInternalData(x)});h(document).delegate("#arrowLeft",i,function(){var v,y=_getInternalData(),x=y.image_arr,w=y.m_image_arr;if(y.slider_move){return false}y.image_b=parseInt(y.image_b);page_count=Math.ceil(y.image_arr.length/c);if(y.image_b==0){if(x.length>j+1){(y.page==1)?top_postion="-="+((page_count-j-1)*n):top_postion="-="+((page_count-y.page)*n)}else{top_postion=0}v=x.length-1;y.slider_move=true;page=Math.ceil((v+1)/c);h("#other-thumb-slider").animate({top:top_postion},d,function(){h("#other-thumb-prev-btn").addClass("active");h("#other-thumb-next-btn").removeClass("active");y["other-page"]=page_count;y.slider_move=false;_storeInternalData(y);_syncSlider("other-",top_postion)})}else{v=y.image_b-1;page=Math.ceil((v+1)/c);h("#gallery-list-image-"+v).addClass("active");y.page=page;_storeInternalData(y);if(x.length>j+1){h("#thumb-prev-btn").trigger("click")}}y.image_b=v;y.image_size_check=false;h("#gallery-list-image-"+v).click();h("#bigImage").hide().attr("src",y.pr_image_arr[v]);h("#mainImage").attr({src:w[v],"data-key":v});productController.saveUserChoice();_storeInternalData(y);_initActiveThumbs();_initTimer();_initCloudZoom();return false});h(document).delegate("#arrowRight",i,function(){var v,y=_getInternalData(),x=y.image_arr,w=y.m_image_arr;if(y.slider_move){return false}y.image_b=parseInt(y.image_b);if(y.image_b==x.length-1){v=0;y.slider_move=true;h("#other-thumb-slider").animate({top:0},d,function(){h("#other-thumb-prev-btn").removeClass("active");h("#other-thumb-next-btn").addClass("active");y["other-page"]=1;y.slider_move=false;_storeInternalData(y);_syncSlider("other-",0)})}else{v=y.image_b+1;page=Math.ceil((v+1)/c);page_count=Math.ceil(y.image_arr.length/c);h("#gallery-list-image-"+v).addClass("active");y.page=page;_storeInternalData(y);if(x.length>j+1){h("#thumb-next-btn").trigger("click")}}y.image_b=v;y.image_size_check=false;h("#gallery-list-image-"+v).click();h("#bigImage").hide().attr("src",y.pr_image_arr[v]);h("#mainImage").attr({src:w[v],"data-key":v});productController.saveUserChoice();_storeInternalData(y);_initActiveThumbs();_initTimer();_initCloudZoom();return false});h("#openZoom .prev").bind(i,function(){var v,y=_getInternalData(),x=y.image_arr,w=y.m_image_arr;if(y.image_b==0){v=x.length-1}else{v=y.image_b-1}y.image_b=v;h("#mainImage").attr({src:w[v],"data-key":v});productController.saveUserChoice();_storeInternalData(y);_initTimer();_initCloudZoom();return false});h("#openZoom .next").bind(i,function(){var v,y=_getInternalData(),x=y.image_arr,w=y.m_image_arr;if(y.image_b==x.length-1){v=0}else{v=y.image_b+1}y.image_b=v;h("#mainImage").attr({src:w[v],"data-key":v});productController.saveUserChoice();_storeInternalData(y);_initTimer();_initCloudZoom();return false});var q=h("#openZoom");if(q.attr("href")===f){q.attr("href",t[u.image_b])}_initCloudZoom();h(document).delegate(".mousetrap",i,function(){h("#mainImage").trigger(i)});_initSlider();_initSlider("other")}};h.coolGallery=function(q,p){if(p=="reset"){publicMethods.refresh();return false}if(publicMethods[q]){return publicMethods[q].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof q=="object"||!q){return publicMethods.init.apply(this,arguments)}else{h.error("Method "+q+" does not exist in jQuery.coolGallery")}}};h.coolGallery.defaults={callback:null}})(jQuery);
if(window.jQuery){(function(a){a.fn.rating=function(c){if(this.length==0){return this}if(typeof arguments[0]=="string"){if(this.length>1){var b=arguments;return this.each(function(){a.fn.rating.apply(a(this),b)})}a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]);return this}var c=a.extend({},a.fn.rating.options,c||{});a.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var f,k=a(this);var d=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,"");var e=a(this.form||document.body);var j=e.data("rating");if(!j||j.call!=a.fn.rating.calls){j={count:0,call:a.fn.rating.calls}}var m=j[d];if(m){f=m.data("rating")}if(m&&f){f.count++}else{f=a.extend({},c||{},(a.metadata?k.metadata():(a.meta?k.data():null))||{},{count:0,stars:[],inputs:[]});f.serial=j.count++;m=a('<span class="star-rating-control"/>');k.before(m);m.addClass("rating-to-be-drawn");if(k.attr("disabled")||k.hasClass("disabled")){f.readOnly=true}if(k.hasClass("required")){f.required=true}m.append(f.cancel=a('<div class="rating-cancel"><a title="'+f.cancel+'">'+f.cancelValue+"</a></div>").mouseover(function(){a(this).rating("drain");a(this).addClass("star-rating-hover")}).mouseout(function(){a(this).rating("draw");a(this).removeClass("star-rating-hover")}).click(function(){a(this).rating("select")}).data("rating",f))}var i=a('<div class="star-rating rater-'+f.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");m.append(i);if(this.id){i.attr("id",this.id)}if(this.className){i.addClass(this.className)}if(f.half){f.split=2}if(typeof f.split=="number"&&f.split>0){var h=(a.fn.width?i.width():0)||f.starWidth;var g=(f.count%f.split),l=Math.floor(h/f.split);i.width(l).find("a").css({"margin-left":"-"+(g*l)+"px"})}if(f.readOnly){i.addClass("star-rating-readonly")}else{i.addClass("star-rating-live").mouseover(function(){a(this).rating("fill");a(this).rating("focus")}).mouseout(function(){a(this).rating("draw");a(this).rating("blur")}).click(function(){a(this).rating("select")})}if(this.checked){f.current=i}if(this.nodeName=="A"){if(a(this).hasClass("selected")){f.current=i}}k.hide();k.change(function(){a(this).rating("select")});i.data("rating.input",k.data("rating.star",i));f.stars[f.stars.length]=i[0];f.inputs[f.inputs.length]=k[0];f.rater=j[d]=m;f.context=e;k.data("rating",f);m.data("rating",f);i.data("rating",f);e.data("rating",j)});a(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};a.extend(a.fn.rating,{calls:0,focus:function(){var c=this.data("rating");if(!c){return this}if(!c.focus){return this}var b=a(this).data("rating.input")||a(this.tagName=="INPUT"?this:null);if(c.focus){c.focus.apply(b[0],[b.val(),a("a",b.data("rating.star"))[0]])}},blur:function(){var c=this.data("rating");if(!c){return this}if(!c.blur){return this}var b=a(this).data("rating.input")||a(this.tagName=="INPUT"?this:null);if(c.blur){c.blur.apply(b[0],[b.val(),a("a",b.data("rating.star"))[0]])}},fill:function(){var b=this.data("rating");if(!b){return this}if(b.readOnly){return}this.rating("drain");this.prevAll().andSelf().filter(".rater-"+b.serial).addClass("star-rating-hover")},drain:function(){var b=this.data("rating");if(!b){return this}if(b.readOnly){return}b.rater.children().filter(".rater-"+b.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var b=this.data("rating");if(!b){return this}this.rating("drain");if(b.current){b.current.data("rating.input").attr("checked","checked");b.current.prevAll().andSelf().filter(".rater-"+b.serial).addClass("star-rating-on")}else{a(b.inputs).removeAttr("checked")}b.cancel[b.readOnly||b.required?"hide":"show"]();this.siblings()[b.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(c,e){var d=this.data("rating");if(!d){return this}if(d.readOnly){return}d.current=null;if(typeof c!="undefined"){if(typeof c=="number"){return a(d.stars[c]).rating("select",undefined,e)}if(typeof c=="string"){a.each(d.stars,function(){if(a(this).data("rating.input").val()==c){a(this).rating("select",undefined,e)}})}}else{d.current=this[0].tagName=="INPUT"?this.data("rating.star"):(this.is(".rater-"+d.serial)?this:null)}this.data("rating",d);this.rating("draw");var b=a(d.current?d.current.data("rating.input"):null);if((e||e==undefined)&&d.callback){d.callback.apply(b[0],[b.val(),a("a",d.current)[0]])}},readOnly:function(b,c){var d=this.data("rating");if(!d){return this}d.readOnly=b||b==undefined?true:false;if(c){a(d.inputs).attr("disabled","disabled")}else{a(d.inputs).removeAttr("disabled")}this.data("rating",d);this.rating("draw")},disable:function(){this.rating("readOnly",true,true)},enable:function(){this.rating("readOnly",false,false)}});a.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};a(function(){a("input[type=radio].star").rating()})})(jQuery)};
(function(a){a.fn.lightBox=function(p){p=jQuery.extend({overlayBgColor:"#000",overlayOpacity:0.8,fixedNavigation:false,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},p);var i=this;function r(){o(this,i);return false}function o(v,u){a("embed, object, select").css({visibility:"hidden"});c();p.imageArray.length=0;p.activeImage=0;if(u.length==1){p.imageArray.push(new Array(v.getAttribute("href"),v.getAttribute("title")))}else{for(var t=0;t<u.length;t++){p.imageArray.push(new Array(u[t].getAttribute("href"),u[t].getAttribute("title")))}}while(p.imageArray[p.activeImage][0]!=v.getAttribute("href")){p.activeImage++}l()}function c(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+p.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+p.imageBtnClose+'"></a></div></div></div></div>');var t=f();a("#jquery-overlay").css({backgroundColor:p.overlayBgColor,opacity:p.overlayOpacity,width:t[0],height:t[1]}).fadeIn();var u=h();a("#jquery-lightbox").css({top:u[1]+(t[3]/10),left:u[0]}).show();a("#jquery-overlay,#jquery-lightbox").click(function(){b()});a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){b();return false});a(window).resize(function(){var v=f();a("#jquery-overlay").css({width:v[0],height:v[1]});var w=h();a("#jquery-lightbox").css({top:w[1]+(v[3]/10),left:w[0]})})}function l(){a("#lightbox-loading").show();if(p.fixedNavigation){a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var t=new Image();t.onload=function(){a("#lightbox-image").attr("src",p.imageArray[p.activeImage][0]);j(t.width,t.height);t.onload=function(){}};t.src=p.imageArray[p.activeImage][0]}function j(w,z){var t=a("#lightbox-container-image-box").width();var y=a("#lightbox-container-image-box").height();var x=(w+(p.containerBorderSize*2));var v=(z+(p.containerBorderSize*2));var u=t-x;var A=y-v;a("#lightbox-container-image-box").animate({width:x,height:v},p.containerResizeSpeed,function(){g()});if((u==0)&&(A==0)){if(a.browser.msie){n(250)}else{n(100)}}a("#lightbox-container-image-data-box").css({width:w});a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:z+(p.containerBorderSize*2)})}function g(){a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(function(){k();s()});q()}function k(){a("#lightbox-container-image-data-box").slideDown("fast");a("#lightbox-image-details-caption").hide();if(p.imageArray[p.activeImage][1]){a("#lightbox-image-details-caption").html(p.imageArray[p.activeImage][1]).show()}if(p.imageArray.length>1){a("#lightbox-image-details-currentNumber").html(p.txtImage+" "+(p.activeImage+1)+" "+p.txtOf+" "+p.imageArray.length).show()}}function s(){a("#lightbox-nav").show();a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+p.imageBlank+") no-repeat"});if(p.activeImage!=0){if(p.fixedNavigation){a("#lightbox-nav-btnPrev").css({background:"url("+p.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){p.activeImage=p.activeImage-1;l();return false})}else{a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+p.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+p.imageBlank+") no-repeat"})}).show().bind("click",function(){p.activeImage=p.activeImage-1;l();return false})}}if(p.activeImage!=(p.imageArray.length-1)){if(p.fixedNavigation){a("#lightbox-nav-btnNext").css({background:"url("+p.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){p.activeImage=p.activeImage+1;l();return false})}else{a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+p.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+p.imageBlank+") no-repeat"})}).show().bind("click",function(){p.activeImage=p.activeImage+1;l();return false})}}m()}function m(){a(document).keydown(function(t){d(t)})}function e(){a(document).unbind()}function d(t){if(t==null){keycode=event.keyCode;escapeKey=27}else{keycode=t.keyCode;escapeKey=t.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if((key==p.keyToClose)||(key=="x")||(keycode==escapeKey)){b()}if((key==p.keyToPrev)||(keycode==37)){if(p.activeImage!=0){p.activeImage=p.activeImage-1;l();e()}}if((key==p.keyToNext)||(keycode==39)){if(p.activeImage!=(p.imageArray.length-1)){p.activeImage=p.activeImage+1;l();e()}}}function q(){if((p.imageArray.length-1)>p.activeImage){objNext=new Image();objNext.src=p.imageArray[p.activeImage+1][0]}if(p.activeImage>0){objPrev=new Image();objPrev.src=p.imageArray[p.activeImage-1][0]}}function b(){a("#jquery-lightbox").remove();a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()});a("embed, object, select").css({visibility:"visible"})}function f(){var v,t;if(window.innerHeight&&window.scrollMaxY){v=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){v=document.body.scrollWidth;t=document.body.scrollHeight}else{v=document.body.offsetWidth;t=document.body.offsetHeight}}var u,w;if(self.innerHeight){if(document.documentElement.clientWidth){u=document.documentElement.clientWidth}else{u=self.innerWidth}w=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){u=document.documentElement.clientWidth;w=document.documentElement.clientHeight}else{if(document.body){u=document.body.clientWidth;w=document.body.clientHeight}}}if(t<w){pageHeight=w}else{pageHeight=t}if(v<u){pageWidth=v}else{pageWidth=u}arrayPageSize=new Array(pageWidth,pageHeight,u,w);return arrayPageSize}function h(){var u,t;if(self.pageYOffset){t=self.pageYOffset;u=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;u=document.documentElement.scrollLeft}else{if(document.body){t=document.body.scrollTop;u=document.body.scrollLeft}}}arrayPageScroll=new Array(u,t);return arrayPageScroll}function n(v){var u=new Date();t=null;do{var t=new Date()}while(t-u<v)}return this.unbind("click").click(r)}})(jQuery);
var qq=qq||{},qq=function(b){return{hide:function(){b.style.display="none";return this},attach:function(a,d){b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent&&b.attachEvent("on"+a,d);return function(){qq(b).detach(a,d)}},detach:function(a,d){b.removeEventListener?b.removeEventListener(a,d,!1):b.attachEvent&&b.detachEvent("on"+a,d);return this},contains:function(a){return b==a?!0:b.contains?b.contains(a):!!(a.compareDocumentPosition(b)&8)},insertBefore:function(a){a.parentNode.insertBefore(b,a);return this},remove:function(){b.parentNode.removeChild(b);return this},css:function(a){null!=a.opacity&&("string"!=typeof b.style.opacity&&"undefined"!=typeof b.filters)&&(a.filter="alpha(opacity="+Math.round(100*a.opacity)+")");qq.extend(b.style,a);return this},hasClass:function(a){return RegExp("(^| )"+a+"( |$)").test(b.className)},addClass:function(a){qq(b).hasClass(a)||(b.className+=" "+a);return this},removeClass:function(a){b.className=b.className.replace(RegExp("(^| )"+a+"( |$)")," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(a){if(b.querySelectorAll){return b.querySelectorAll("."+a)}for(var j=[],i=b.getElementsByTagName("*"),h=i.length,g=0;g<h;g++){qq(i[g]).hasClass(a)&&j.push(i[g])}return j},children:function(){for(var a=[],d=b.firstChild;d;){1==d.nodeType&&a.push(d),d=d.nextSibling}return a},setText:function(a){b.innerText=a;b.textContent=a;return this},clearText:function(){return qq(b).setText("")}}};qq.log=function(d,c){if(window.console){if(!c||"info"===c){window.console.log(d)}else{if(window.console[c]){window.console[c](d)}else{window.console.log("<"+c+"> "+d)}}}};qq.isObject=function(b){return null!==b&&b&&"object"===typeof b&&b.constructor===Object};qq.extend=function(f,e,h){for(var g in e){e.hasOwnProperty(g)&&(h&&qq.isObject(e[g])?(void 0===f[g]&&(f[g]={}),qq.extend(f[g],e[g],!0)):f[g]=e[g])}};qq.indexOf=function(f,e,h){if(f.indexOf){return f.indexOf(e,h)}var h=h||0,g=f.length;for(0>h&&(h+=g);h<g;h++){if(h in f&&f[h]===e){return h}}return -1};qq.getUniqueId=function(){var b=0;return function(){return b++}}();qq.ie=function(){return -1!=navigator.userAgent.indexOf("MSIE")};qq.ie10=function(){return -1!=navigator.userAgent.indexOf("MSIE 10")};qq.safari=function(){return void 0!=navigator.vendor&&-1!=navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!=navigator.vendor&&-1!=navigator.vendor.indexOf("Google")};qq.firefox=function(){return -1!=navigator.userAgent.indexOf("Mozilla")&&void 0!=navigator.vendor&&""==navigator.vendor};qq.windows=function(){return"Win32"==navigator.platform};qq.preventDefault=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1};qq.toElement=function(){var b=document.createElement("div");return function(a){b.innerHTML=a;a=b.firstChild;b.removeChild(a);return a}}();qq.obj2url=function(i,h,n){var m=[],l="&",k=function(b,f){var d=h?/\[\]$/.test(h)?h:h+"["+f+"]":f;"undefined"!=d&&"undefined"!=f&&m.push("object"===typeof b?qq.obj2url(b,d,!0):"[object Function]"===Object.prototype.toString.call(b)?encodeURIComponent(d)+"="+encodeURIComponent(b()):encodeURIComponent(d)+"="+encodeURIComponent(b))};if(!n&&h){l=/\?/.test(h)?/\?$/.test(h)?"":"&":"?",m.push(h),m.push(qq.obj2url(i))}else{if("[object Array]"===Object.prototype.toString.call(i)&&"undefined"!=typeof i){for(var j=0,n=i.length;j<n;++j){k(i[j],j)}}else{if("undefined"!=typeof i&&null!==i&&"object"===typeof i){for(j in i){k(i[j],j)}}else{m.push(encodeURIComponent(h)+"="+encodeURIComponent(i))}}}return h?m.join(l):m.join(l).replace(/^&/,"").replace(/%20/g,"+")};qq.DisposeSupport={_disposers:[],dispose:function(){for(var b;b=this._disposers.shift();){b()}},addDisposer:function(b){this._disposers.push(b)},_attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))}};qq.UploadButton=function(b){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,b);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;qq(this._element).css({position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq(this._input).remove();qq(this._element).removeClass(this._options.focusClass);this._input=this._createInput()},_createInput:function(){var d=document.createElement("input");this._options.multiple&&d.setAttribute("multiple","multiple");this._options.acceptFiles&&d.setAttribute("accept",this._options.acceptFiles);d.setAttribute("type","file");d.setAttribute("name",this._options.name);qq(d).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(d);var c=this;this._attach(d,"change",function(){c._options.onChange(d)});this._attach(d,"mouseover",function(){qq(c._element).addClass(c._options.hoverClass)});this._attach(d,"mouseout",function(){qq(c._element).removeClass(c._options.hoverClass)});this._attach(d,"focus",function(){qq(c._element).addClass(c._options.focusClass)});this._attach(d,"blur",function(){qq(c._element).removeClass(c._options.focusClass)});window.attachEvent&&d.setAttribute("tabIndex","-1");return d}};qq.FineUploaderBasic=function(b){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},customHeaders:{},forceMultipart:!1,inputName:"qqfile"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidate:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"}};qq.extend(this._options,b,!0);this._wrapCallbacks();qq.extend(this,qq.DisposeSupport);this._filesInProgress=0;this._storedFileIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._handler=this._createUploadHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._preventLeaveInProgress()};qq.FineUploaderBasic.prototype={log:function(d,c){this._options.debug&&(!c||"info"===c)?qq.log("[FineUploader] "+d):c&&"info"!==c&&qq.log("[FineUploader] "+d,c)},setParams:function(b){this._options.request.params=b},getInProgress:function(){return this._filesInProgress},uploadStoredFiles:function(){for(;this._storedFileIds.length;){this._filesInProgress++,this._handler.upload(this._storedFileIds.shift(),this._options.request.params)}},clearStoredFiles:function(){this._storedFileIds=[]},retry:function(b){return this._onBeforeManualRetry(b)?(this._handler.retry(b),!0):!1},cancel:function(b){this._handler.cancel(b)},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=0;this._storedFileIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset()},_createUploadButton:function(e){var d=this,f=new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.validation.acceptFiles,onChange:function(b){d._onInputChange(b)}});this.addDisposer(function(){f.dispose()});return f},_createUploadHandler:function(){var d=this,c;c=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";return new qq[c]({debug:this._options.debug,endpoint:this._options.request.endpoint,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,demoMode:this._options.demoMode,log:this.log,onProgress:function(a,i,h,g){d._onProgress(a,i,h,g);d._options.callbacks.onProgress(a,i,h,g)},onComplete:function(a,i,h,g){d._onComplete(a,i,h,g);d._options.callbacks.onComplete(a,i,h)},onCancel:function(a,e){d._onCancel(a,e);d._options.callbacks.onCancel(a,e)},onUpload:function(a,g,f){d._onUpload(a,g,f);d._options.callbacks.onUpload(a,g,f)},onAutoRetry:function(a,i,h,g){d._preventRetries[a]=h[d._options.retry.preventRetryResponseProperty];return d._shouldAutoRetry(a,i,h)?(d._maybeParseAndSendUploadError(a,i,h,g),d._options.callbacks.onAutoRetry(a,i,d._autoRetries[a]+1),d._onBeforeAutoRetry(a,i),d._retryTimeouts[a]=setTimeout(function(){d._onAutoRetry(a,i,h)},1000*d._options.retry.autoAttemptDelay),!0):!1}})},_preventLeaveInProgress:function(){var b=this;this._attach(window,"beforeunload",function(a){if(b._filesInProgress){return a=a||window.event,a.returnValue=b._options.messages.onLeave}})},_onSubmit:function(){this._options.autoUpload&&this._filesInProgress++},_onProgress:function(){},_onComplete:function(f,e,h,g){this._filesInProgress--;this._maybeParseAndSendUploadError(f,e,h,g)},_onCancel:function(b){clearTimeout(this._retryTimeouts[b]);b=qq.indexOf(this._storedFileIds,b);this._options.autoUpload||0>b?this._filesInProgress--:this._options.autoUpload||this._storedFileIds.splice(b,1)},_onUpload:function(){},_onInputChange:function(b){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(b.files):this._validateFile(b)&&this._uploadFile(b);this._button.reset()},_onBeforeAutoRetry:function(d,c){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+c+"...")},_onAutoRetry:function(d,c){this.log("Retrying "+c+"...");this._autoRetries[d]++;this._handler.retry(d)},_shouldAutoRetry:function(b){return !this._preventRetries[b]&&this._options.retry.enableAuto?(void 0===this._autoRetries[b]&&(this._autoRetries[b]=0),this._autoRetries[b]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(d){if(this._preventRetries[d]){return this.log("Retries are forbidden for id "+d,"warn"),!1}if(this._handler.isValid(d)){var c=this._handler.getName(d);if(!1===this._options.callbacks.onManualRetry(d,c)){return !1}this.log("Retrying upload for '"+c+"' (id: "+d+")...");this._filesInProgress++;return !0}this.log("'"+d+"' is not a valid file ID","error");return !1},_maybeParseAndSendUploadError:function(f,e,h,g){if(!h.success){if(g&&200!==g.status&&!h.error){this._options.callbacks.onError(f,e,"XHR returned response code "+g.status)}else{this._options.callbacks.onError(f,e,h.error?h.error:"Upload failure reason unknown")}}},_uploadFileList:function(e){var d,f;d=this._getValidationDescriptors(e);1<d.length&&(f=!1===this._options.callbacks.onValidate(d));if(!f){if(0<e.length){for(d=0;d<e.length;d++){if(this._validateFile(e[d])){this._uploadFile(e[d])}else{if(this._options.validation.stopOnFirstInvalidFile){break}}}}else{this._error("noFilesError","")}}},_uploadFile:function(d){var d=this._handler.add(d),c=this._handler.getName(d);!1!==this._options.callbacks.onSubmit(d,c)&&(this._onSubmit(d,c),this._options.autoUpload?this._handler.upload(d,this._options.request.params):this._storeFileForLater(d))},_storeFileForLater:function(b){this._storedFileIds.push(b)},_validateFile:function(e){var d,f,e=this._getValidationDescriptor(e);d=e.name;f=e.size;if(!1===this._options.callbacks.onValidate([e])){return !1}if(this._isAllowedExtension(d)){if(0===f){return this._error("emptyError",d),!1}if(f&&this._options.validation.sizeLimit&&f>this._options.validation.sizeLimit){return this._error("sizeError",d),!1}if(f&&f<this._options.validation.minSizeLimit){return this._error("minSizeError",d),!1}}else{return this._error("typeError",d),!1}return !0},_error:function(g,f){var j=this._options.messages[g],i=this._options.validation.allowedExtensions.join(", "),h=this._formatFileName(f),j=j.replace("{file}",h),j=j.replace("{extensions}",i),i=this._formatSize(this._options.validation.sizeLimit),j=j.replace("{sizeLimit}",i),i=this._formatSize(this._options.validation.minSizeLimit),j=j.replace("{minSizeLimit}",i);this._options.callbacks.onError(null,f,j);return j},_formatFileName:function(b){33<b.length&&(b=b.slice(0,19)+"..."+b.slice(-13));return b},_isAllowedExtension:function(e){var e=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",d=this._options.validation.allowedExtensions;if(!d.length){return !0}for(var f=0;f<d.length;f++){if(d[f].toLowerCase()==e){return !0}}return !1},_formatSize:function(d){var c=-1;do{d/=1024,c++}while(99<d);return Math.max(d,0.1).toFixed(1)+"kB MB GB TB PB EB".split(" ")[c]},_wrapCallbacks:function(){var e,d;e=this;d=function(a,j,i){try{return j.apply(e,i)}catch(h){e.log("Caught exception in '"+a+"' callback - "+h,"error")}};for(var f in this._options.callbacks){(function(){var a=e._options.callbacks[f];e._options.callbacks[f]=function(){return d(f,a,arguments)}})()}},_parseFileName:function(b){return b.value?b.value.replace(/.*(\/|\\)/,""):null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name},_parseFileSize:function(d){var c;d.value||(c=null!==d.fileSize&&void 0!==d.fileSize?d.fileSize:d.size);return c},_getValidationDescriptor:function(e){var d,f;f={};d=this._parseFileName(e);e=this._parseFileSize(e);f.name=d;e&&(f.size=e);return f},_getValidationDescriptors:function(e){var d,f;f=[];for(d=0;d<e.length;d++){f.push(e[d])}return f}};qq.FineUploader=function(b){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",failUpload:"Upload failed",dragZone:"Drop files here to upload",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(!this._options.dragAndDrop||!this._options.dragAndDrop.disableDefaultDropzone?'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>':"")+(!this._options.button?'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>':"")+(!this._options.listElement?'<ul class="qq-upload-list"></ul>':"")+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file"},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},showMessage:function(c){alert(c)}},!0);qq.extend(this._options,b,!0);this._wrapCallbacks();this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone);this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton);this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton);this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton);this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,"");this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._setupDragDrop()};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(b){this._setupExtraDropzone(b)},removeExtraDropzone:function(e){var d=this._options.dragAndDrop.extraDropzones,f;for(f in d){if(d[f]===e){return this._options.dragAndDrop.extraDropzones.splice(f,1)}}},getItemByFileId:function(d){for(var c=this._listElement.firstChild;c;){if(c.qqFileId==d){return c}c=c.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._setupDragDrop()},_leaving_document_out:function(b){return(qq.chrome()||qq.safari()&&qq.windows())&&0==b.clientX&&0==b.clientY||qq.firefox()&&!b.relatedTarget},_storeFileForLater:function(d){qq.FineUploaderBasic.prototype._storeFileForLater.apply(this,arguments);var c=this.getItemByFileId(d);qq(this._find(c,"spinner")).hide()},_find:function(e,d){var f=qq(e).getByClass(this._options.classes[d])[0];if(!f){throw Error("element not found "+d)}return f},_setupExtraDropzone:function(b){this._options.dragAndDrop.extraDropzones.push(b);this._setupDropzone(b)},_setupDropzone:function(e){var d=this,f=new qq.UploadDropZone({element:e,onEnter:function(a){qq(e).addClass(d._classes.dropActive);a.stopPropagation()},onLeave:function(){},onLeaveNotDescendants:function(){qq(e).removeClass(d._classes.dropActive)},onDrop:function(a){d._options.dragAndDrop.hideDropzones&&qq(e).hide();qq(e).removeClass(d._classes.dropActive);1<a.dataTransfer.files.length&&!d._options.multiple?d._error("tooManyFilesError",""):d._uploadFileList(a.dataTransfer.files)}});this.addDisposer(function(){f.dispose()});this._options.dragAndDrop.hideDropzones&&qq(e).hide()},_setupDragDrop:function(){var f,e;f=this;this._options.dragAndDrop.disableDefaultDropzone||(e=this._find(this._element,"drop"),this._options.dragAndDrop.extraDropzones.push(e));var h=this._options.dragAndDrop.extraDropzones,g;for(g=0;g<h.length;g++){this._setupDropzone(h[g])}!this._options.dragAndDrop.disableDefaultDropzone&&(!qq.ie()||qq.ie10())&&this._attach(document,"dragenter",function(){if(!qq(e).hasClass(f._classes.dropDisabled)){e.style.display="block";for(g=0;g<h.length;g++){h[g].style.display="block"}}});this._attach(document,"dragleave",function(a){if(f._options.dragAndDrop.hideDropzones&&qq.FineUploader.prototype._leaving_document_out(a)){for(g=0;g<h.length;g++){qq(h[g]).hide()}}});qq(document).attach("drop",function(a){if(f._options.dragAndDrop.hideDropzones){for(g=0;g<h.length;g++){qq(h[g]).hide()}}a.preventDefault()})},_onSubmit:function(d,c){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(d,c)},_onProgress:function(j,i,p,o){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var n,m,l,k;n=this.getItemByFileId(j);m=this._find(n,"progressBar");k=Math.round(100*(p/o));p===o?(l=this._find(n,"cancel"),qq(l).hide(),qq(m).hide(),qq(this._find(n,"statusText")).setText(this._options.text.waitingForResponse),l=this._formatSize(o)):(l=this._formatProgress(p,o),qq(m).css({display:"block"}));qq(m).css({width:k+"%"});n=this._find(n,"size");qq(n).css({display:"inline"});qq(n).setText(l)},_onComplete:function(g,f,j,i){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var h=this.getItemByFileId(g);qq(this._find(h,"statusText")).clearText();qq(h).removeClass(this._classes.retrying);qq(this._find(h,"progressBar")).hide();(!this._options.disableCancelForFormUploads||qq.UploadHandlerXhr.isSupported())&&qq(this._find(h,"cancel")).hide();qq(this._find(h,"spinner")).hide();j.success?(qq(h).addClass(this._classes.success),this._classes.successIcon&&(this._find(h,"finished").style.display="inline-block",qq(h).addClass(this._classes.successIcon))):(qq(h).addClass(this._classes.fail),this._classes.failIcon&&(this._find(h,"finished").style.display="inline-block",qq(h).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[g]&&qq(h).addClass(this._classes.retryable),this._controlFailureTextDisplay(h,j))},_onUpload:function(e,d,f){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(this.getItemByFileId(e))},_onBeforeAutoRetry:function(h){var g,l,k,j,i;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);g=this.getItemByFileId(h);l=this._find(g,"progressBar");this._showCancelLink(g);l.style.width=0;qq(l).hide();this._options.retry.showAutoRetryNote&&(l=this._find(g,"statusText"),k=this._autoRetries[h]+1,j=this._options.retry.maxAutoAttempts,i=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,k),i=i.replace(/\{maxAuto\}/g,j),qq(l).setText(i),1===k&&qq(g).addClass(this._classes.retrying))},_onBeforeManualRetry:function(d){if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)){var c=this.getItemByFileId(d);this._find(c,"progressBar").style.width=0;qq(c).removeClass(this._classes.fail);this._showSpinner(c);this._showCancelLink(c);return !0}return !1},_addToList:function(f,e){var h=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.UploadHandlerXhr.isSupported()){var g=this._find(h,"cancel");qq(g).remove()}h.qqFileId=f;g=this._find(h,"file");qq(g).setText(this._formatFileName(e));qq(this._find(h,"size")).hide();this._options.multiple||this._clearList();this._listElement.appendChild(h)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_bindCancelAndRetryEvents:function(){var b=this;this._attach(this._listElement,"click",function(a){var a=a||window.event,d=a.target||a.srcElement;if(qq(d).hasClass(b._classes.cancel)||qq(d).hasClass(b._classes.retry)){qq.preventDefault(a);for(a=d.parentNode;void 0==a.qqFileId;){a=d=d.parentNode}qq(d).hasClass(b._classes.cancel)?(b.cancel(a.qqFileId),qq(a).remove()):(qq(a).removeClass(b._classes.retryable),b.retry(a.qqFileId))}})},_formatProgress:function(f,e){var h=this._options.text.formatProgress,g=Math.round(100*(f/e)),h=h.replace("{percent}",g),g=this._formatSize(e);return h=h.replace("{total_size}",g)},_controlFailureTextDisplay:function(h,g){var l,k,j,i;l=this._options.failedUploadTextDisplay.mode;k=this._options.failedUploadTextDisplay.maxChars;j=this._options.failedUploadTextDisplay.responseProperty;"custom"===l?((l=g[j])?l.length>k&&(i=l.substring(0,k)+"..."):(l=this._options.text.failUpload,this.log("'"+j+"' is not a valid property on the server response.","warn")),qq(this._find(h,"statusText")).setText(i||l),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(h,l)):"default"===l?qq(this._find(h,"statusText")).setText(this._options.text.failUpload):"none"!==l&&this.log("failedUploadTextDisplay.mode value of '"+l+"' is not valid","warn")},_showTooltip:function(d,c){d.title=c},_showSpinner:function(b){this._find(b,"spinner").style.display="inline-block"},_showCancelLink:function(b){if(!this._options.disableCancelForFormUploads||qq.UploadHandlerXhr.isSupported()){this._find(b,"cancel").style.display="inline"}},_error:function(d,c){this._options.showMessage(qq.FineUploaderBasic.prototype._error.apply(this,arguments))}});qq.UploadDropZone=function(b){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(this._options,b);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(){qq.UploadDropZone.dropOutsideDisabled||(this._dragover_should_be_canceled?qq(document).attach("dragover",function(b){b.preventDefault()}):qq(document).attach("dragover",function(b){b.dataTransfer&&(b.dataTransfer.dropEffect="none",b.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var b=this;b._attach(b._element,"dragover",function(a){if(b._isValidFileDrag(a)){var d=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"==d||"linkMove"==d?"move":"copy";a.stopPropagation();a.preventDefault()}});b._attach(b._element,"dragenter",function(a){if(b._isValidFileDrag(a)){b._options.onEnter(a)}});b._attach(b._element,"dragleave",function(a){if(b._isValidFileDrag(a)){b._options.onLeave(a);var d=document.elementFromPoint(a.clientX,a.clientY);if(!qq(this).contains(d)){b._options.onLeaveNotDescendants(a)}}});b._attach(b._element,"drop",function(a){b._isValidFileDrag(a)&&(a.preventDefault(),b._options.onDrop(a))})},_isValidFileDrag:function(e){if(qq.ie()&&!qq.ie10()){return !1}var e=e.dataTransfer,d=qq.safari(),f=qq.ie10()?!0:"none"!=e.effectAllowed;return e&&f&&(e.files||!d&&e.types.contains&&e.types.contains("Files"))}};qq.UploadHandlerAbstract=function(b){this._options={debug:!1,endpoint:"/upload.php",maxConnections:999,log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onAutoRetry:function(){}};qq.extend(this._options,b);this._queue=[];this._params=[];this.log=this._options.log};qq.UploadHandlerAbstract.prototype={add:function(){},upload:function(f,e){var h=this._queue.push(f),g={};qq.extend(g,e);this._params[f]=g;h<=this._options.maxConnections&&this._upload(f,this._params[f])},retry:function(b){0<=qq.indexOf(this._queue,b)?this._upload(b,this._params[b]):this.upload(b,this._params[b])},cancel:function(b){this.log("Cancelling "+b);this._cancel(b);this._dequeue(b)},cancelAll:function(){for(var b=0;b<this._queue.length;b++){this._cancel(this._queue[b])}this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},reset:function(){this.log("Resetting upload handler");this._queue=[];this._params=[]},_upload:function(){},_cancel:function(){},_dequeue:function(d){d=qq.indexOf(this._queue,d);this._queue.splice(d,1);var c=this._options.maxConnections;this._queue.length>=c&&d<c&&(d=this._queue[c-1],this._upload(d,this._params[d]))},isValid:function(){}};qq.UploadHandlerForm=function(b){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={};this._detach_load_events={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{add:function(d){d.setAttribute("name",this._options.inputName);var c="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[c]=d;d.parentNode&&qq(d).remove();return c},getName:function(b){return this._inputs[b].value.replace(/.*(\/|\\)/,"")},isValid:function(b){return void 0!==this._inputs[b]},reset:function(){qq.UploadHandlerAbstract.prototype.reset.apply(this,arguments);this._inputs={};this._detach_load_events={}},_cancel:function(b){this._options.onCancel(b,this.getName(b));delete this._inputs[b];delete this._detach_load_events[b];if(b=document.getElementById(b)){b.setAttribute("src","javascript:false;"),qq(b).remove()}},_upload:function(i,h){this._options.onUpload(i,this.getName(i),!1);var n=this._inputs[i];if(!n){throw Error("file with passed id was not added, or already uploaded or cancelled")}var m=this.getName(i);h[this._options.inputName]=m;var l=this._createIframe(i),k=this._createForm(l,h);k.appendChild(n);var j=this;this._attachLoadEvent(l,function(){j.log("iframe loaded");var a=j._getIframeContentJSON(l);setTimeout(function(){j._detach_load_events[i]();delete j._detach_load_events[i];qq(l).remove()},1);if(a.success||!j._options.onAutoRetry(i,m,a)){j._options.onComplete(i,m,a),j._dequeue(i)}});this.log("Sending upload request for "+i);k.submit();qq(k).remove();return i},_attachLoadEvent:function(e,d){var f=this;this._detach_load_events[e.id]=qq(e).attach("load",function(){f.log("Received response for "+e.id);if(e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML){return}}catch(a){f.log("Error when attempting to access iframe during handling of upload response ("+a+")","error")}d()}})},_getIframeContentJSON:function(a){try{var b=a.contentDocument?a.contentDocument:a.contentWindow.document,c,d=b.body.innerHTML;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+d);d&&d.match(/^<pre/i)&&(d=b.body.firstChild.firstChild.nodeValue);c=eval("("+d+")")}catch(e){this.log("Error when attempting to parse form upload response ("+e+")","error"),c={success:!1}}return c},_createIframe:function(d){var c=qq.toElement('<iframe src="javascript:false;" name="'+d+'" />');c.setAttribute("id",d);c.style.display="none";document.body.appendChild(c);return c},_createForm:function(f,e){var h=qq.toElement('<form method="'+(this._options.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),g=qq.obj2url(e,this._options.endpoint);h.setAttribute("action",g);h.setAttribute("target",f.name);h.style.display="none";document.body.appendChild(h);return h}});qq.UploadHandlerXhr=function(b){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var b=document.createElement("input");b.type="file";return"multiple" in b&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof(new XMLHttpRequest).upload};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(b){if(!(b instanceof File)){throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}return this._files.push(b)-1},getName:function(b){b=this._files[b];return null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name},getSize:function(b){b=this._files[b];return null!=b.fileSize?b.fileSize:b.size},getLoaded:function(b){return this._loaded[b]||0},isValid:function(b){return void 0!==this._files[b]},reset:function(){qq.UploadHandlerAbstract.prototype.reset.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]},_upload:function(i,h){this._options.onUpload(i,this.getName(i),!0);var n=this._files[i],m=this.getName(i);this.getSize(i);this._loaded[i]=0;var l=this._xhrs[i]=new XMLHttpRequest,k=this;l.upload.onprogress=function(a){a.lengthComputable&&(k._loaded[i]=a.loaded,k._options.onProgress(i,m,a.loaded,a.total))};l.onreadystatechange=function(){4==l.readyState&&k._onComplete(i,l)};h=h||{};h[this._options.inputName]=m;var j=qq.obj2url(h,this._options.endpoint);l.open(this._options.demoMode?"GET":"POST",j,!0);l.setRequestHeader("X-Requested-With","XMLHttpRequest");l.setRequestHeader("X-File-Name",encodeURIComponent(m));l.setRequestHeader("Cache-Control","no-cache");this._options.forceMultipart?(j=new FormData,j.append(this._options.inputName,n),n=j):(l.setRequestHeader("Content-Type","application/octet-stream"),l.setRequestHeader("X-Mime-Type",n.type));for(key in this._options.customHeaders){l.setRequestHeader(key,this._options.customHeaders[key])}this.log("Sending upload request for "+i);l.send(n)},_onComplete:function(a,b){if(this._files[a]){var c=this.getName(a),d=this.getSize(a),e;this._options.onProgress(a,c,d,d);this.log("xhr - server response received for "+a);this.log("responseText = "+b.responseText);try{e="function"===typeof JSON.parse?JSON.parse(b.responseText):eval("("+b.responseText+")")}catch(f){this.log("Error when attempting to parse xhr response text ("+f+")","error"),e={}}if(200===b.status&&e.success||!this._options.onAutoRetry(a,c,e,b)){this._options.onComplete(a,c,e,b),this._xhrs[a]=null,this._dequeue(a)}}},_cancel:function(b){this._options.onCancel(b,this.getName(b));this._files[b]=null;this._xhrs[b]&&(this._xhrs[b].abort(),this._xhrs[b]=null)}});(function(v){var u,t,s,r,q,p,o,n,m,l;p=["uploaderType"];s=function(b){b&&(b=n(b),o(b),"basic"===q("uploaderType")?u(new qq.FineUploaderBasic(b)):u(new qq.FineUploader(b)));return t};r=function(e,c){var f=t.data("fineuploader");if(c){void 0===f&&(f={}),f[e]=c,t.data("fineuploader",f)}else{return void 0===f?null:f[e]}};u=function(b){return r("uploader",b)};q=function(d,c){return r(d,c)};o=function(a){var c=a.callbacks={};v.each((new qq.FineUploaderBasic)._options.callbacks,function(f){var d,g;d=/^on(\w+)/.exec(f)[1];d=d.substring(0,1).toLowerCase()+d.substring(1);g=t;c[f]=function(){var b=Array.prototype.slice.call(arguments);return g.triggerHandler(d,b)}})};n=function(a,g){var f,c;f=void 0===g?"basic"!==a.uploaderType?{element:t[0]}:{}:g;v.each(a,function(d,e){0<=v.inArray(d,p)?q(d,e):e instanceof v?f[d]=e[0]:v.isPlainObject(e)?(f[d]={},n(e,f[d])):v.isArray(e)?(c=[],v.each(e,function(h,i){i instanceof v?v.merge(c,i):c.push(i)}),f[d]=c):f[d]=e});if(void 0===g){return f}};m=function(a){return"string"===v.type(a)&&!a.match(/^_/)&&void 0!==u()[a]};l=function(b){return u()[b].apply(u(),Array.prototype.slice.call(arguments,1))};v.fn.fineUploader=function(a){t=this;if(u()&&m(a)){return l.apply(this,arguments)}if("object"===typeof a||!a){return s.apply(this,arguments)}v.error("Method "+a+" does not exist on jQuery.fineUploader");return this}})(jQuery);
dialogController=function(){var b=this;var a;this.create=function(e,d,c){a=e;if(!$("#"+e).length){$("body").append('<div id="'+e+'"></div>')}$("#"+e).dialog({title:d,autoOpen:false,dialogClass:"fixed",resizable:false,width:c,height:"auto",modal:true,buttons:{cancel:{"class":"big-cancel form-cancel",text:"Anulowanie",click:function(){$(this).dialog("close")}}},close:function(f,g){$(this).html("")},create:function(f,g){},open:function(f,g){}});return b};this.addButton=function(h,g,c,f){var e=$("#"+h).parent().find(".ui-dialog-buttonset");var d=$('<button type="button" class="'+c+'">'+g+"</button>");d.button().click(function(){f()});e.append(d)};this.addSubmitButton=function(e,c,d){if(typeof(d)=="undefined"){d=""}b.addButton(e,d,"big-apply form-apply",c);return b};this.addBackButton=function(d,c){b.addButton(d,"< ","big-cancel back form-back",c);return b};this.addContent=function(d,c){$("#"+d).html(c);return b};this.open=function(c){$("#"+c).dialog("open");return b};this.close=function(c){$("#"+c).html("");$("#"+c).dialog("close");return b}};var dialogController=new dialogController();
commentController=function(){var f=this;var d;var i=1;var c;var e;var j;var a=0;var g=0;var k=7;var b="review-form-container";this.init=function(){if(!$("#comment-container").length){return false}d=$("#product_id").val();$("#review-order-by-select li").on("click",function(){c=$(this).attr("data-value");f.loadReviewList(d,c)});$(document).on("click","#review-image-container .delete-btn",function(){var l=$(this).parent().find(".image_uri").val();$("#review-form-image-container input").each(function(){if($(this).val()==l){$(this).parent().remove()}});$(this).parent().remove();if(!$("#review-image-container .delete-btn").length){$("#review-form").find(".comment-images-label").addClass("hidden")}a=g=f.checkCountImages();if(a<k&&$("#review-form .upload-button").hasClass("hidden")){$("#review-form .upload-button").removeClass("hidden")}return false});f.initCommentImageGallery()};this.loadReviewList=function(m,l){$(".comments-block").hide();$(".comments-loader").show();if(l){var n=l.split("-")[0];var o=l.split("-")[1]}$.ajax({url:Routing.generate("TopMallFrontentBundle_comment_loadReviewList"),data:{product_id:m,order_by:n,order_type:o,rank:e},type:"GET",success:function(p){$("#review-container").html(p.html);f.initCommentImageGallery();if(e){$("#comment-title-rank-hint").removeClass("hidden").removeClassWild("_stars*").addClass("_stars"+e).parent().removeClass("hidden");$("#show-all-rank-btn").removeClass("hidden")}else{$("#show-all-rank-btn").addClass("hidden");$(".comments-title").show();$("#comment-title-rank-hint").addClass("hidden").parent().addClass("hidden")}$(".comments-loader").hide();$(".comments-block").show()}});return false};this.loadReviewListFirstPage=function(l){if(typeof l=="undefined"||l){switch(l){case true:$(".comment-tab-menu").trigger("click");break;case"show":if($(".comment-tab-menu").hasClass("active")){$(".comment-tab-menu").trigger("click")}case"hide":if(!$(".comment-tab-menu").hasClass("active")){$(".comment-tab-menu").trigger("click")}}}var m=function(){var n=$(".topmall-tabs").offset().top;if($(".b-header-main").hasClass("fixed")){return n-75}else{if($(window).width()<1000){return n-20}return n-70}};$("html, body").animate({scrollTop:m()},800);f.loadReviewList(d)};this.initCommentImageGallery=function(){if(!$("#comment-container").length){return false}$(".comment-image-container").each(function(){$(this).find("a").lightBox(lightbox_setting)})};this.loadChildrenCommentList=function(m,n){var l=$("#comment-"+m);$.ajax({url:Routing.generate("TopMallFrontentBundle_comment_loadChildrenCommentList"),data:{comment_id:m},type:"POST",success:function(o){$(l).replaceWith(o.html)}});return false};this.hideChildrenCommentList=function(m){var l=$("#comment-"+m);$(l).find(".comment-list-container").addClass("hidden");$(l).find(".show-comment-list-btn").removeClass("hidden");$(l).find(".hide-comment-list-btn").addClass("hidden");return false};this.loadCommentForm=function(l,m){if(typeof(m)=="undefined"){m=l}$.ajax({url:Routing.generate("TopMallFrontentBundle_comment_loadCommentForm"),data:{comment_id:l,comment_container_id:m},type:"POST",success:function(n){$("#comment-form").remove();if(n.status){$("#comemnt-form-container-"+m).html(n.html);$.each($(".comment-form input[type=text], .comment-form textarea"),function(){commonController.placeholder($(this))})}}});return false};this.loadReviewForm=function(){$.ajax({url:Routing.generate("TopMallFrontentBundle_comment_loadReviewForm"),data:{product_id:d},type:"POST",success:function(n){if(n.status){var m="";if($("#product-name").text()){m+=$("#product-name").text()}if($(".product-brand").text()){m+=" "+$(".product-brand").text()}if($(window).width()>599){var l=540}else{var l=320}dialogController.create(b,'<span class="review-dialog-title-product-name">'+m+"</span>",l).addContent(b,n.html).addSubmitButton(b,function(){commentController.saveReviewForm()},"Opublikuj recenzj").open(b);a=0;g=0;f.initReviewForm()}}});return false};this.initReviewForm=function(){symbol_counter($("#product_review_title"));symbol_counter($("#product_review_text"));$("#review-form").find(".rating-input").rating({callback:function(m,l){if($("#review-form-container").find(".star-rating-on").length){$("#product_review_rank").val($("#review-form-container").find(".star-rating-on").length)}$("#review-form ul.error_list:first").addClass("hidden")}});$(".qq-upload-button").on("click",function(){if($(".qq-upload-button").hasClass("load")){return false}});$("#product_review_title").on({blur:function(){$(".symbol_counter_textbox").addClass("alpha_off")},focus:function(){$(".symbol_counter_textbox").removeClass("alpha_off")},keyup:function(){symbol_counter($(this),1)}});$("#product_review_text").on({blur:function(){$(".symbol_counter_textarea").addClass("alpha_off")},focus:function(){$(".symbol_counter_textarea").removeClass("alpha_off")},keyup:function(){symbol_counter($(this),2)}});$("ul.error_list").css("opacity",100)};this.checkCountImages=function(){var l=0;$("#review-image-container").find("a.comments_img-uploaded-min").each(function(){l++});return l};this.saveCommentForm=function(){if(j){return false}j=true;var m=$("#comment-form");var l=$("#product_reeview_comment_Parent").val();$.ajax({url:$(m).attr("action"),data:$(m).serialize(),type:"POST",success:function(n){if(!n.status){$(m).parent().html(n.html);$.each($(".comment-form input[type=text], .comment-form textarea"),function(){commonController.placeholder($(this))})}else{$("#comment-form").remove();f.loadChildrenCommentList(l,true)}j=false}});return false},this.showLoader=function(l){var m=l.closest("div.ui-dialog");if(m.find("div.tm-loader-fade").size()==0){m.prepend($("#tm-loader-fade").html())}},this.hideLoader=function(l){l.closest("div.ui-dialog").find("div.tm-loader-fade").remove()},this.saveReviewForm=function(){if(j){return false}j=true;a=0;var l=$("#review-form");f.showLoader(l);$.ajax({url:$(l).attr("action"),data:$(l).serialize(),type:"POST",success:function(m){if(m.status){f.hideLoader(l);dialogController.close(b);$("#review-form").remove();$("#review-statistic").html(m.html);$("#product-review-statistic-preview").html(m.html_preview);$("#tab_comment_count_container").removeClass("hidden");$("#tab_comment_count").text("("+m.count+")");f.loadReviewList(d);if($("#review_sort_list").hasClass("hidden")){$("#review_sort_list, .comments-title").removeClass("hidden")}}else{f.hideLoader(l);$("#review-form-container").html(m.html);f.initReviewForm()}j=false}});return false};$("a.comment-like").on("click",function(){var l=($(this).attr("onclick"))?false:true;if(l){$("div.comments-list").on("click",function(m){m.preventDefault()})}else{}});this.like=function(l){return f.addFeedback(l,1)};this.complaint=function(l){return f.addFeedback(l,0)};this.resetReviewListRank=function(){e=undefined;f.loadReviewListFirstPage(false)};this.resetReviewListAllRank=function(l){e=undefined;f.loadReviewListFirstPage(l);$(".topmall-tabs .topmall-tabs-menu").removeClass("active");$(".topmall-tabs .comment-tab-menu").addClass("active");$(".topmall-tabs > div").removeClass("active");$(".topmall-tabs .comment-tab").addClass("active");$(".comments-title").hide()};this.setReviewListRank=function(l){e=l;f.loadReviewListFirstPage(false);$("#product-tabs-menu .selected").removeClass("selected");$("#product-tabs-menu .comment-tab").addClass("selected");$("#product-tabs .product-tab").addClass("hidden");$("#product-tabs .product-tab.comment-tab").removeClass("hidden");$(".comments-title").hide();return false};var h=true;this.addFeedback=function(m,l){if(h){h=false;$.ajax({url:Routing.generate("TopMallFrontentBundle_comment_addFeedback"),data:{comment_id:m,type:l},type:"POST",success:function(o){if(l==0){$("#comment-"+m).find(".comment-complaint:first").remove();setTimeout(function(){h=true},1000);alert(o.message)}if(l==1){var n=$("#comment-"+m).find(".comment-like:first");$(n).removeAttr("onclick");$(n).find(".like-link").remove();$(n).find(".like-icon").text(o.count);setTimeout(function(){h=true},1000)}}})}$("div.comments-list").on("click",function(n){n.preventDefault()});return false};this.showIsBannedMessage=function(){var l="is-banned-dialog";var m='<span style="font-size:14px;">Moliwo pozostawienia komentarza dla niepenosprawnych</span>';$("#"+b).dialog({title:"Ogoszenie",autoOpen:true,dialogClass:"fixed",resizable:false,width:"330",height:"auto",minHeight:"14",buttons:{submit:{"class":"big-apply",id:"id-apply",text:"Zamkn",click:function(){$(this).dialog("close")}}}});$("#"+b).html(m).dialog("open");return false};this.showMoreReviews=function(n){n.preventDefault();var m=$("#review-container > a").text();var l=$("#review-container > a").data("replacement-text");$("#review-container > a").text(l);$("#review-container > a").data("replacement-text",m);if($(".comments-list .comment-item[data-for-hide]").first().is(":visible")){$("html, body").animate({scrollTop:$("#comment-container").offset().top},500,null,function(){$(".comments-list .comment-item[data-for-hide]").hide()})}else{$(".comments-list .comment-item[data-for-hide]").show()}}};function symbol_counter(c,d){if(c.next().is("ul")){if(!c.val()){c.next().css("opacity","100")}else{c.next().css("opacity","0")}}var b=$(c).val().length,a=$(c).attr("maxlength"),f=a-b,e=$("ul.error_list").get(d);if(f<0){f=0}if(e==0){$(this).css("opacity","0")}if(b==0){$(c).parent().find(".counter_result").html(f);$(e).css("opacity","100")}if(b>a){$(c).val($(c).val().substr(0,a))}if(b==0){$(c).parent().find(".counter_text").html("znakw")}else{$(c).parent().find(".counter_result").html(f);$(c).parent().find(".counter_text").html("pozostao")}}var commentController=new commentController();$(function(){commentController.init()});
(function(a){a(".promotion-widget_label, .product__mytaxi_btn").on("click",function(){a(".promotion-widget").toggleClass("show")})}(jQuery));
/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(aQ){var aP,aO,aN,aM,aL,aK,aJ="Close",aI="BeforeClose",aH="AfterClose",aG="BeforeAppend",aF="MarkupParse",aE="Open",aD="Change",aC="mfp",aB="."+aC,aA="mfp-ready",az="mfp-removing",ay="mfp-prevent-close",ax=function(){},aw=!!window.jQuery,av=aQ(window),au=function(b,d){aP.ev.on(aC+b+aB,d)},at=function(a,j,i,h){var g=document.createElement("div");return g.className="mfp-"+a,i&&(g.innerHTML=i),h?j&&j.appendChild(g):(g=aQ(g),j&&g.appendTo(j)),g},ar=function(b,a){aP.ev.triggerHandler(aC+b,a),aP.st.callbacks&&(b=b.charAt(0).toLowerCase()+b.slice(1),aP.st.callbacks[b]&&aP.st.callbacks[b].apply(aP,aQ.isArray(a)?a:[a]))},aq=function(a){return a===aK&&aP.currTemplate.closeBtn||(aP.currTemplate.closeBtn=aQ(aP.st.closeMarkup.replace("%title%",aP.st.tClose)),aK=a),aP.currTemplate.closeBtn},ap=function(){aQ.magnificPopup.instance||(aP=new ax,aP.init(),aQ.magnificPopup.instance=aP)},ao=function(){var d=document.createElement("p").style,c=["ms","O","Moz","Webkit"];if(void 0!==d.transition){return !0}for(;c.length;){if(c.pop()+"Transition" in d){return !0}}return !1};ax.prototype={constructor:ax,init:function(){var a=navigator.appVersion;aP.isLowIE=aP.isIE8=document.all&&!document.addEventListener,aP.isAndroid=/android/gi.test(a),aP.isIOS=/iphone|ipad|ipod/gi.test(a),aP.supportsTransition=ao(),aP.probablyMobile=aP.isAndroid||aP.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),aN=aQ(document),aP.popupsCache={}},open:function(t){var s;if(t.isObj===!1){aP.items=t.items.toArray(),aP.index=0;var q,p=t.items;for(s=0;s<p.length;s++){if(q=p[s],q.parsed&&(q=q.el[0]),q===t.el[0]){aP.index=s;break}}}else{aP.items=aQ.isArray(t.items)?t.items:[t.items],aP.index=t.index||0}if(aP.isOpen){return void aP.updateItemHTML()}aP.types=[],aL="",t.mainEl&&t.mainEl.length?aP.ev=t.mainEl.eq(0):aP.ev=aN,t.key?(aP.popupsCache[t.key]||(aP.popupsCache[t.key]={}),aP.currTemplate=aP.popupsCache[t.key]):aP.currTemplate={},aP.st=aQ.extend(!0,{},aQ.magnificPopup.defaults,t),aP.fixedContentPos="auto"===aP.st.fixedContentPos?!aP.probablyMobile:aP.st.fixedContentPos,aP.st.modal&&(aP.st.closeOnContentClick=!1,aP.st.closeOnBgClick=!1,aP.st.showCloseBtn=!1,aP.st.enableEscapeKey=!1),aP.bgOverlay||(aP.bgOverlay=at("bg").on("click"+aB,function(){aP.close()}),aP.wrap=at("wrap").attr("tabindex",-1).on("click"+aB,function(c){aP._checkIfClose(c.target)&&aP.close()}),aP.container=at("container",aP.wrap)),aP.contentContainer=at("content"),aP.st.preloader&&(aP.preloader=at("preloader",aP.container,aP.st.tLoading));var m=aQ.magnificPopup.modules;for(s=0;s<m.length;s++){var l=m[s];l=l.charAt(0).toUpperCase()+l.slice(1),aP["init"+l].call(aP)}ar("BeforeOpen"),aP.st.showCloseBtn&&(aP.st.closeBtnInside?(au(aF,function(g,e,i,h){i.close_replaceWith=aq(h.type)}),aL+=" mfp-close-btn-in"):aP.wrap.append(aq())),aP.st.alignTop&&(aL+=" mfp-align-top"),aP.fixedContentPos?aP.wrap.css({overflow:aP.st.overflowY,overflowX:"hidden",overflowY:aP.st.overflowY}):aP.wrap.css({top:av.scrollTop(),position:"absolute"}),(aP.st.fixedBgPos===!1||"auto"===aP.st.fixedBgPos&&!aP.fixedContentPos)&&aP.bgOverlay.css({height:aN.height(),position:"absolute"}),aP.st.enableEscapeKey&&aN.on("keyup"+aB,function(c){27===c.keyCode&&aP.close()}),av.on("resize"+aB,function(){aP.updateSize()}),aP.st.closeOnContentClick||(aL+=" mfp-auto-cursor"),aL&&aP.wrap.addClass(aL);var f=aP.wH=av.height(),d={};if(aP.fixedContentPos&&aP._hasScrollBar(f)){var b=aP._getScrollbarSize();b&&(d.marginRight=b)}aP.fixedContentPos&&(aP.isIE7?aQ("body, html").css("overflow","hidden"):d.overflow="hidden");var a=aP.st.mainClass;return aP.isIE7&&(a+=" mfp-ie7"),a&&aP._addClassToMFP(a),aP.updateItemHTML(),ar("BuildControls"),aQ("html").css(d),aP.bgOverlay.add(aP.wrap).prependTo(aP.st.prependTo||aQ(document.body)),aP._lastFocusedEl=document.activeElement,setTimeout(function(){aP.content?(aP._addClassToMFP(aA),aP._setFocus()):aP.bgOverlay.addClass(aA),aN.on("focusin"+aB,aP._onFocusIn)},16),aP.isOpen=!0,aP.updateSize(f),ar(aE),t},close:function(){aP.isOpen&&(ar(aI),aP.isOpen=!1,aP.st.removalDelay&&!aP.isLowIE&&aP.supportsTransition?(aP._addClassToMFP(az),setTimeout(function(){aP._close()},aP.st.removalDelay)):aP._close())},_close:function(){ar(aJ);var b=az+" "+aA+" ";if(aP.bgOverlay.detach(),aP.wrap.detach(),aP.container.empty(),aP.st.mainClass&&(b+=aP.st.mainClass+" "),aP._removeClassFromMFP(b),aP.fixedContentPos){var a={marginRight:""};aP.isIE7?aQ("body, html").css("overflow",""):a.overflow="",aQ("html").css(a)}aN.off("keyup"+aB+" focusin"+aB),aP.ev.off(aB),aP.wrap.attr("class","mfp-wrap").removeAttr("style"),aP.bgOverlay.attr("class","mfp-bg"),aP.container.attr("class","mfp-container"),!aP.st.showCloseBtn||aP.st.closeBtnInside&&aP.currTemplate[aP.currItem.type]!==!0||aP.currTemplate.closeBtn&&aP.currTemplate.closeBtn.detach(),aP.st.autoFocusLast&&aP._lastFocusedEl&&aQ(aP._lastFocusedEl).focus(),aP.currItem=null,aP.content=null,aP.currTemplate=null,aP.prevHeight=0,ar(aH)},updateSize:function(b){if(aP.isIOS){var f=document.documentElement.clientWidth/window.innerWidth,e=window.innerHeight*f;aP.wrap.css("height",e),aP.wH=e}else{aP.wH=b||av.height()}aP.fixedContentPos||aP.wrap.css("height",aP.wH),ar("Resize")},updateItemHTML:function(){var h=aP.items[aP.index];aP.contentContainer.detach(),aP.content&&aP.content.detach(),h.parsed||(h=aP.parseEl(aP.index));var e=h.type;if(ar("BeforeChange",[aP.currItem?aP.currItem.type:"",e]),aP.currItem=h,!aP.currTemplate[e]){var b=aP.st[e]?aP.st[e].markup:!1;ar("FirstMarkupParse",b),b?aP.currTemplate[e]=aQ(b):aP.currTemplate[e]=!0}aM&&aM!==h.type&&aP.container.removeClass("mfp-"+aM+"-holder");var a=aP["get"+e.charAt(0).toUpperCase()+e.slice(1)](h,aP.currTemplate[e]);aP.appendContent(a,e),h.preloaded=!0,ar(aD,h),aM=h.type,aP.container.prepend(aP.contentContainer),ar("AfterChange")},appendContent:function(b,d){aP.content=b,b?aP.st.showCloseBtn&&aP.st.closeBtnInside&&aP.currTemplate[d]===!0?aP.content.find(".mfp-close").length||aP.content.append(aq()):aP.content=b:aP.content="",ar(aG),aP.container.addClass("mfp-"+d+"-holder"),aP.contentContainer.append(aP.content)},parseEl:function(j){var i,h=aP.items[j];if(h.tagName?h={el:aQ(h)}:(i=h.type,h={data:h,src:h.src}),h.el){for(var b=aP.types,a=0;a<b.length;a++){if(h.el.hasClass("mfp-"+b[a])){i=b[a];break}}h.src=h.el.attr("data-mfp-src"),h.src||(h.src=h.el.attr("href"))}return h.type=i||aP.st.type||"inline",h.index=j,h.parsed=!0,aP.items[j]=h,ar("ElementParse",h),aP.items[j]},addGroup:function(b,h){var g=function(a){a.mfpEl=this,aP._openClick(a,b,h)};h||(h={});var f="click.magnificPopup";h.mainEl=b,h.items?(h.isObj=!0,b.off(f).on(f,g)):(h.isObj=!1,h.delegate?b.off(f).on(f,h.delegate,g):(h.items=b,b.off(f).on(f,g)))},_openClick:function(j,i,h){var b=void 0!==h.midClick?h.midClick:aQ.magnificPopup.defaults.midClick;if(b||!(2===j.which||j.ctrlKey||j.metaKey||j.altKey||j.shiftKey)){var a=void 0!==h.disableOn?h.disableOn:aQ.magnificPopup.defaults.disableOn;if(a){if(aQ.isFunction(a)){if(!a.call(aP)){return !0}}else{if(av.width()<a){return !0}}}j.type&&(j.preventDefault(),aP.isOpen&&j.stopPropagation()),h.el=aQ(j.mfpEl),h.delegate&&(h.items=i.find(h.delegate)),aP.open(h)}},updateStatus:function(b,f){if(aP.preloader){aO!==b&&aP.container.removeClass("mfp-s-"+aO),f||"loading"!==b||(f=aP.st.tLoading);var c={status:b,text:f};ar("UpdateStatus",c),b=c.status,f=c.text,aP.preloader.html(f),aP.preloader.find("a").on("click",function(d){d.stopImmediatePropagation()}),aP.container.addClass("mfp-s-"+b),aO=b}},_checkIfClose:function(f){if(!aQ(f).hasClass(ay)){var b=aP.st.closeOnContentClick,a=aP.st.closeOnBgClick;if(b&&a){return !0}if(!aP.content||aQ(f).hasClass("mfp-close")||aP.preloader&&f===aP.preloader[0]){return !0}if(f===aP.content[0]||aQ.contains(aP.content[0],f)){if(b){return !0}}else{if(a&&aQ.contains(document,f)){return !0}}return !1}},_addClassToMFP:function(b){aP.bgOverlay.addClass(b),aP.wrap.addClass(b)},_removeClassFromMFP:function(b){this.bgOverlay.removeClass(b),aP.wrap.removeClass(b)},_hasScrollBar:function(b){return(aP.isIE7?aN.height():document.body.scrollHeight)>(b||av.height())},_setFocus:function(){(aP.st.focus?aP.content.find(aP.st.focus).eq(0):aP.wrap).focus()},_onFocusIn:function(a){return a.target===aP.wrap[0]||aQ.contains(aP.wrap[0],a.target)?void 0:(aP._setFocus(),!1)},_parseMarkup:function(a,h,g){var f;g.data&&(h=aQ.extend(g.data,h)),ar(aF,[a,h,g]),aQ.each(h,function(j,i){if(void 0===i||i===!1){return !0}if(f=j.split("_"),f.length>1){var e=a.find(aB+"-"+f[0]);if(e.length>0){var b=f[1];"replaceWith"===b?e[0]!==i[0]&&e.replaceWith(i):"img"===b?e.is("img")?e.attr("src",i):e.replaceWith(aQ("<img>").attr("src",i).attr("class",e.attr("class"))):e.attr(f[1],i)}}else{a.find(aB+"-"+j).html(i)}})},_getScrollbarSize:function(){if(void 0===aP.scrollbarSize){var b=document.createElement("div");b.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(b),aP.scrollbarSize=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return aP.scrollbarSize}},aQ.magnificPopup={instance:null,proto:ax.prototype,modules:[],open:function(a,d){return ap(),a=a?aQ.extend(!0,{},a):{},a.isObj=!0,a.index=d||0,this.instance.open(a)},close:function(){return aQ.magnificPopup.instance&&aQ.magnificPopup.instance.close()},registerModule:function(a,d){d.options&&(aQ.magnificPopup.defaults[a]=d.options),aQ.extend(this.proto,d.proto),this.modules.push(a)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},aQ.fn.magnificPopup=function(j){ap();var i=aQ(this);if("string"==typeof j){if("open"===j){var h,b=aw?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(arguments[1],10)||0;b.items?h=b.items[a]:(h=i,b.delegate&&(h=h.find(b.delegate)),h=h.eq(a)),aP._openClick({mfpEl:h},i,b)}else{aP.isOpen&&aP[j].apply(aP,Array.prototype.slice.call(arguments,1))}}else{j=aQ.extend(!0,{},j),aw?i.data("magnificPopup",j):i[0].magnificPopup=j,aP.addGroup(i,j)}return i};var an,am,al,ak="inline",aj=function(){al&&(am.after(al.addClass(an)).detach(),al=null)};aQ.magnificPopup.registerModule(ak,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){aP.types.push(ak),au(aJ+"."+ak,function(){aj()})},getInline:function(j,i){if(aj(),j.src){var h=aP.st.inline,b=aQ(j.src);if(b.length){var a=b[0].parentNode;a&&a.tagName&&(am||(an=h.hiddenClass,am=at(an),an="mfp-"+an),al=b.after(am).detach().removeClass(an)),aP.updateStatus("ready")}else{aP.updateStatus("error",h.tNotFound),b=aQ("<div>")}return j.inlineElement=b,b}return aP.updateStatus("ready"),aP._parseMarkup(i,{},j),i}}});var ai,ah="ajax",ag=function(){ai&&aQ(document.body).removeClass(ai)},af=function(){ag(),aP.req&&aP.req.abort()};aQ.magnificPopup.registerModule(ah,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){aP.types.push(ah),ai=aP.st.ajax.cursor,au(aJ+"."+ah,af),au("BeforeChange."+ah,af)},getAjax:function(b){ai&&aQ(document.body).addClass(ai),aP.updateStatus("loading");var a=aQ.extend({url:b.src,success:function(j,i,h){var c={data:j,xhr:h};ar("ParseAjax",c),aP.appendContent(aQ(c.data),ah),b.finished=!0,ag(),aP._setFocus(),setTimeout(function(){aP.wrap.addClass(aA)},16),aP.updateStatus("ready"),ar("AjaxContentAdded")},error:function(){ag(),b.finished=b.loadError=!0,aP.updateStatus("error",aP.st.ajax.tError.replace("%url%",b.src))}},aP.st.ajax.settings);return aP.req=aQ.ajax(a),""}}});var ae,ad=function(b){if(b.data&&void 0!==b.data.title){return b.data.title}var a=aP.st.image.titleSrc;if(a){if(aQ.isFunction(a)){return a.call(aP,b)}if(b.el){return b.el.attr(a)||""}}return""};aQ.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var b=aP.st.image,a=".image";aP.types.push("image"),au(aE+a,function(){"image"===aP.currItem.type&&b.cursor&&aQ(document.body).addClass(b.cursor)}),au(aJ+a,function(){b.cursor&&aQ(document.body).removeClass(b.cursor),av.off("resize"+aB)}),au("Resize"+a,aP.resizeImage),aP.isLowIE&&au("AfterChange",aP.resizeImage)},resizeImage:function(){var b=aP.currItem;if(b&&b.img&&aP.st.image.verticalFit){var d=0;aP.isLowIE&&(d=parseInt(b.img.css("padding-top"),10)+parseInt(b.img.css("padding-bottom"),10)),b.img.css("max-height",aP.wH-d)}},_onImageHasSize:function(b){b.img&&(b.hasSize=!0,ae&&clearInterval(ae),b.isCheckingImgSize=!1,ar("ImageHasSize",b),b.imgHidden&&(aP.content&&aP.content.removeClass("mfp-loading"),b.imgHidden=!1))},findImageSize:function(b){var h=0,g=b.img[0],f=function(a){ae&&clearInterval(ae),ae=setInterval(function(){return g.naturalWidth>0?void aP._onImageHasSize(b):(h>200&&clearInterval(ae),h++,void (3===h?f(10):40===h?f(50):100===h&&f(500)))},a)};f(1)},getImage:function(p,o){var n=0,m=function(){p&&(p.img[0].complete?(p.img.off(".mfploader"),p===aP.currItem&&(aP._onImageHasSize(p),aP.updateStatus("ready")),p.hasSize=!0,p.loaded=!0,ar("ImageLoadComplete")):(n++,200>n?setTimeout(m,100):l()))},l=function(){p&&(p.img.off(".mfploader"),p===aP.currItem&&(aP._onImageHasSize(p),aP.updateStatus("error",k.tError.replace("%url%",p.src))),p.hasSize=!0,p.loaded=!0,p.loadError=!0)},k=aP.st.image,b=o.find(".mfp-img");if(b.length){var a=document.createElement("img");a.className="mfp-img",p.el&&p.el.find("img").length&&(a.alt=p.el.find("img").attr("alt")),p.img=aQ(a).on("load.mfploader",m).on("error.mfploader",l),a.src=p.src,b.is("img")&&(p.img=p.img.clone()),a=p.img[0],a.naturalWidth>0?p.hasSize=!0:a.width||(p.hasSize=!1)}return aP._parseMarkup(o,{title:ad(p),img_replaceWith:p.img},p),aP.resizeImage(),p.hasSize?(ae&&clearInterval(ae),p.loadError?(o.addClass("mfp-loading"),aP.updateStatus("error",k.tError.replace("%url%",p.src))):(o.removeClass("mfp-loading"),aP.updateStatus("ready")),o):(aP.updateStatus("loading"),p.loading=!0,p.hasSize||(p.imgHidden=!0,o.addClass("mfp-loading"),aP.findImageSize(p)),o)}}});var ac,ab=function(){return void 0===ac&&(ac=void 0!==document.createElement("p").style.MozTransform),ac};aQ.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(b){return b.is("img")?b:b.find("img")}},proto:{initZoom:function(){var b,p=aP.st.zoom,o=".zoom";if(p.enabled&&aP.supportsTransition){var n,m,l=p.duration,i=function(g){var c=g.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),q="all "+p.duration/1000+"s "+p.easing,k={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},j="transition";return k["-webkit-"+j]=k["-moz-"+j]=k["-o-"+j]=k[j]=q,c.css(k),c},h=function(){aP.content.css("visibility","visible")};au("BuildControls"+o,function(){if(aP._allowZoom()){if(clearTimeout(n),aP.content.css("visibility","hidden"),b=aP._getItemToZoom(),!b){return void h()}m=i(b),m.css(aP._getOffset()),aP.wrap.append(m),n=setTimeout(function(){m.css(aP._getOffset(!0)),n=setTimeout(function(){h(),setTimeout(function(){m.remove(),b=m=null,ar("ZoomAnimationEnded")},16)},l)},16)}}),au(aI+o,function(){if(aP._allowZoom()){if(clearTimeout(n),aP.st.removalDelay=l,!b){if(b=aP._getItemToZoom(),!b){return}m=i(b)}m.css(aP._getOffset(!0)),aP.wrap.append(m),aP.content.css("visibility","hidden"),setTimeout(function(){m.css(aP._getOffset())},16)}}),au(aJ+o,function(){aP._allowZoom()&&(h(),m&&m.remove(),b=null)})}},_allowZoom:function(){return"image"===aP.currItem.type},_getItemToZoom:function(){return aP.currItem.hasSize?aP.currItem.img:!1},_getOffset:function(l){var k;k=l?aP.currItem.img:aP.st.zoom.opener(aP.currItem.el||aP.currItem);var j=k.offset(),i=parseInt(k.css("padding-top"),10),b=parseInt(k.css("padding-bottom"),10);j.top-=aQ(window).scrollTop()-i;var a={width:k.width(),height:(aw?k.innerHeight():k[0].offsetHeight)-b-i};return ab()?a["-moz-transform"]=a.transform="translate("+j.left+"px,"+j.top+"px)":(a.left=j.left,a.top=j.top),a}}});var aa="iframe",Z="//about:blank",Y=function(b){if(aP.currTemplate[aa]){var d=aP.currTemplate[aa].find("iframe");d.length&&(b||(d[0].src=Z),aP.isIE8&&d.css("display",b?"block":"none"))}};aQ.magnificPopup.registerModule(aa,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){aP.types.push(aa),au("BeforeChange",function(e,d,f){d!==f&&(d===aa?Y():f===aa&&Y(!0))}),au(aJ+"."+aa,function(){Y()})},getIframe:function(j,i){var h=j.src,b=aP.st.iframe;aQ.each(b.patterns,function(){return h.indexOf(this.index)>-1?(this.id&&(h="string"==typeof this.id?h.substr(h.lastIndexOf(this.id)+this.id.length,h.length):this.id.call(this,h)),h=this.src.replace("%id%",h),!1):void 0});var a={};return b.srcAction&&(a[b.srcAction]=h),aP._parseMarkup(i,a,j),aP.updateStatus("ready"),i}}});var X=function(b){var d=aP.items.length;return b>d-1?b-d:0>b?d+b:b},W=function(e,d,f){return e.replace(/%curr%/gi,d+1).replace(/%total%/gi,f)};aQ.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var b=aP.st.gallery,a=".mfp-gallery";return aP.direction=!0,b&&b.enabled?(aL+=" mfp-gallery",au(aE+a,function(){b.navigateByImgClick&&aP.wrap.on("click"+a,".mfp-img",function(){return aP.items.length>1?(aP.next(),!1):void 0}),aN.on("keydown"+a,function(c){37===c.keyCode?aP.prev():39===c.keyCode&&aP.next()})}),au("UpdateStatus"+a,function(d,e){e.text&&(e.text=W(e.text,aP.currItem.index,aP.items.length))}),au(aF+a,function(c,k,j,i){var h=aP.items.length;j.counter=h>1?W(b.tCounter,i.index,h):""}),au("BuildControls"+a,function(){if(aP.items.length>1&&b.arrows&&!aP.arrowLeft){var h=b.arrowMarkup,g=aP.arrowLeft=aQ(h.replace(/%title%/gi,b.tPrev).replace(/%dir%/gi,"left")).addClass(ay),c=aP.arrowRight=aQ(h.replace(/%title%/gi,b.tNext).replace(/%dir%/gi,"right")).addClass(ay);g.click(function(){aP.prev()}),c.click(function(){aP.next()}),aP.container.append(g.add(c))}}),au(aD+a,function(){aP._preloadTimeout&&clearTimeout(aP._preloadTimeout),aP._preloadTimeout=setTimeout(function(){aP.preloadNearbyImages(),aP._preloadTimeout=null},16)}),void au(aJ+a,function(){aN.off(a),aP.wrap.off("click"+a),aP.arrowRight=aP.arrowLeft=null})):!1},next:function(){aP.direction=!0,aP.index=X(aP.index+1),aP.updateItemHTML()},prev:function(){aP.direction=!1,aP.index=X(aP.index-1),aP.updateItemHTML()},goTo:function(b){aP.direction=b>=aP.index,aP.index=b,aP.updateItemHTML()},preloadNearbyImages:function(){var b,h=aP.st.gallery.preload,g=Math.min(h[0],aP.items.length),f=Math.min(h[1],aP.items.length);for(b=1;b<=(aP.direction?f:g);b++){aP._preloadItem(aP.index+b)}for(b=1;b<=(aP.direction?g:f);b++){aP._preloadItem(aP.index-b)}},_preloadItem:function(b){if(b=X(b),!aP.items[b].preloaded){var a=aP.items[b];a.parsed||(a=aP.parseEl(b)),ar("LazyLoad",a),"image"===a.type&&(a.img=aQ('<img class="mfp-img" />').on("load.mfploader",function(){a.hasSize=!0}).on("error.mfploader",function(){a.hasSize=!0,a.loadError=!0,ar("LazyLoadError",a)}).attr("src",a.src)),a.preloaded=!0}}}});var V="retina";aQ.magnificPopup.registerModule(V,{options:{replaceSrc:function(b){return b.src.replace(/\.\w+$/,function(c){return"@2x"+c})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var b=aP.st.retina,d=b.ratio;d=isNaN(d)?d():d,d>1&&(au("ImageHasSize."+V,function(e,c){c.img.css({"max-width":c.img[0].naturalWidth/d,width:"100%"})}),au("ElementParse."+V,function(a,c){c.src=b.replaceSrc(c,d)}))}}}}),ap()});
(function(a){a(".product-page__popup-gallery").magnificPopup({delegate:"a",type:"image",mainClass:"mfp-img-mobile",image:{verticalFit:true},gallery:{enabled:true}});a.extend(true,a.magnificPopup.defaults,{tClose:"Zamknij",tLoading:"Czekaj...",gallery:{tPrev:"Poprzednia",tNext:"Nastpna",tCounter:"%curr% z %total%"},image:{tError:"Zdjcie nie moe by zaadowane."},ajax:{tError:"Zdjcie nie moe by zaadowane."}})}(jQuery));